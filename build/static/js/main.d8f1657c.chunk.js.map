{"version":3,"sources":["view/components/StartComponents/Title/index.module.css","view/components/DataCollectionComponents/Title/index.module.css","view/components/FinishComponents/Title/index.module.css","view/pages/State.tsx","reportWebVitals.ts","view/components/DeliveryComponents/DownloadButton/index.tsx","view/components/DeliveryComponents/EmailList/index.tsx","view/pages/DeliveryPage/State.tsx","view/pages/DeliveryPage/index.tsx","controller/DeliveryController.tsx","view/pages/VisualizationPage/State.tsx","view/components/VisualizationComponents/FinishButton/index.tsx","view/components/VisualizationComponents/DiagramList/index.tsx","view/pages/VisualizationPage/index.tsx","view/pages/ModelCreationPage/State.tsx","view/components/ModelCreationComponents/Train/index.tsx","view/pages/ModelCreationPage/index.tsx","controller/ModelCreationController.tsx","controller/VisualizationController.tsx","view/components/ReferringComponents/ConstantsText/index.tsx","view/components/ReferringComponents/QRImage/index.tsx","view/components/ReferringComponents/LinkText/index.tsx","view/components/ReferringComponents/ChangeToVisuBtn/index.tsx","view/components/ReferringComponents/NewProjectButton/index.tsx","view/components/ReferringComponents/ModelList/index.tsx","view/components/ReferringComponents/ProjectList/index.tsx","view/components/ReferringComponents/LoadModelButton/index.tsx","view/pages/ReferringPage/State.tsx","view/components/ReferringComponents/LoginWindow/index.tsx","view/pages/ReferringPage/index.tsx","model/DeliveryFormat.tsx","controller/ReferringController.tsx","model/DatabaseConnector.tsx","model/Language.tsx","view/components/StartComponents/Title/index.tsx","view/components/StartComponents/Input/index.tsx","view/pages/StartPage/State.tsx","view/pages/StartPage/index.tsx","view/components/DataCollectionComponents/Title/index.tsx","view/components/DataCollectionComponents/Countdown/index.tsx","view/components/DataCollectionComponents/Diagram/index.tsx","view/pages/DataCollectionPage/State.tsx","view/pages/DataCollectionPage/index.tsx","controller/SensorManager.tsx","view/pages/ResultPage/State.tsx","view/pages/ResultPage/Result.tsx","controller/AIController.tsx","model/DeviceData.tsx","model/AIModel.tsx","model/DataPoint.tsx","model/DataRow.tsx","model/TimeSpan.tsx","model/Label.tsx","model/DataSet.tsx","model/Session.tsx","model/Project.tsx","model/User.tsx","model/AIBuilder.tsx","model/AIDistributor.tsx","model/Facade.tsx","view/components/FinishComponents/Title/index.tsx","view/components/FinishComponents/Diagram/index.tsx","view/components/FinishComponents/Input/Labelling/index.tsx","view/pages/FinishPage/State.tsx","view/pages/FinishPage/index.tsx","controller/FinishController.tsx","controller/DataCollectionController.tsx","controller/StartController.tsx","controller/MainController.tsx","index.tsx"],"names":["module","exports","States","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","DownloadButton","props","download","clicked","onClick","className","T_BUTTON_DOWNLOAD","Component","EmailList","delivery","chosenEmails","state","mouse","addButtonClick","inputempty","inputemail","id","address","chosen","emails","handleCreate","setState","inputchange","e","target","value","nanoid","handleKeyUp","keyCode","NotificationManager","error","E_INPUT_EMPTY_DE","map","emailObj","includes","E_INPUT_DUPLICATE_DE","test","addEmail","E_INPUT_INVALID_DE","handleMouse","flag","handleCheck","newEmails","handleDelete","window","confirm","Q_DELETE_ADDRESS_SINGLE_DE","filter","deleteEmail","chooseAllEmail","checked","clearAllChosen","Q_DELETE_ADDRESS_MULTI_DE","emailAddressList","entry","this","chosenCount","reduce","pre","email","total","length","T_ADD_BUTTON_DE","onKeyUp","onChange","type","placeholder","T_ADD_PLACEHOLDER_DE","style","backgroundColor","onMouseEnter","onMouseLeave","display","T_DELETE_BUTTON_DE","T_SELECTION_COUNT_PART_DE","T_SELECTION_COUNT_FULL_DE","T_SELECT_ALL_BUTTON_DE","T_SEND_BUTTON_DE","State","currentState","NeedMessage","languageCode","messages","DeliveryPage","observers","update","notify","VDOM","T_PAGE_TITLE_DE","bind","document","getElementById","ReactDOM","render","observer","push","index","indexOf","splice","DeliverWeb","NeedDownload","DeliveryController","chosenAiModel","page","attach","getState","chosenAIModel","deliverAsWebApp","MainController","getInstance","getMessage","waitForDB","getFacade","sendAIModel","dataSetMetas","currentDataSets","FinishButton","pageChangeToCreation","DiagramList","diagrammData","datavalue","showDiagramIndex","diagramList","lineLabels","sensorRow","time","color","csscolor","handleClick","diagram","dataSet","datavalues","i","rows","sensorType","dataCoordinate","j","datapoint","relativeTime","newDatasets","coordinate","sensor","sensorName","T_ACCELEROMETER_DE","T_GYROSCOPE_DE","T_MAGNETOMETER_DE","label","strokeColor","borderWidth","data","labels","datasets","options","datasetFill","pointDotRadius","pointHitDetectionRadius","offsetGridLines","pointDot","newList","dataSetID","undefined","LineChart","require","Line","index2","console","log","updateDiagramm","datasetname","forEach","dataset","dataSetName","width","innerWidth","height","VisualizationPage","PAGE_TITLE","changetoCreation","ChangeToCreation","trainingParameter","dataSets","imputator","classifier","scaler","features","Train","train","changeToReferring","openNewWindow","databaseList","imputators","name","T_IMPUTER_MEAN_DE","tag","scalers","T_SCALER_STANDARD_DE","T_SCALER_ROBUST_DE","T_SCALER_MIN_MAX_DE","T_SCALER_NORMALIZER_DE","myfeatures","T_FEATURE_MIN_DE","T_FEATURE_MAX_DE","T_FEATURE_VARIANCE_DE","T_FEATURE_ENERGY_DE","T_FEATURE_FOURIER_TRANSFORM_DE","T_FEATURE_MEAN_DE","T_FEATURE_AUTOREGRESSIVE_DE","T_FEATURE_SKEWNESS_DE","T_FEATURE_KURTOSIS_DE","T_FEATURE_IQR_DE","classifiers","T_CLASSIFIER_MLP_DE","T_CLASSIFIER_RANDOM_FOREST_DE","T_CLASSIFIER_K_NEIGHBORS_DE","T_CLASSIFIER_SVM_DE","chosenScaler","chosenclassifier","chosenImputator","Q_DATASET_DELETE_DE","handleChange","handleChoose","E_DATASET_EMPTY_SELECTION_DE","disabled","handleImputation","newChosen","E_IMPUTER_MULTI_SELECTION_DE","handleScaler","E_SCALER_MULTI_SELECTION_DE","handleExtraction","handleClassifier","E_CLASSIFIER_MULTI_SELECTION_DE","handleTrain","datasetsflag","imputatorsflag","classifiersflag","scalersflag","featuresflag","nochoice","datasetObj","imputatorObj","classifierObj","scalerObj","featureObj","E_DATASET_NO_SELECTION_DE","E_IMPUTER_NO_SELECTION_DE","E_CLASSIFIER_NO_SELECTION_DE","E_SCALER_NO_SELECTION_DE","E_FEATURE_NO_SELECTION_DE","x","T_DATASET_TITLE_DE","T_DATASET_DELETE_DE","T_DATASET_LIST_TITLE_DE","T_DATASET_LIST_DROPDOWN_DE","T_DATASET_LIST_ADD_DE","T_DATASET_ADD_DE","T_IMPUTER_TITLE_DE","T_SCALER_TITLE_DE","T_FEATURE_TITLE_DE","extraction","T_CLASSIFIER_TITLE_DE","T_BUTTON_START_DE","handleChangePage","T_BUTTON_HOME_DE","ModelCreationPage","NeedKiTraining","ChangeToRefferring","ModelCreationController","getDataSetMetas","startTraining","changeTo","RefferingController","params","slidingWindowStep","slidingWindowSize","trainingDataPercentage","applyModel","VisualizationController","currentProject","SetDataRows","loadProject","projectID","getDataRows","dataRows","intervalId","setInterval","clearInterval","ConstantsText","getText","title","React","QRImage","qr","src","alt","LinkText","link","T_LINK_DESCRIPTION_DE","href","ChangeToVisuBtn","pageChangeToVisu","T_BUTTON_NEXT_DE","NewProjectButton","pageNewProject","projectName","click","changeProjectName","ModelList","AIModelID","pageLoadModel","chosenmodelID","modelObj","ProjectList","projectData","pageSetCurrentprojekt","pageLoadProjekt","loadclick","projectObj","Number","handleLoad","LoadModelButton","T_BUTTON_OPEN_LOAD_DE","adminData","aiUserData","sessionID","wait","islogedIn","LoginWindow","pageRegister","username","password","pageLogin","changeUsername","changeEmail","changePassword","register","login","T_BUTTON_LOGIN_DE","T_POPUP_LABEL_NAME_DE","T_POPUP_LABEL_EMAIL_DE","T_POPUP_LABEL_PASSWORD_DE","T_POPUP_BUTTON_LOGIN_DE","T_POPUP_BUTTON_REGISTER_DE","ReferringPage","createNewProject","changetovisu","setCurrentProjekt","loadmodel","loadproject","NewProjekt","Register","LoginFail","success","T_WELCOME_DE","E_REG_ERROR_DE","E_MAIL_INVALID_DE","Login","E_LOGIN_ERROR_DE","LoadProject","ChangeToVisual","LoadModel","DeliveryFormat","isloggedIn","getProjectMetas","toString","loadModel","SetLanguage","setLanguage","ChangeToDelivery","loginSucess","loginAdmin","catch","registerAdmin","url","URL","searchParams","append","getSessionID","QRCode","setTypeNumber","setErrorCorrectLevel","ErrorCorrectLevel","L","addData","make","toDataURL","SetQRC","sucess","createProject","createQR","LoadError","projectId","deliveryConroller","DatabaseConnector","a","sendRequest","result","requestData","Date","getMilliseconds","lastProjectUpdate","labelID","action","headers","fetch","databasePHPURL","method","body","JSON","stringify","response","json","obj","Language","language","code","Title","Input","pageChangeSettings","recordingSettings","availableSensorTypes","usedSensorTypes","leadTime","collectionTime","changeLeadtime","changeCollectionTime","changeName","handleCheckBoxChange","newAvailableSensorTypes","sensorTypID","submit","parseInt","isNaN","newDataSetName","waitTime","readTime","messageIDs","StartPage","admin","changeSettings","ChangeToDataCollection","T_TITLE_DE","Countdown","countdownNumber","chosenSensors","countdown","sensornames","Diagram","pageChangeToFinish","showDiagram","diagramLineLabels","diagramData","diagramOptions","z","text","scales","xAxes","ticks","beginAtZero","callback","isInteger","stepSize","redraw","usedSensorNames","dataPoints","DataCollectionPage","changeToFinish","ChangeToFinish","SensorManager","checkList","currentSensors","facade","startTime","saving","sensorTypes","accSensor","Accelerometer","frequency","addEventListener","getData","event","message","gyroSensor","Gyroscope","magSensor","Magnetometer","createDataSet","intervalId1","getTime","start","intervalId2","newDataPoint","shift","sendDataPoint","rowId","stop","checkForErrors","element","dataPoint","y","point","saveDatapointinRow","sensors","accelerometer","accelerometerExist","existSensor","gyroscope","gyroscopeExist","finish","ms","Promise","resolve","setTimeout","ResultPage","CLASSIFY","reloadPage","RELOAD","location","reload","AIController","modelID","sensorManager","urlParams","queryString","search","URLSearchParams","registerDataminer","AI_MODEL_USER_NAME","setUpSensorShown","get","split","ClassifyResult","classifyResult","setUpDataRead","detach","getWaitTime","readData","getCurrentDataRows","classify","prediction","DeviceData","deviceID","MACADRESS","deviceName","firmware","generation","MACADDRESS","deviceType","device","Smartphone","Desktop","AIModel","DataPoint","DataRow","dataRowID","dataRow","getValue","getRelativeTime","SensorTypeID","TimeSpan","span","end","Label","timeSpan","setTimeSpan","getStart","getEnd","DataSet","generateDate","getID","addDatapoint","getDataRow","labelName","setLabel","labelList","getLabel","Session","connectedUser","user","userID","users","userName","getName","Project","session","aiModel","currentDataSet","aiModelID","createLabel","deleteLabel","getLabels","User","getCurrentDataSetID","newID","setCurrentDataSetID","deleteDataSet","Admin","adminID","adminName","loadDevice","project","existProject","newProject","newproject","Dataminer","AIModelUser","AIBuilder","modelId","modelData","buildModel","dataSetId","callBack","successAction","plainText","xhr","XMLHttpRequest","open","onreadystatechange","readyState","status","responseJSON","parse","responseText","Error","send","setRequestHeader","AIDistributor","format","Object","keys","statusText","EXE","WEB_APP","emailList","recipients","reject","onerror","entries","header","content","Facade","dbCon","loadLanguage","sensorTypeID","datarowNames","getCurrentProjectID","sensorID","datarowName","sendDataPointsAgain","datapoints","adminEmail","getEmail","getAdminEmail","getLanguageCode","getLanguageMetas","sensorInformation","IDs","dataminerName","dataminer","dataminerID","aiModelUserName","registerAIModelUser","aiModelUser","aiModelUserID","datasetID","aiId","getAIModel","model","aiBuilder","Labelling","newStart","newEnd","newName","newLabel","pagedeleteLabel","IDcounter","handleChangeLabel","handleChangeStart","handleChangeEnd","labelObj","addLabel","replace","formatFloatInString","NaN","newLabels","E_TIME_INVALID_DE","E_NAME_MISSING_DE","E_MISSING_DE","stringNumber","parseFloat","T_TIME_FROM_DE","T_TIME_TO_DE","T_BUTTON_DELETE_DE","T_LABEL_START_DE","T_LABEL_END_DE","T_LABEL_NAME_DE","T_BUTTON_ADD_DE","currentLabel","FinishPage","T_BUTTON_RELOAD_DE","NewLabel","DeleteLabel","FinishController","ChangeLabel","changeDataLabel","newDataLabel","deleteDataLabel","promise","DataCollectionController","StartDataRead","NeedInstantDiagram","StartController","getAvailableSensors","availableSensor","dataCollectionController","currentPageController","destinationPageController","dataDE","mainController","startApp"],"mappings":"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","file":"static/js/main.d8f1657c.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"Title_title__16vB9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"Title_title__1WB_r\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"Title_title__3LAYU\"};","export interface IState {\r\n  currentState: States;\r\n  languageCode: string;\r\n  messages: { text: string, id: number; }[];\r\n\r\n  //Anzeige aller Projekte eines nutzers\r\n  //ReferringPage\r\n  projectData?: { projectID: number; projectName: string; AIModelID: number[]; }[];\r\n  // Das Projekt welches in der view ausgewählt wurde\r\n  currentProject?: { projectID: number, projectName: string, AIModelID: number[]; };\r\n  chosenAIModel?: number;\r\n  adminData?: { name: string, email: string, password: string; };\r\n  aiUserData?: { name: string, result: string; };\r\n  currentLabel?: { labelID: number, start: number, end: number; name: string; };\r\n  sessionID?: string;\r\n  dataPoints?: { rowId: number, sensorType: number, value: number[]; relativeTime: number; }[];\r\n  dataRows?: { sensorType: number, datapoint: { value: number[], relativeTime: number; }[]; }[];\r\n  //DataSet?: {dataSetID: number, rows: {sensorType: number, value: number[]; relativeTime: number; }[] }[]\r\n  dataSetMetas?: { dataSetID: number; dataSetName: string; }[];\r\n  currentDataSets?: { dataSetID: number, rows: { sensorType: number, datapoint: { value: number[], relativeTime: number; }[]; }[]; }[];\r\n  qr?: string;\r\n  diagramSvg?: string;\r\n  recordingSettings?: { newDataSetName: string, usedSensorTypes: number[], readTime: number, waitTime: number, availableSensorTypes: { sensorTypID: number; sensorType: string; chosen: boolean; }[]; };\r\n  leadTime?: number;\r\n  usedSensorNames?: string[];\r\n  trainingParameter?: {\r\n    dataSets: number[],\r\n    imputator: string,\r\n    classifier: string,\r\n    scaler: string,\r\n    features: string[];\r\n    trainingDataPercentage?: number, // optional\r\n    slidingWindowSize?: number,      // optional\r\n    slidingWindowStep?: number;        // optional\r\n  };\r\n  islogedIn?: boolean;\r\n  chosenEmails?: string[];\r\n  wait?: Promise<any>;\r\n  link?: string;\r\n  //Beispiel fuer Visu\r\n  //testDataSet?: { dataSetID: number; rows: { sensorType: number; datapoint: { value: number[]; relativeTime: number; }[]; }[]; }[];\r\n}\r\n\r\n\r\nexport enum States {\r\n\r\n  setUpSensorManager = \"setUpSensorManager\",\r\n\r\n  waitForDB = \"waitForDB\",\r\n  /**\r\n   * Seite benötigt texte\r\n   */\r\n  NeedMessage = \"NeedMessage\",\r\n  /**\r\n   * Seite kann nun aus dem status die texte laden\r\n   */\r\n  SetMessage = \"SetMessage\",\r\n  /**\r\n   * Seite benötigt ein QRC\r\n   */\r\n  NeedQRC = \"NeedQRC\",\r\n  /**\r\n   * QRC kann angezeigt werden\r\n   */\r\n  SetQRC = \"SetQRC\",\r\n  /**\r\n   * Projektdaten können benutzt werden\r\n   */\r\n  SetProjects = \"SetProjects\",\r\n  /**\r\n   * Sprache der Anwendung soll geändert werden\r\n   */\r\n  SetLanguage = \"SetLanguage\",\r\n  /**\r\n   * Fehler für alle zu ladenen sachen\r\n   */\r\n  LoadError = \"LoadError\",\r\n  /**\r\n   * Ein Login Versuch soll durchgeführt werden\r\n   */\r\n  Login = \"Login\",\r\n  /**\r\n   * Ein Registrierungsversuch soll durchgeführt werden\r\n   */\r\n  Register = \"Register\",\r\n  /**\r\n     * Update aller Daten welche auf der Seite angezeigt werden, zum Beispiel Projekt Daten für die Projekt liste.\r\n     */\r\n  updateData = \"updateData\",\r\n  /**\r\n   * Ein neues Projekt soll erstellt werden\r\n   */\r\n  NewProjekt = \"NewProjekt\",\r\n  /**\r\n   * Projekts soll geladen werden\r\n   */\r\n  LoadProject = \"LoadProject\",\r\n  /**\r\n   * Model eines Projekts soll geladen werden\r\n   */\r\n  LoadModel = \"LoadModel\",\r\n  /**\r\n   * Login ist gescheitert\r\n   */\r\n  LoginFail = \"LoginFail\",\r\n  /**\r\n   * Beginne Datenerfassung\r\n   */\r\n  StartDataRead = \"StartDataRead\",\r\n  /**\r\n   * Klassifiziere Daten\r\n   */\r\n  ClassifyResult = \"ClassifyResult\",\r\n  /**\r\n   * Die Seite benötigt die neusten Datenreihen\r\n   */\r\n  NeedDataRows = \"NeedDataRows\",\r\n  /**\r\n   * Ein Label soll geändert werden\r\n   */\r\n  ChangeLabel = \"ChangeLabel\",\r\n  /**\r\n   * Ein Label soll gelöscht werden\r\n   */\r\n  DeleteLabel = \"DeleteLabel\",\r\n  /**\r\n   * Ein neues Label los erstellt werden\r\n   */\r\n  NewLabel = \"NewLabel\",\r\n  /**\r\n   * Wechsel zur Startseite\r\n   */\r\n  ChangeToStart = \"ChangeToStart\",\r\n  /**\r\n   * Wechsel zur Fertigungsseite\r\n   */\r\n  ChangeToFinish = \"ChangeToFinish\",\r\n  /**\r\n   * Wechsel zur Verweisseite\r\n   */\r\n  ChangeToDataCollection = \"ChangeToDataCollection\",\r\n\r\n  ChangeToRefferring = \"ChangeToRefferring\",\r\n\r\n  ChangeToVisual = \"ChangeToVisual\",\r\n\r\n  ChangeToCreation = \"ChangeToCreation\",\r\n\r\n  NeedInstantDiagram = \"NeedInstantDiagram\",\r\n\r\n  /**\r\n   * Zeige neue wartezeit\r\n   */\r\n  SetWaitTime = \"SetWaitTime\",\r\n  /**\r\n   * Zeige neue lesezeit\r\n   */\r\n  SetReadTime = \"SetReadTime\",\r\n\r\n  //Visu\r\n  NeedRows = \"NeedRows\",\r\n\r\n  //Delivery\r\n  /**\r\n   * Liefert an die auf der Seite angegebenen Email-Adressen die WebApp für ein Modell\r\n   */\r\n  DeliverWeb = \"DeliverWeb\",\r\n  //Download\r\n  NeedDownload = \"NeedDownload\",\r\n\r\n  //Modelcreation\r\n  NeedDatabaseList = \"NeedDatabaseList\",\r\n\r\n  /**\r\n   * Neue Datenreihen sind im Status hinterlegt\r\n   */\r\n  SetDataRows = \"SetDataRows\",\r\n  /**\r\n   * Der Nutzer möchte mit dem KI Training beginnen\r\n   */\r\n  NeedKiTraining = \"NeedKiTraining\",\r\n  /**\r\n   * Eine Veränderung des Labels war erfolgreich\r\n   */\r\n  setLabel = \"setLabel\",\r\n\r\n  NeedLeadTime = \"NeedLeadTime\",\r\n\r\n  ChangeToDelivery = \"ChangeToDelivery\"\r\n}","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React, { Component } from 'react'\r\nimport './DownloadButton.css'\r\n\r\n/**\r\n * Herunterladen-Knopf\r\n */\r\nexport default class DownloadButton extends Component {\r\n    private static readonly T_BUTTON_DOWNLOAD: string = \"Herunterladen!\";\r\n\r\n    /**\r\n     * Variablen und Methoden welche der Klasse zur verfügung gestellt werden müssen\r\n     */\r\n    props = {\r\n        download: function () { }\r\n    }\r\n\r\n    /**\r\n     * Klicken-Methode\r\n     */\r\n    clicked = () => {\r\n        this.props.download()\r\n    }\r\n\r\n    /**\r\n     * Render Methode des Komponenten\r\n     * @returns Aufbau des Komponenten\r\n     */\r\n    render() {\r\n        return (\r\n            <div>\r\n                <button onClick={() => this.clicked()} className=\"download-btn\" >{DownloadButton.T_BUTTON_DOWNLOAD}</button>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\nimport { nanoid } from 'nanoid';\r\nimport { NotificationManager } from 'react-notifications';\r\nimport 'react-notifications/lib/notifications.css';\r\nimport \"./index.css\"\r\n\r\n/**\r\n * Behandeln Emailliste mit Hinzufügen und Löschen, wählen Eamils auszuliefern\r\n */\r\nexport default class EmailList extends Component {\r\n\tprivate static readonly E_INPUT_EMPTY_DE: string = \"Die Eingabe darf nicht leer sein!\";\r\n\tprivate static readonly E_INPUT_DUPLICATE_DE: string = \"Diese E-Mail-Adresse ist schon in der Liste!\";\r\n\tprivate static readonly E_INPUT_INVALID_DE: string = \"Der eingebene Wert kann keine gültige E-Mail-Adresse sein.\";\r\n\tprivate static readonly Q_DELETE_ADDRESS_SINGLE_DE: string = \"Sind Sie sich sicher, die gewählte Emailadresse löschen zu wollen?\";\r\n\tprivate static readonly Q_DELETE_ADDRESS_MULTI_DE: string = \"Sind Sie sich sicher, die gewählten Emailadressen löschen zu wollen?\";\r\n\tprivate static readonly T_ADD_BUTTON_DE: string = \"Neue Emailadresse mit 'Enter' hinzufügen!\";\r\n\tprivate static readonly T_ADD_PLACEHOLDER_DE: string = \"Ein Druck auf die 'Enter'-Taste fügt die Eingabe hinzu.\";\r\n\tprivate static readonly T_SELECTION_COUNT_PART_DE: string = \"Gewählt\";\r\n\tprivate static readonly T_SELECTION_COUNT_FULL_DE: string = \"Insgesamt\";\r\n\tprivate static readonly T_SEND_BUTTON_DE: string = \"Ausliefern!\";\r\n\tprivate static readonly T_DELETE_BUTTON_DE: string = \"Löschen\";\r\n\tprivate static readonly T_SELECT_ALL_BUTTON_DE: string = \"Alle ausgewählten Emailadressen hinzufügen!\";\r\n\r\n\t/**\r\n\t * Variablen und Methoden welche der Klasse zur verfügung gestellt werden müssen\r\n\t */\r\n\tprops = {\r\n\t\tdelivery: function (chosenEmails: string[]) { }\r\n\t};\r\n\r\n\t/**\r\n\t * Status für diese Komponente\r\n\t */\r\n\tstate = {\r\n\t\tmouse: false,\r\n\t\taddButtonClick: false,\r\n\t\tinputempty: true,\r\n\t\tinputemail: {\r\n\t\t\tid: '',\r\n\t\t\taddress: '',\r\n\t\t\tchosen: false\r\n\t\t},\r\n\t\temails: [] as { id: string, address: string, chosen: boolean }[]\r\n\t};\r\n\r\n\t/**\r\n\t * Erstellen Eingabefeld\r\n\t */\r\n\thandleCreate = () => {\r\n\t\tthis.setState({ addButtonClick: true });\r\n\t};\r\n\r\n\t/**\r\n\t * Eingabe Methode\r\n\t * @param e ChangeEventInput\r\n\t */\r\n\tinputchange = (e: React.ChangeEvent<HTMLInputElement>): void => {\r\n\t\tif (e.target.value === '') {\r\n\t\t\tthis.setState({ inputempty: true });\r\n\t\t} else {\r\n\t\t\tthis.setState({ inputemail: { id: nanoid(), address: e.target.value, chosen: false }, inputempty: false });\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Diese Methode verarbeitet eingegebene E-Mail-Adressen.\r\n\t * \r\n\t * @param e KeyboardEvent - über dieses Event wird die Methode ausgelöst. Es enthält ein paar Werte, die im weiteren Verlauf noch benötigt werden.\r\n\t */\r\n\thandleKeyUp = (e: React.KeyboardEvent<HTMLInputElement>): void => {\r\n\t\tconst { keyCode } = e;\r\n\t\t// check ENTER-key\r\n\t\tif (keyCode !== 13) return;\r\n\t\t// cant add empty email\r\n\t\tconst { inputemail, inputempty, emails } = this.state;\r\n\t\tif (inputempty) {\r\n\t\t\tNotificationManager.error(EmailList.E_INPUT_EMPTY_DE, \"\", 3000);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst exists = emails.map(emailObj => emailObj.address === inputemail.address).includes(true);\r\n\t\tif (exists) {\r\n\t\t\tNotificationManager.error(EmailList.E_INPUT_DUPLICATE_DE, \"\", 3000);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar pattern = /^([A-Za-z0-9_\\-.])+@([A-Za-z0-9_\\-.])+\\.([A-Za-z])+$/;\r\n\t\tif (pattern.test(inputemail.address)) {\r\n\t\t\tthis.addEmail(inputemail);\r\n\t\t} else {\r\n\t\t\tNotificationManager.error(EmailList.E_INPUT_INVALID_DE, \"\", 3000);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// hide inputbox\r\n\t\tthis.setState({ addButtonClick: false });\r\n\t};\r\n\r\n\t/**\r\n\t * Behandeln Mausstatus\r\n\t * \r\n\t * @param flag Mausstatus\r\n\t * @returns Ein vorbereiteter Funktionsaufruf zur Statusaktualisierung.\r\n\t */\r\n\thandleMouse = (flag: boolean) => {\r\n\t\treturn () => this.setState({ mouse: flag });\r\n\t};\r\n\r\n\t/**\r\n\t * Wählen Email Methode\r\n\t * \r\n\t * @param id gewählt EmailID\r\n\t * @param chosen gewählt oder nicht\r\n\t */\r\n\thandleCheck = (id: string, chosen: boolean) => {\r\n\t\tconst { emails } = this.state;\r\n\t\tconst newEmails = emails.map((emailObj) => {\r\n\t\t\tif (emailObj.id === id) return { ...emailObj, chosen };\r\n\t\t\telse return emailObj;\r\n\t\t});\r\n\t\tthis.setState({ emails: newEmails });\r\n\t};\r\n\r\n\t/**\r\n\t * Löschen Methode\r\n\t * \r\n\t * @param id EmailID zu löschen\r\n\t */\r\n\thandleDelete = (id: string): void => {\r\n\t\tif (window.confirm(EmailList.Q_DELETE_ADDRESS_SINGLE_DE)) {\r\n\t\t\tconst { emails } = this.state;\r\n\t\t\tconst newEmails = emails.filter((emailObj) => {\r\n\t\t\t\treturn emailObj.id !== id;\r\n\t\t\t});\r\n\t\t\t// update emailList\r\n\t\t\tthis.setState({ emails: newEmails });\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Diese Methode fügt eine E-Mail-Adresse zur Liste der E-Mail-Adressen hinzu und aktualisiert die Ansicht.\r\n\t * \r\n\t * @param emailObj Ein klassenloses Objekt, das die benötigten Daten einer E-Mail-Adresse enthält.\r\n\t */\r\n\taddEmail = (emailObj: { id: string, address: string, chosen: boolean; }): void => {\r\n\t\tconst { emails } = this.state;\r\n\t\tconst newEmails = [emailObj, ...emails];\r\n\t\t// update emailList\r\n\t\tthis.setState({ emails: newEmails });\r\n\t};\r\n\r\n\t/**\r\n\t * Diese Methode löscht eine E-Mail-Adresse aus der Liste der E-Mail-Adressen und aktualisiert die Ansicht.\r\n\t * \r\n\t * @param emailObj Die ID der zu löschenden Adresse.\r\n\t */\r\n\tdeleteEmail = (id: string): void => {\r\n\t\t// get orignal emailList\r\n\t\t// delete emailObj with id\r\n\t\tconst { emails } = this.state;\r\n\t\tconst newEmails = emails.filter(emailObj => emailObj.id !== id);\r\n\t\t// update emailList\r\n\t\tthis.setState({ emails: newEmails });\r\n\t};\r\n\r\n\t/**\r\n\t * Diese Methode wählt alle E-Mail-Adressen in der Liste aus und aktualisiert die Ansicht.\r\n\t * \r\n\t * @param emailObj Das auslösende Event\r\n\t */\r\n\tchooseAllEmail = (e: React.ChangeEvent<HTMLInputElement>): void => {\r\n\t\t// get orignal emailList\r\n\t\tconst chosen = e.target.checked;\r\n\t\tconst { emails } = this.state;\r\n\t\tconst newEmails = emails.map(emailObj => {return { ...emailObj, chosen };});\r\n\t\t// update emailList\r\n\t\tthis.setState({ emails: newEmails });\r\n\t};\r\n\r\n\t/**\r\n\t * Diese Methode löscht alle ausgewählten E-Mail-Adresse \r\n\t * aus der Liste der E-Mail-Adressen und aktualisiert die Ansicht.\r\n\t */\r\n\tclearAllChosen = (): void => {\r\n\t\tif (window.confirm(EmailList.Q_DELETE_ADDRESS_MULTI_DE)) {\r\n\t\t\t// get orignal emailList\r\n\t\t\tconst { emails } = this.state;\t\r\n\t\t\tconst newEmails = emails.filter(emailObj => !emailObj.chosen);\r\n\t\t\t// update emaillist\r\n\t\t\tthis.setState({ emails: newEmails });\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Ausliefern-Methode\r\n\t */\r\n\tdelivery = (): void => {\r\n\t\tconst { emails } = this.state;\r\n\t\tconst emailAddressList: string[] = emails.filter(entry => entry.chosen).map(entry => entry.address);\r\n\t\tthis.props.delivery(emailAddressList);\r\n\t};\r\n\r\n\t/**\r\n\t * Render Methode der Komponente\r\n\t * \r\n\t * @returns Aufbau der Komponente\r\n\t */\r\n\trender() {\r\n\t\tconst { mouse, emails } = this.state;\r\n\t\tconst chosenCount = emails.reduce((pre, email) => pre + (email.chosen ? 1 : 0), 0);\r\n\t\t//total amount\r\n\t\tconst total = emails.length;\r\n\t\treturn (\r\n\t\t\t<div className=\"email-main\">\r\n\t\t\t\t<div className=\"addemailbutton\">\r\n\t\t\t\t\t<button onClick={() => this.handleCreate()} className=\"addemail-btn\" >{EmailList.T_ADD_BUTTON_DE}</button>\r\n\t\t\t\t\t{this.state.addButtonClick ?\r\n\t\t\t\t\t\t<div className=\"inputbox\">\r\n\t\t\t\t\t\t\t<input value={this.state.inputemail.address} onKeyUp={this.handleKeyUp} onChange={this.inputchange} type=\"text\" placeholder={EmailList.T_ADD_PLACEHOLDER_DE} className=\"emailinput\" />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t: null}\r\n\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{emails.map(emailObj => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<li style={{ backgroundColor: mouse ? '#ddd' : '#fff' }} onMouseEnter={this.handleMouse(true)} onMouseLeave={this.handleMouse(false)}>\r\n\t\t\t\t\t\t\t<label>\r\n\t\t\t\t\t\t\t\t<input className='emailitemcheck' type=\"checkbox\" checked={emailObj.chosen} onChange={(e: React.ChangeEvent<HTMLInputElement>): void => this.handleCheck(emailObj.id, e.target.checked)} />\r\n\t\t\t\t\t\t\t\t<span>{emailObj.address}</span>\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<button onClick={() => this.handleDelete(emailObj.id)} className=\"btn-item\" style={{ display: mouse ? 'block' : 'none' }}>{EmailList.T_DELETE_BUTTON_DE}</button>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\r\n\t\t\t\t<div className=\"handleallemail\">\r\n\t\t\t\t\t<label>\r\n\t\t\t\t\t\t<input className='chooseall' type=\"checkbox\" onChange={this.chooseAllEmail} checked={chosenCount === total && total !== 0 ? true : false} />\r\n\t\t\t\t\t</label>\r\n\t\t\t\t\t<span>\r\n\t\t\t\t\t\t<span>{EmailList.T_SELECTION_COUNT_PART_DE}: {chosenCount}</span> / {EmailList.T_SELECTION_COUNT_FULL_DE}: {total}\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<button onClick={() => this.clearAllChosen()} className=\"btn-clear\">{EmailList.T_SELECT_ALL_BUTTON_DE}</button>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"deliverybutton\">\r\n\t\t\t\t\t<button onClick={() => this.delivery()} className=\"delivery-btn\" >{EmailList.T_SEND_BUTTON_DE}</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n","import { IState } from \"../State\";\r\nimport { States } from \"../State\";\r\n\r\nexport class State implements IState {\r\n  currentState: States = States.NeedMessage;\r\n  languageCode: string = \"de\";\r\n  messages: { text: string, id: number; }[] = [];\r\n\r\n  chosenEmails?: string[];\r\n}\r\n","import React from 'react';\r\nimport DownloadButton from '../../components/DeliveryComponents/DownloadButton';\r\nimport EmailList from '../../components/DeliveryComponents/EmailList';\r\nimport { Page } from \"../PageInterface\";\r\nimport { PageController } from \"../../../controller/PageController\";\r\nimport { State } from \"./State\";\r\nimport ReactDOM from 'react-dom';\r\nimport { States } from '../State';\r\nimport { NotificationContainer } from 'react-notifications';\r\nimport 'react-notifications/lib/notifications.css';\r\n\r\n//Auslieferungsseite\r\nexport class DeliveryPage implements Page {\r\n\r\n\tprivate state: State;\r\n\tprivate observers: PageController[] = [];\r\n\r\n\tprivate static readonly T_PAGE_TITLE_DE = \"Modellauslieferung\";\r\n\r\n\t/**\r\n\t* Konstruktor der Auslieferungsseite.\r\n\t*/\r\n\tconstructor() {\r\n\t\tthis.state = new State();\r\n\t\tthis.update()\r\n\t}\r\n\r\n\t/**\r\n\t* Update Methode der Auslieferungsseite. Diese Methode wird nach jeder Änderung, die kein Seitenwechsel ist, aufgerufen. \r\n\t* Die Methode enthält den Aufbau der Seite und wird von ihr gerendert.\r\n\t* Es werden durch notify() alle controller über ein Update informiert und alle Seiten Elemente werden aktualisiert und erneut gerendert. \r\n\t*/\r\n\tupdate() {\r\n\t\tthis.notify();\r\n\t\tconst VDOM = (\r\n\t\t\t<div>\r\n\t\t\t\t<h2 className='title'>{DeliveryPage.T_PAGE_TITLE_DE}</h2>\r\n\t\t\t\t<EmailList delivery={this.delivery.bind(this)} />\r\n\t\t\t\t<DownloadButton download={this.download.bind(this)} />\r\n\t\t\t\t<NotificationContainer />\r\n\t\t\t</div>\r\n\t\t);\r\n\t\tif (document.getElementById('root') !== null) {\r\n\t\t\tReactDOM.render(VDOM, document.getElementById('root'));\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t* Durch diese Methode kann sich ein Controller als Beobachter anmelden.\r\n\t* @param oberver neuer Beobachter\r\n\t*/\r\n\tattach(observer: PageController) {\r\n\t\tthis.observers.push(observer);\r\n\t}\r\n\r\n\t/**\r\n\t* Durch diese Methode kann sich ein Controller als Beobachter abmelden.\r\n\t* @param oberver Beobachter der zu entfernen ist\r\n\t*/\r\n\tdetach(observer: PageController) {\r\n\t\tconst index = this.observers.indexOf(observer, 0);\r\n\t\tif (index > -1) {\r\n\t\t\tthis.observers.splice(index, 1);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t* Durch diese Methode werden alle Beobachter über eine Änderung auf der Seite informiert.\r\n\t*/\r\n\tnotify() {\r\n\t\tfor (let index = 0; index < this.observers.length; index++) {\r\n\t\t\tconst element = this.observers[index];\r\n\t\t\telement.update();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t* Gibt den Status der Seite zurück\r\n\t*/\r\n\tgetState() {\r\n\t\treturn this.state;\r\n\t}\r\n\r\n\t/**\r\n\t * Setzt einen neuen Zustand für die Seite und aktualisiert sie\r\n\t * @param state neuer Zustand für die Seite\r\n\t */\r\n\tsetState(state: any) {\r\n\t\tthis.state = state;\r\n\t\tthis.update();\r\n\t}\r\n\r\n\t/**\r\n\t * Liefern zu Emails aus\r\n\t * @param chosenEmails gewählte Emails\r\n\t */\r\n\tprivate delivery(chosenEmails: string[]) {\r\n\r\n\t\t// eslint-disable-next-line\r\n\t\tthis.state.currentState = States.DeliverWeb;\r\n\t\t// eslint-disable-next-line\r\n\t\tthis.state.chosenEmails = chosenEmails;\r\n\t\tthis.notify();\r\n\t}\r\n\r\n\t/**\r\n\t * Herunterladen App\r\n\t */\r\n\tprivate download() {\r\n\r\n\t\t// eslint-disable-next-line\r\n\t\tthis.state.currentState = States.NeedDownload;\r\n\t\tthis.notify();\r\n\t}\r\n\r\n\r\n}\r\n","import { PageController } from \"./PageController\";\r\nimport { MainController } from \"./MainController\";\r\nimport { Page } from \"../view/pages/PageInterface\";\r\nimport { IState, States } from \"../view/pages/State\";\r\nimport { DeliveryPage } from \"../view/pages/DeliveryPage/index\";\r\n//import { DeliveryFormat } from \"../model/DeliveryFormat\"\r\n\r\n/**\r\n* Controller der die Auslieferungsseite verwaltet\r\n*/\r\nexport class DeliveryController implements PageController {\r\n    /**\r\n    * Seite welche gerade von dem Controller verwaltet wird\r\n    */\r\n    private page: Page;\r\n    /**\r\n    * Status der Seite\r\n    */\r\n    private state: IState;\r\n\r\n    /**\r\n    * Konstruktor des Seitenverwalters. Registriert sich als Beobachter auf seiner Seite und setzt den start Status.\r\n    * @param currentProject Die momentanen Projectdaten für welches man ein Model ausliefern möchte. \r\n    */\r\n    constructor(chosenAiModel: number) {\r\n        this.page = new DeliveryPage();\r\n        this.page.attach(this);\r\n        this.state = this.page.getState();\r\n        this.state.chosenAIModel = chosenAiModel\r\n        this.page.setState(this.state)\r\n        this.update()\r\n    }\r\n\r\n    /**\r\n    * Die Update Methode des Seitenverwalters.\r\n    */\r\n    update() {\r\n        this.state = this.page.getState();\r\n        switch (this.state.currentState) {\r\n            case States.DeliverWeb:\r\n                this.deliverAsWebApp();\r\n                break;\r\n            case States.NeedMessage:\r\n                this.state.messages = MainController.getInstance().getMessage(this.state.messages)!;\r\n                this.state.currentState = States.waitForDB;\r\n                this.page.setState(this.state);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    //TODO Die Auslieferung des Modells ist noch nicht fertig\r\n\r\n    /**\r\n    * Holt sich aus dem Status alle angegebene Email-Adressen und gibt diese mit Daten zum Projekt an die Fassade welche eine Email an alle Adressen sendet.\r\n    * Der Inhalt der Email gibt zugriff auf das Modell zur klassifizierung.\r\n    */\r\n    private deliverAsWebApp() {\r\n        MainController.getInstance().getFacade().sendAIModel(this.state.chosenAIModel!, this.state.chosenEmails!)\r\n    }\r\n\r\n    private deliverAsExe() {\r\n        //todo\r\n    }\r\n}","import { IState } from \"../State\";\r\nimport { States } from \"../State\";\r\n\r\nexport class State implements IState {\r\n  currentState: States = States.NeedMessage;\r\n  languageCode: string = \"de\";\r\n  messages: { text: string, id: number; }[] = [];\r\n\r\n  dataSetMetas?: { dataSetID: number; dataSetName: string; }[] = [];\r\n  currentDataSets?: { dataSetID: number; rows: { sensorType: number; datapoint: { value: number[]; relativeTime: number; }[]; }[]; }[] = [];\r\n  //testDataSet?: { dataSetID: number; rows: { sensorType: number; datapoint: { value: number[]; relativeTime: number; }[]; }[]; }[] = [];\r\n}\r\n","import React, { Component } from 'react'\r\nimport \"./FinishButton.css\"\r\n\r\n/**\r\n * Wechsel zu Modellerstellungsseite\r\n */\r\nexport default class FinishButton extends Component {\r\n\r\n    /**\r\n     * Variablen und Methoden welche der Klasse zur verfügung gestellt werden müssen\r\n     */\r\n    props = {\r\n        pageChangeToCreation: function () { }\r\n    }\r\n\r\n    /**\r\n     * Render Methode des Komponenten\r\n     * @returns Aufbau des Komponenten\r\n     */\r\n    render() {\r\n        return (\r\n            <div>\r\n                <button onClick={() => this.props.pageChangeToCreation()} className=\"finish-btn\" >Zur Modellerstellungsseite</button>\r\n            </div>\r\n            \r\n        )\r\n    }\r\n}\r\n","import Chart from 'chart.js';\r\nimport React, { Component, CSSProperties } from 'react';\r\nimport \"./DiagramList.css\";\r\n\r\n\r\nexport default class DiagramList extends Component {\r\n    private static readonly T_ACCELEROMETER_DE: string = \"Beschleunigungssensor\";\r\n    private static readonly T_GYROSCOPE_DE: string = \"Gyroskop\";\r\n    private static readonly T_MAGNETOMETER_DE: string = \"Magnetometer\";\r\n    private diagrammData: {\r\n\r\n        datavalue: number,\r\n    }[] = [{\r\n        datavalue: 0,\r\n    }]\r\n\r\n    /**\r\n     * Variablen und Methoden welche der Klasse zur verfügung gestellt werden müssen\r\n     */\r\n    props = {\r\n        currentDataSets: [] as { dataSetID: number, rows: { sensorType: number, datapoint: { value: number[], relativeTime: number; }[]; }[]; }[],\r\n        dataSetMetas: [] as { dataSetID: number, dataSetName: string; }[]\r\n        //testDataSet: [] as { dataSetID: number, rows: { sensorType: number, datapoint: { value: number[], relativeTime: number }[] }[] }[],\r\n    };\r\n\r\n    /**\r\n     * Status für diese Komponente\r\n     */\r\n    state = {\r\n        showDiagramIndex: 0,\r\n        diagramList: [] as any[],\r\n        diagrammData: {\r\n            lineLabels: [] as any[],\r\n            sensorRow: [] as any[],\r\n            datavalue: [] as any[],\r\n            time: [] as any[],\r\n\r\n        },\r\n        color: ['rgba(46,190,87,1)', 'rgba(68,24,232,1)', 'rgba(238,173,14,1)', 'rgba(178,34,34,1)', 'rgba(238, 130, 238,1)', 'rgba(0, 0, 0,1)',\r\n            'rgba(106, 90, 205,1)', 'rgba(238, 118, 0,1)', 'rgba(105, 105, 105,1)'],\r\n        csscolor: ['rgba(46,190,87,1)', 'rgba(68,24,232,1)', 'rgba(238,173,14,1)', 'rgba(178,34,34,1)', 'rgba(238, 130, 238,1)', 'rgba(0, 0, 0,1)',\r\n            'rgba(106, 90, 205,1)', 'rgba(238, 118, 0,1)', 'rgba(105, 105, 105,1)']\r\n        //csscolor: ['2EBE57', 'CC00FF', 'EEAD0E', 'B22222', 'EE82EE', '000000',\r\n        //     '6A5ACD', 'EE7600', '696969']\r\n    };\r\n\r\n    /**\r\n     * Nach Klicken auf Diagram das Zeigendiagram wechseln\r\n     * @param diagram gewählte Diagram\r\n     * @param index Diagramindex\r\n     */\r\n    handleClick = (diagram: any, index: any) => {\r\n        this.setState({ showDiagramIndex: index });\r\n        // The following two console-log calls are just for parameter usage and have no actual meaning.\r\n\r\n    };\r\n\r\n    /**\r\n     * Diagram erstellen\r\n     * @param dataSet Datensätze für Diagram\r\n     */\r\n    updateDiagramm(dataSet: { dataSetID: number; rows: any[]; }, index: number) {\r\n        let diagrammData = this.state.diagrammData;\r\n        diagrammData.sensorRow = [];\r\n        diagrammData.datavalue = [];\r\n        diagrammData.time = [];\r\n        this.state.diagrammData = diagrammData;\r\n        var datavalues = [];\r\n        for (var i = 0; i < dataSet.rows.length; i++) {\r\n            this.state.diagrammData.sensorRow.push(dataSet.rows[i].sensorType);\r\n            for (var dataCoordinate = 0; dataCoordinate < 3; dataCoordinate++) {\r\n                for (var j = 0; j < dataSet.rows[i].datapoint.length; j++) {\r\n                    datavalues.push(dataSet.rows[i].datapoint[j].value[dataCoordinate]);\r\n                }\r\n                this.state.diagrammData.datavalue.push(datavalues);\r\n                datavalues = [];\r\n            }\r\n        }\r\n        // eslint-disable-next-line\r\n        for (var j = 0; j < dataSet.rows[0].datapoint.length; j++) {\r\n            this.state.diagrammData.time.push(dataSet.rows[0].datapoint[j].relativeTime);\r\n        }\r\n\r\n        var newDatasets = [];\r\n        var lineLabels = [];\r\n        // eslint-disable-next-line\r\n        for (var i = 0; i < this.state.diagrammData.sensorRow.length * 3; i++) {\r\n            var coordinate = \".X\";\r\n            var sensor = this.state.diagrammData.sensorRow[(i / 3) | 0];\r\n            var sensorName = '';\r\n            switch (sensor) {\r\n                case 2:\r\n                    sensorName = DiagramList.T_ACCELEROMETER_DE;\r\n                    break;\r\n                case 3:\r\n                    sensorName = DiagramList.T_GYROSCOPE_DE;\r\n                    break;\r\n                case 4:\r\n                    sensorName = DiagramList.T_MAGNETOMETER_DE;\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n            // eslint-disable-next-line\r\n            if (i % 3 == 1) {\r\n                coordinate = \".Y\";\r\n            }\r\n            // eslint-disable-next-line\r\n            if (i % 3 == 2) {\r\n                coordinate = \".Z\";\r\n            }\r\n\r\n            let color: CSSProperties = { \"color\": this.state.csscolor[i] };\r\n            lineLabels.push(<span style={color}>■{sensorName + coordinate}<br /></span>);\r\n            //this.setState({ lineLabels: lineLabels })\r\n            newDatasets.push(\r\n                {\r\n                    label: sensor + coordinate,\r\n                    strokeColor: this.state.color[i],\r\n                    borderWidth: 1,\r\n                    data: this.state.diagrammData.datavalue[i],\r\n                }\r\n            );\r\n        }\r\n        const data = {\r\n            labels: this.state.diagrammData.time,\r\n            datasets: newDatasets\r\n        };\r\n        const options = {\r\n            datasetFill: false,\r\n            pointDotRadius: 2,\r\n            pointHitDetectionRadius: 1,\r\n            offsetGridLines: false,\r\n            pointDot: false,\r\n        };\r\n        const newList = this.state.diagramList;\r\n        const id = dataSet.dataSetID;\r\n        if(newList[index] !== undefined) {\r\n        newList[index] = { dataSetID: id, lineLabels: lineLabels, data: data, options: options };\r\n        } else {\r\n            newList.push({ dataSetID: id, lineLabels: lineLabels, data: data, options: options })\r\n        }\r\n        this.state.diagramList = newList;\r\n        this.diagrammData[index].datavalue = this.props.currentDataSets[index].rows[0].datapoint.length\r\n    }\r\n\r\n    /**\r\n     * Render Methode des Komponenten\r\n     * @returns Aufbau des Komponenten\r\n     */\r\n    render() {\r\n\r\n        var LineChart = require(\"react-chartjs\").Line;\r\n\r\n        //jede Diagram nur einmal zeigen,und nur erneut mit neue Data\r\n        // eslint-disable-next-line\r\n        this.props.currentDataSets?.map((dataSet, index) => {\r\n            var flag = false;\r\n            // eslint-disable-next-line\r\n            this.state.diagramList.map((diagram, index2) => {\r\n                console.log(this.props.currentDataSets[index2].rows.length)\r\n                if (diagram.dataSetID === dataSet.dataSetID) {\r\n                    if (this.diagrammData[index2] !== undefined && this.diagrammData[index2].datavalue != this.props.currentDataSets[index2].rows[0].datapoint.length) {\r\n                        this.updateDiagramm(dataSet, index2);\r\n                        this.diagrammData[index2].datavalue = this.props.currentDataSets[index].rows[0].datapoint.length\r\n                    }\r\n                        flag = true;\r\n                        return diagram;\r\n                }\r\n            });\r\n            if (flag) { return dataSet; }\r\n            else { \r\n                this.diagrammData.push({datavalue: 0})\r\n                this.updateDiagramm(dataSet, index); \r\n            }\r\n        });\r\n        return (\r\n            <div>\r\n                    {this.state.diagramList.map((diagram, index) => {\r\n                        let datasetname = \"Null\";\r\n                        this.props.dataSetMetas.forEach(dataset => {\r\n                            if (dataset.dataSetID === diagram.dataSetID) {\r\n                                datasetname = dataset.dataSetName;\r\n                            }\r\n                        });\r\n                        return (\r\n                            <div key={index}>\r\n                                <div className=\"diagramTop\">\r\n                                    <h5 className=\"datasetName\">{datasetname}</h5>\r\n                                    {diagram.lineLabels}\r\n                                </div>\r\n                                <div className=\"diagramList\">\r\n                                    <LineChart data={diagram.data} options={diagram.options} width={window.innerWidth} height={300} />\r\n                                </div>\r\n                            </div>\r\n                        );\r\n                    })}\r\n                </div>\r\n        );\r\n    }\r\n}\r\n","import { Page } from \"../PageInterface\";\r\nimport { PageController } from \"../../../controller/PageController\";\r\nimport { State } from \"./State\";\r\nimport ReactDOM from 'react-dom';\r\nimport { IState, States } from '../State';\r\nimport FinishButton from '../../components/VisualizationComponents/FinishButton';\r\nimport DiagramList from '../../components/VisualizationComponents/DiagramList';\r\nimport { NotificationContainer } from 'react-notifications';\r\nimport 'react-notifications/lib/notifications.css';\r\n\r\n//Visualisierungsseite\r\nexport class VisualizationPage implements Page {\r\n    private state: IState\r\n    private observers: PageController[] = [];\r\n\r\n    private static readonly PAGE_TITLE = \"Projektvisualisierung\"\r\n\r\n    /**\r\n    * Konstruktor der Visualisierungsseite.\r\n    */\r\n    constructor() {\r\n        this.state = new State()\r\n        this.update()\r\n    }\r\n\r\n    /**\r\n    * Update Methode der Visualisierungsseite. Diese Methode wird nach jeder Änderung, die kein Seitenwechsel ist, aufgerufen. \r\n    * Die Methode enthält den Aufbau der Seite und wird von ihr gerendert.\r\n    * Es werden durch notify() alle controller über ein Update informiert und alle Seiten Elemente werden aktualisiert und erneut gerendert. \r\n    */\r\n    update(): void {\r\n        this.notify()\r\n        const VDOM = (\r\n            <div className=\"visualizationpage\">\r\n                <h2 className='title'>{VisualizationPage.PAGE_TITLE}</h2>\r\n                <br/>\r\n                <FinishButton pageChangeToCreation={this.changetoCreation.bind(this)} />\r\n                <br/>\r\n                <br/>\r\n                <DiagramList currentDataSets={this.state.currentDataSets! }\r\n                dataSetMetas = {this.state.dataSetMetas!}\r\n                //   testDataSet={this.state.testDataSet!}\r\n                />\r\n                <NotificationContainer />\r\n            </div>\r\n        );\r\n        if (document.getElementById('root') !== null) {\r\n            ReactDOM.render(VDOM, document.getElementById('root'));\r\n        }\r\n    }\r\n\r\n    /**\r\n    * Durch diese Methode kann sich ein Controller als Beobachter anmelden.\r\n    * @param oberver neuer Beobachter\r\n    */\r\n    attach(observer: PageController): void {\r\n        this.observers.push(observer);\r\n    }\r\n\r\n    /**\r\n    * Durch diese Methode kann sich ein Controller als Beobachter abmelden.\r\n    * @param oberver Beobachter der zu entfernen ist\r\n    */\r\n    detach(observer: PageController): void {\r\n        const index = this.observers.indexOf(observer, 0);\r\n        if (index > -1) {\r\n            this.observers.splice(index, 1);\r\n        }\r\n    }\r\n\r\n    /**\r\n    * Durch diese Methode werden alle Beobachter über eine Änderung auf der Seite informiert.\r\n    */\r\n    notify(): void {\r\n        for (const observer of this.observers) {\r\n            observer.update();\r\n        }\r\n    }\r\n\r\n    /**\r\n    * Gibt den Status der Seite zurück\r\n    */\r\n    getState(): IState {\r\n        return this.state;\r\n    }\r\n\r\n    /**\r\n     * Setzt einen neuen Zustand für die Seite und aktualisiert sie\r\n     * @param state neuer Zustand für die Seite\r\n     */\r\n    setState(state: IState): void {\r\n        this.state = state;\r\n        this.update()\r\n    }\r\n\r\n    /**\r\n     * Wechsel der Seite zur Modellerstellungsseite.\r\n     */\r\n    private changetoCreation(): void {\r\n        this.state.currentState = States.ChangeToCreation\r\n        this.notify()\r\n    }\r\n}\r\n","import { IState } from \"../State\";\r\nimport { States } from \"../State\";\r\n\r\nexport class State implements IState {\r\n  currentState: States = States.NeedMessage;\r\n  languageCode: string = \"de\";\r\n  messages: { text: string, id: number; }[] = [];\r\n\r\n  dataSetMetas?: { dataSetID: number; dataSetName: string; }[] = [];\r\n  trainingParameter?: {\r\n    dataSets: number[],\r\n    imputator: string,\r\n    classifier: string,\r\n    scaler: string,\r\n    features: string[]\r\n    trainingDataPercentage?: number, // optional\r\n    slidingWindowSize?: number,      // optional\r\n    slidingWindowStep?: number;        // optional\r\n  } = { dataSets: [], imputator: \"\", classifier: '', scaler: '', features: [] };\r\n}\r\n\r\n","import React, { Component } from 'react';\r\nimport NewWindow from 'react-new-window';\r\nimport { NotificationManager } from 'react-notifications';\r\nimport 'react-notifications/lib/notifications.css';\r\nimport './Train.css';\r\nexport default class Train extends Component {\r\n\tprivate static readonly T_IMPUTER_MEAN_DE: string = \"Arithmetischer Mittelwert\";\r\n\tprivate static readonly T_SCALER_STANDARD_DE: string = \"Standard Scaler\";\r\n\tprivate static readonly T_SCALER_ROBUST_DE: string = \"Robust Scaler\";\r\n\tprivate static readonly T_SCALER_MIN_MAX_DE: string = \"Min-Max Scaler\";\r\n\tprivate static readonly T_SCALER_NORMALIZER_DE: string = \"Normalizer\";\r\n\tprivate static readonly T_FEATURE_MIN_DE: string = \"Minimum\";\r\n\tprivate static readonly T_FEATURE_MAX_DE: string = \"Maximum\";\r\n\tprivate static readonly T_FEATURE_VARIANCE_DE: string = \"Varianz\";\r\n\tprivate static readonly T_FEATURE_ENERGY_DE: string = \"Energie\";\r\n\tprivate static readonly T_FEATURE_FOURIER_TRANSFORM_DE: string = \"Fourier-Transformation\";\r\n\tprivate static readonly T_FEATURE_MEAN_DE: string = \"Mittelwert\";\r\n\tprivate static readonly T_FEATURE_AUTOREGRESSIVE_DE: string = \"Autoregression\";\r\n\tprivate static readonly T_FEATURE_SKEWNESS_DE: string = \"Abweichung\";\r\n\tprivate static readonly T_FEATURE_KURTOSIS_DE: string = \"Wölbung\";\r\n\tprivate static readonly T_FEATURE_IQR_DE: string = \"Quantil-Regression\";\r\n\tprivate static readonly T_CLASSIFIER_MLP_DE: string = \"Multi-Level-Perceptron (Neurales Netz)\";\r\n\tprivate static readonly T_CLASSIFIER_RANDOM_FOREST_DE: string = \"Random-Forest-Klassifizierer\";\r\n\tprivate static readonly T_CLASSIFIER_K_NEIGHBORS_DE: string = \"K-nächster-Nachbar-Methode\";\r\n\tprivate static readonly T_CLASSIFIER_SVM_DE: string = \"Stützvektor-Maschine\";\r\n\tprivate static readonly Q_DATASET_DELETE_DE: string = 'Sind Sie sich sicher, den gewählten Datensatz löschen zu wollen?';\r\n\tprivate static readonly E_DATASET_EMPTY_SELECTION_DE: string = \"Kein Datensatz ausgewählt!\";\r\n\tprivate static readonly E_IMPUTER_MULTI_SELECTION_DE: string = \"Es darf nur ein Imputer ausgewählt werden.\";\r\n\tprivate static readonly E_SCALER_MULTI_SELECTION_DE: string = \"Es darf nur ein Scaler ausgewählt werden.\";\r\n\tprivate static readonly E_CLASSIFIER_MULTI_SELECTION_DE: string = \"Es darf nur ein Klassifizierer ausgewählt werden.\";\r\n\tprivate static readonly E_DATASET_NO_SELECTION_DE: string = \"Kein Datensatz ausgewählt!\";\r\n\tprivate static readonly E_IMPUTER_NO_SELECTION_DE: string = \"Kein Imputer ausgewählt!\";\r\n\tprivate static readonly E_SCALER_NO_SELECTION_DE: string = \"Kein Scaler ausgewählt!\";\r\n\tprivate static readonly E_FEATURE_NO_SELECTION_DE: string = \"Keine Merkmale zur Extraktion ausgewählt!\";\r\n\tprivate static readonly E_CLASSIFIER_NO_SELECTION_DE: string = \"Kein Klassifizierer ausgewählt!\";\r\n\tprivate static readonly T_DATASET_TITLE_DE: string = \"Verwendete Datensätze\";\r\n\tprivate static readonly T_DATASET_DELETE_DE: string = \"Löschen\";\r\n\tprivate static readonly T_DATASET_LIST_TITLE_DE: string = \"Datensatzliste\";\r\n\tprivate static readonly T_DATASET_LIST_DROPDOWN_DE: string = \"Datensatz auswählen\";\r\n\tprivate static readonly T_DATASET_LIST_ADD_DE: string = \"Hinzufügen\";\r\n\tprivate static readonly T_DATASET_ADD_DE: string = \"Datensatz hinzufügen\";\r\n\tprivate static readonly T_IMPUTER_TITLE_DE: string = \"Imputation\";\r\n\tprivate static readonly T_SCALER_TITLE_DE: string = \"Normalisierung (Scaling)\";\r\n\tprivate static readonly T_FEATURE_TITLE_DE: string = \"Merkmalsextraktion\";\r\n\tprivate static readonly T_CLASSIFIER_TITLE_DE: string = \"Klassifizierer\";\r\n\tprivate static readonly T_BUTTON_START_DE: string = \"KI-Modell trainieren\";\r\n\tprivate static readonly T_BUTTON_HOME_DE: string = \"Zurück zur Verweisseite\";\r\n\r\n\t/**\r\n\t * Variablen und Methoden welche der Klasse zur verfügung gestellt werden müssen\r\n\t */\r\n\tprops = {\r\n\t\tdataSetMetas: [] as { dataSetID: number, dataSetName: string; }[],\r\n\t\ttrain: function (dataSets: number[], imputator: string, classifier: string, scaler: string, features: string[]) { },\r\n\t\tchangeToReferring: function () { }\r\n\t};\r\n\r\n\t/**\r\n\t * Status für diese Komponente\r\n\t */\r\n\tstate = {\r\n\t\tmouse: false,\r\n\t\topenNewWindow: false,\r\n\t\tvalue: '' as string,\r\n\t\tdatabaseList: [] as { dataSetID: number, dataSetName: string, chosen: boolean; }[],\r\n\t\tdatasets: [] as { dataSetID: number, dataSetName: string, chosen: boolean; }[],\r\n\t\timputators: [\r\n\t\t\t{ name: Train.T_IMPUTER_MEAN_DE,  checked: true,  tag: 'MEAN'    },\r\n\t\t\t/*\t\t\tNOT IMPLEMENTED\r\n\t\t\t{ name: \"Letze Werte fortführen\", checked: false, tag: 'FORWARD' },\r\n\t\t\t{ name: \"Bewegter Durchschnitt\",  checked: false, tag: 'MOVING'  },\r\n\t\t\t{ name: \"Lineare Interpolation\",  checked: false, tag: 'LINEAR'  },\r\n\t\t\t{ name: \"Spline Interpolation\",   checked: false, tag: 'SPLINE'  }*/\r\n\t\t],\r\n\t\tscalers: [\r\n\t\t\t{ name: Train.T_SCALER_STANDARD_DE,   checked: false, tag: 'STANDARD'   },\r\n\t\t\t{ name: Train.T_SCALER_ROBUST_DE,     checked: false, tag: 'ROBUST'     },\r\n\t\t\t{ name: Train.T_SCALER_MIN_MAX_DE,    checked: false, tag: 'MIN_MAX'    },\r\n\t\t\t{ name: Train.T_SCALER_NORMALIZER_DE, checked: false, tag: 'NORMALIZER' },\r\n\t\t/*\t{ name: \"Anteilstransformator\",       checked: false, tag: 'SHARE'      }\tNOT IMPLEMENTED */\r\n\t\t],\r\n\t\tmyfeatures: [\r\n\t\t\t{ name: Train.T_FEATURE_MIN_DE,               checked: false, tag: 'MIN'               },\r\n\t\t\t{ name: Train.T_FEATURE_MAX_DE,               checked: false, tag: 'MAX'               },\r\n\t\t\t{ name: Train.T_FEATURE_VARIANCE_DE,          checked: false, tag: 'VARIANCE'          },\r\n\t\t\t{ name: Train.T_FEATURE_ENERGY_DE,            checked: false, tag: 'ENERGY'            },\r\n\t\t\t{ name: Train.T_FEATURE_FOURIER_TRANSFORM_DE, checked: false, tag: 'FOURIER_TRANSFORM' },\r\n\t\t\t{ name: Train.T_FEATURE_MEAN_DE,              checked: false, tag: 'MEAN'              },\r\n\t\t\t{ name: Train.T_FEATURE_AUTOREGRESSIVE_DE,    checked: false, tag: 'AUTOREGRESSIVE'    },\r\n\t\t\t{ name: Train.T_FEATURE_SKEWNESS_DE,          checked: false, tag: 'SKEWNESS'          },\r\n\t\t\t{ name: Train.T_FEATURE_KURTOSIS_DE,          checked: false, tag: \"KURTOSIS\"          },\r\n\t\t\t{ name: Train.T_FEATURE_IQR_DE,               checked: false, tag: \"IQR\"               }\r\n\t\t],\r\n\t\tclassifiers: [\r\n\t\t\t{ name: Train.T_CLASSIFIER_MLP_DE,           checked: false, tag: 'MLP'           },\r\n\t\t\t{ name: Train.T_CLASSIFIER_RANDOM_FOREST_DE, checked: false, tag: 'RANDOM_FOREST' },\r\n\t\t\t{ name: Train.T_CLASSIFIER_K_NEIGHBORS_DE,   checked: false, tag: 'K_NEIGHOBORS'  },\r\n\t\t\t{ name: Train.T_CLASSIFIER_SVM_DE,           checked: false, tag: 'SVM'           }\r\n\t\t],\r\n\t\tchosenScaler: 0,\r\n\t\tchosenclassifier: 0,\r\n\t\tchosenImputator: 0\r\n\t};\r\n\r\n\t/**\r\n\t * Befüllt die beiden state-Variablen, die so aussehen, als müssten da die Datensätze des aktuellen Projekts rein, \r\n\t * mit den Daten aus der props-Variable dataSetMetas.\r\n\t */\r\n\tcomponentWillReceiveProps(): void {\r\n\t\tthis.setState({ databaseList: [] })\r\n\t\tfor (const x of this.props.dataSetMetas) {\r\n\t\t\tthis.state.databaseList.push({ dataSetName: x.dataSetName, dataSetID: x.dataSetID, chosen: false });\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Wechseln Mausstatus\r\n\t * @param flag Maus darauf\r\n\t * @returns \r\n\t */\r\n\thandleMouse = (flag: boolean) => {\r\n\t\treturn () => {\r\n\t\t\tthis.setState({ mouse: flag });\r\n\t\t};\r\n\t};\r\n\r\n\t/**\r\n\t * Klicken für checkbox von Datensätze\r\n\t * @param id Gewählte ID\r\n\t * @param chosen checked oder nicht\r\n\t */\r\n\thandleCheck = (id: number, chosen: boolean) => {\r\n\t\tconst { datasets } = this.state;\r\n\t\tconst newDatasets = datasets.map((dataset) => {\r\n\t\t\t// eslint-disable-next-line\r\n\t\t\tif (dataset.dataSetID === id) return { ...dataset, chosen };\r\n\t\t\telse return dataset;\r\n\t\t});\r\n\t\tthis.setState({ datasets: newDatasets });\r\n\t};\r\n\r\n\t/**\r\n\t * Löschen Methode\r\n\t * @param id löscht DatasetID\r\n\t */\r\n\thandleDelete = (id: number) => {\r\n\t\tif (window.confirm(Train.Q_DATASET_DELETE_DE)) {\r\n\t\t\tconst { datasets } = this.state;\r\n\t\t\tconst newDatasets = datasets.filter((dataset) => {\r\n\t\t\t\treturn dataset.dataSetID !== id;\r\n\t\t\t});\r\n\t\t\t//update emailList\r\n\t\t\tthis.setState({ datasets: newDatasets });\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Erstellung neue Fenster für Datensätze wählen\r\n\t */\r\n\thandleCreate = () => {\r\n\t\tthis.setState({ openNewWindow: !this.state.openNewWindow });\r\n\t};\r\n\r\n\t/**\r\n\t * Selektieren von DatabaseList\r\n\t * @param e ChangeEventSelect\r\n\t */\r\n\thandleChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n\t\tthis.setState({\r\n\t\t\tvalue: e.target.value\r\n\t\t});\r\n\t};\r\n\r\n\t/**\r\n\t * Diese Methode verarbeitet die Events, die ausgelöst werden, wenn im Datensatz-Auswahlfenster ein Datensatz\r\n\t * ausgewählt wird und diese Auswahl durch Drücken des zugehörigen Knopfes bestätigt wird.\r\n\t */\r\n\thandleChoose = (): void => {\r\n\t\tif (this.state.value === '') {\r\n\t\t\tNotificationManager.error(Train.E_DATASET_EMPTY_SELECTION_DE, \"\", 3000);\r\n\t\t\tthis.setState({ \"openNewWindow\": false });\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet dataSets = this.state.datasets;\r\n\t\tthis.props.dataSetMetas.map((entry): boolean => {\r\n\t\t\tif (entry.dataSetName == this.state.value) {\r\n\t\t\t\tdataSets.push({ dataSetID: entry.dataSetID, dataSetName: entry.dataSetName, chosen: true });\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t});\r\n\t\tthis.setState({ \"datasets\": dataSets, \"openNewWindow\": false, \"value\": undefined });\r\n\t};\r\n\r\n\t/**\r\n\t * Erzeugt die Dropdown-Liste im Datensatz-Auswahlfenster.\r\n\t * Bereits ausgewählte Datensätze werden zwar angezeigt, sind aber ausgegraut.\r\n\t * \r\n\t * @returns Ein Array aus JSX-DOM-Elementen\r\n\t */\r\n\toptions = (): JSX.Element[] => {\r\n\t\treturn this.props.dataSetMetas.map(dataset => {\r\n\t\t\tif (this.state.datasets.map(entry => entry.dataSetID).includes(dataset.dataSetID)) {\r\n\t\t\t\treturn <option key={dataset.dataSetID} value={dataset.dataSetName} disabled={true}>{dataset.dataSetName}</option>;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn <option key={dataset.dataSetID} value={dataset.dataSetName}>{dataset.dataSetName}</option>;\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\t/**\r\n\t * Check Imputation\r\n\t * @param index Imputationindex\r\n\t * @returns \r\n\t */\r\n\thandleImputation = (index: number) => {\r\n\t\tvar newList = [...this.state.imputators];\r\n\t\tvar newChosen = this.state.chosenImputator;\r\n\t\tif (newList[index].checked) { newChosen--; }\r\n\t\telse { newChosen++; }\r\n\t\tif (newChosen <= 1) {\r\n\t\t\tnewList[index].checked = !newList[index].checked;\r\n\t\t\tthis.setState({ chosenImputator: newChosen, imputators: newList });\r\n\t\t} else {\r\n\t\t\tNotificationManager.error(Train.E_IMPUTER_MULTI_SELECTION_DE, \"\", 3000);\r\n\t\t\treturn;\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Check Scaler\r\n\t * @param index Scalerindex \r\n\t * @returns \r\n\t */\r\n\thandleScaler = (index: number) => {\r\n\t\tvar newList = [...this.state.scalers];\r\n\t\tvar newChosen = this.state.chosenScaler;\r\n\t\tif (newList[index].checked) { newChosen--; }\r\n\t\telse { newChosen++; }\r\n\t\tif (newChosen <= 1) {\r\n\t\t\tnewList[index].checked = !newList[index].checked;\r\n\t\t\tthis.setState({ chosenScaler: newChosen });\r\n\t\t\tthis.setState({ scalers: newList });\r\n\t\t} else {\r\n\t\t\tNotificationManager.error(Train.E_SCALER_MULTI_SELECTION_DE, \"\", 3000);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Check Extraction\r\n\t * @param index Extractionindex\r\n\t */\r\n\thandleExtraction = (index: number) => {\r\n\t\tvar newList = [...this.state.myfeatures];\r\n\t\tnewList[index].checked = !newList[index].checked;\r\n\t\tthis.setState({ features: newList });\r\n\t};\r\n\r\n\t/**\r\n\t * Check Classifier\r\n\t * @param index Classifierindex\r\n\t * @returns \r\n\t */\r\n\thandleClassifier = (index: number) => {\r\n\t\tvar newList = [...this.state.classifiers];\r\n\t\tvar newChosen = this.state.chosenclassifier;\r\n\t\tif (newList[index].checked) { newChosen--; }\r\n\t\telse { newChosen++; }\r\n\t\tif (newChosen <= 1) {\r\n\t\t\tnewList[index].checked = !newList[index].checked;\r\n\t\t\tthis.setState({ chosenclassifier: newChosen });\r\n\t\t\tthis.setState({ classifiers: newList });\r\n\t\t} else {\r\n\t\t\tNotificationManager.error(Train.E_CLASSIFIER_MULTI_SELECTION_DE, \"\", 3000);\r\n\t\t\treturn;\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Trainieren Methode\r\n\t * @returns \r\n\t */\r\n\thandleTrain = () => {\r\n\t\tvar dataSets: number[] = [], imputator = \"\", classifier = '', scaler = '', features: string[] = [];\r\n\t\tconst { datasets, imputators, classifiers, scalers, myfeatures } = this.state;\r\n\t\tlet datasetsflag = true, imputatorsflag = true, classifiersflag = true, scalersflag = true, featuresflag = true, nochoice = false;\r\n\t\tdatasets.map((datasetObj) => {\r\n\t\t\tif (datasetObj.chosen) {\r\n\t\t\t\tdatasetsflag = false;\r\n\t\t\t\tdataSets.push(datasetObj.dataSetID);\r\n\t\t\t}\r\n\t\t\treturn datasetObj;\r\n\t\t});\r\n\t\timputators.map((imputatorObj) => {\r\n\t\t\tif (imputatorObj.checked) {\r\n\t\t\t\timputatorsflag = false;\r\n\t\t\t\timputator = imputatorObj.tag;\r\n\t\t\t}\r\n\t\t\treturn imputatorObj;\r\n\t\t});\r\n\t\tclassifiers.map((classifierObj) => {\r\n\t\t\tif (classifierObj.checked) {\r\n\t\t\t\tclassifiersflag = false;\r\n\t\t\t\tclassifier = classifierObj.tag;\r\n\t\t\t}\r\n\t\t\treturn classifierObj;\r\n\t\t});\r\n\t\tscalers.map((scalerObj) => {\r\n\t\t\tif (scalerObj.checked) {\r\n\t\t\t\tscalersflag = false;\r\n\t\t\t\tscaler = scalerObj.tag;\r\n\t\t\t}\r\n\t\t\treturn scalerObj;\r\n\t\t});\r\n\t\tmyfeatures.map((featureObj) => {\r\n\t\t\tif (featureObj.checked) {\r\n\t\t\t\tfeaturesflag = false;\r\n\t\t\t\tfeatures.push(featureObj.tag);\r\n\t\t\t}\r\n\t\t\treturn featureObj;\r\n\t\t});\r\n\t\tif (datasetsflag) {\r\n\t\t\tNotificationManager.error(Train.E_DATASET_NO_SELECTION_DE, \"\", 3000);\r\n\t\t\tnochoice = true;\r\n\t\t}\r\n\t\tif (imputatorsflag) {\r\n\t\t\tNotificationManager.error(Train.E_IMPUTER_NO_SELECTION_DE, \"\", 3000);\r\n\t\t\tnochoice = true;\r\n\t\t}\r\n\t\tif (classifiersflag) {\r\n\t\t\tNotificationManager.error(Train.E_CLASSIFIER_NO_SELECTION_DE, \"\", 3000);\r\n\t\t\tnochoice = true;\r\n\t\t}\r\n\t\tif (scalersflag) {\r\n\t\t\tNotificationManager.error(Train.E_SCALER_NO_SELECTION_DE, \"\", 3000);\r\n\t\t\tnochoice = true;\r\n\t\t}\r\n\t\tif (featuresflag) {\r\n\t\t\tNotificationManager.error(Train.E_FEATURE_NO_SELECTION_DE, \"\", 3000);\r\n\t\t\tnochoice = true;\r\n\t\t}\r\n\t\tif (nochoice) return;\r\n\t\t//console.log(chosendataSets, chosenImputator, chosenclassifier, chosenscaler, chosenFeatures)\r\n\t\tthis.props.train(dataSets, imputator, classifier, scaler, features);\r\n\t};\r\n\r\n\t/**\r\n\t * Wechseln zu Darstellungsseite\r\n\t */\r\n\thandleChangePage() {\r\n\t\tthis.props.changeToReferring();\r\n\t}\r\n\r\n\t/**\r\n\t * Render Methode des Komponenten\r\n\t * @returns Aufbau des Komponenten\r\n\t */\r\n\trender() {\r\n\t\tconst { mouse, datasets, imputators, scalers, myfeatures, classifiers } = this.state;\r\n\t\treturn (\r\n\t\t\t<div className=\"train\">\r\n\t\t\t\t<h3  className=\"text\">{Train.T_DATASET_TITLE_DE}</h3>\r\n\t\t\t\t{datasets.map(dataset => {\r\n\t\t\t\t\treturn (\r\n\r\n\t\t\t\t\t\t<li style={{ backgroundColor: mouse ? '#ddd' : '#fff' }} onMouseEnter={this.handleMouse(true)} onMouseLeave={this.handleMouse(false)} className='list' >\r\n\t\t\t\t\t\t\t<label>\r\n\t\t\t\t\t\t\t\t<input type=\"checkbox\" checked={dataset.chosen} onChange={(e: React.ChangeEvent<HTMLInputElement>): void => this.handleCheck(dataset.dataSetID, e.target.checked)} />\r\n\t\t\t\t\t\t\t\t<span>{dataset.dataSetName}</span>\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\t<button onClick={() => this.handleDelete(dataset.dataSetID)} type='button' className=\"btn-item\" style={{ display: mouse ? 'block' : 'none' }}>{Train.T_DATASET_DELETE_DE}</button>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\r\n\t\t\t\t<div className=\"adddatasetbutton\">\r\n\t\t\t\t\t{this.state.openNewWindow && (\r\n\t\t\t\t\t\t<NewWindow>\r\n\t\t\t\t\t\t\t<div className=\"login-window\">\r\n\t\t\t\t\t\t\t\t<h1  className=\"text\">{Train.T_DATASET_LIST_TITLE_DE}</h1>\r\n\t\t\t\t\t\t\t\t<select onChange={this.handleChange} className=\"text2\" >\r\n\t\t\t\t\t\t\t\t\t<option value=\"\"  className=\"text2\">{Train.T_DATASET_LIST_DROPDOWN_DE}</option>\r\n\t\t\t\t\t\t\t\t\t{this.options()}\r\n\t\t\t\t\t\t\t\t</select >\r\n\t\t\t\t\t\t\t\t<button onClick={this.handleChoose} className=\"choose-btn\" type='button' >{Train.T_DATASET_LIST_ADD_DE}</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</NewWindow>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<button onClick={() => this.handleCreate()} className=\"create-btn\" type='button' >{Train.T_DATASET_ADD_DE}</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"list\">\r\n\t\t\t\t\t<div className=\"imputationlist\">\r\n\t\t\t\t\t\t<h3  className=\"text\">{Train.T_IMPUTER_TITLE_DE}</h3>\r\n\t\t\t\t\t\t{imputators.map((imputator, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div key={index}>\r\n\t\t\t\t\t\t\t\t\t<input className='imputationcheck' type=\"checkbox\" value={index} checked={imputator.checked} onChange={() => this.handleImputation(index)} /><span>{imputator.name}</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"scalerlist\">\r\n\t\t\t\t\t\t<h3   className=\"text\">{Train.T_SCALER_TITLE_DE}</h3>\r\n\t\t\t\t\t\t{scalers.map((scaler, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div key={index}>\r\n\t\t\t\t\t\t\t\t\t<input className='scalercheck' type=\"checkbox\" value={index} checked={scaler.checked} onChange={() => this.handleScaler(index)} /><span>{scaler.name}</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"list\">\r\n\t\t\t\t\t<div className=\"extractionlist\">\r\n\t\t\t\t\t\t<h3  className=\"text\">{Train.T_FEATURE_TITLE_DE}</h3>\r\n\t\t\t\t\t\t{myfeatures.map((extraction, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div key={index}>\r\n\t\t\t\t\t\t\t\t\t<input className='featurecheck' type=\"checkbox\" value={index} checked={extraction.checked} onChange={() => this.handleExtraction(index)} /><span>{extraction.name}</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"classifierlist\">\r\n\t\t\t\t\t\t<h3  className=\"text\">{Train.T_CLASSIFIER_TITLE_DE}</h3>\r\n\t\t\t\t\t\t{classifiers.map((classifier, index) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<div key={index}>\r\n\t\t\t\t\t\t\t\t\t<input className='classifiercheck' type=\"checkbox\" value={index} checked={classifier.checked} onChange={() => this.handleClassifier(index)} /><span>{classifier.name}</span>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<br></br>\r\n\r\n\t\t\t\t<div className=\"clearfloat\">\r\n\t\t\t\t\t<button onClick={() => this.handleTrain()} className=\"train-btn\" type='button' >{Train.T_BUTTON_START_DE}</button>\r\n\t\t\t\t\t<button onClick={() => this.handleChangePage()} className=\"changepage-btn\" type='button' >{Train.T_BUTTON_HOME_DE}</button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\r\n\t\t);\r\n\t}\r\n\r\n\r\n}\r\n","import React from 'react';\r\nimport { Page } from \"../PageInterface\";\r\nimport { PageController } from \"../../../controller/PageController\";\r\nimport { State } from \"./State\";\r\nimport ReactDOM from 'react-dom';\r\nimport './ModelCreationPage.css';\r\nimport { States } from '../State';\r\nimport Train from '../../components/ModelCreationComponents/Train';\r\nimport { NotificationContainer } from 'react-notifications';\r\nimport 'react-notifications/lib/notifications.css';\r\n\r\n//Modellerstellungsseite\r\nexport class ModelCreationPage implements Page {\r\n\tprivate state: State;\r\n\tprivate observers: PageController[] = [];\r\n\r\n\tprivate static readonly T_PAGE_TITLE_DE = \"Modellerstellung\"\r\n\r\n\t/**\r\n\t* Konstruktor der Modellerstellungsseite.\r\n\t*/\r\n\tconstructor() {\r\n\t\tthis.state = new State();\r\n\t\tthis.update()\r\n\t}\r\n\r\n\t/**\r\n\t* Update Methode der Modellerstellungsseite. Diese Methode wird nach jeder Änderung, die kein Seitenwechsel ist, aufgerufen. \r\n\t* Die Methode enthält den Aufbau der Seite und wird von ihr gerendert.\r\n\t* Es werden durch notify() alle controller über ein Update informiert und alle Seiten Elemente werden aktualisiert und erneut gerendert. \r\n\t*/\r\n\tupdate() {\r\n\t\tthis.notify();\r\n\t\tconst VDOM = (\r\n\t\t\t<div>\r\n\t\t\t\t<h1 className=\"title\">{ModelCreationPage.T_PAGE_TITLE_DE}</h1>\r\n\t\t\t\t<Train\r\n\t\t\t\t\tdataSetMetas={this.state.dataSetMetas!}\r\n\t\t\t\t\ttrain={this.train.bind(this)}\r\n\t\t\t\t\tchangeToReferring={this.changeToReferring.bind(this)}\r\n\t\t\t\t/>\r\n\t\t\t\t<NotificationContainer />\r\n\t\t\t</div>\r\n\t\t);\r\n\t\tif (document.getElementById('root') !== null) {\r\n\t\t\tReactDOM.render(VDOM, document.getElementById('root'));\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t* Durch diese Methode kann sich ein Controller als Beobachter anmelden.\r\n\t* @param oberver neuer Beobachter\r\n\t*/\r\n\tattach(observer: PageController) {\r\n\t\tthis.observers.push(observer);\r\n\t}\r\n\r\n\t/**\r\n\t* Durch diese Methode kann sich ein Controller als Beobachter abmelden.\r\n\t* @param oberver Beobachter der zu entfernen ist\r\n\t*/\r\n\tdetach(observer: PageController) {\r\n\t\tconst index = this.observers.indexOf(observer, 0);\r\n\t\tif (index > -1) {\r\n\t\t\tthis.observers.splice(index, 1);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t* Durch diese Methode werden alle Beobachter über eine Änderung auf der Seite informiert.\r\n\t*/\r\n\tnotify() {\r\n\t\tfor (let index = 0; index < this.observers.length; index++) {\r\n\t\t\tconst element = this.observers[index];\r\n\t\t\telement.update();\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t* Gibt den Status der Seite zurück\r\n\t*/\r\n\tgetState() {\r\n\t\treturn this.state;\r\n\t}\r\n\r\n\t/**\r\n\t * Setzt einen neuen Zustand für die Seite und aktualisiert sie\r\n\t * @param state neuer Zustand für die Seite\r\n\t */\r\n\tsetState(state: any) {\r\n\t\tthis.state = state;\r\n\t\tthis.update();\r\n\t}\r\n\r\n\t/**\r\n\t * Trainierung\r\n\t * @param dataSets               - Die zum Training zu verwendenden Datensätze.\r\n\t\t   * @param imputator              - Der zur Vervollständigung der Daten zu verwendende Imputer.\r\n\t * @param classifier             - Der Klassifizierer, der das Herzstück des zu erstellenden KI-Modells darstellt.\r\n\t * @param scaler                 - Der Scaler, der die Daten für den Klassifizierer aufbereitet.\r\n\t * @param features               - Die Merkmale, die aus den gegebenen Datensätzen herausgearbeitet werden sollen.\r\n\t */\r\n\tprivate train(dataSets: number[], imputator: string, classifier: string, scaler: string, features: string[]) {\r\n\t\t// eslint-disable-next-line\r\n\t\tthis.state.currentState = States.NeedKiTraining;\r\n\t\t// eslint-disable-next-line\r\n\t\tthis.state.trainingParameter!.dataSets = dataSets;\r\n\t\tthis.state.trainingParameter!.imputator = imputator;\r\n\t\tthis.state.trainingParameter!.classifier = classifier;\r\n\t\tthis.state.trainingParameter!.scaler = scaler;\r\n\t\tthis.state.trainingParameter!.features = features;\r\n\t\tthis.notify();\r\n\t}\r\n\r\n\t/**\r\n\t * Wechsel der Seite zur Darstellungsseite.\r\n\t */\r\n\tprivate changeToReferring() {\r\n\t\tthis.state.currentState = States.ChangeToRefferring\r\n\t\tthis.notify()\r\n\t}\r\n}\r\n","import { PageController } from \"./PageController\";\r\nimport { MainController } from \"./MainController\";\r\nimport { Page } from \"../view/pages/PageInterface\";\r\nimport { IState, States } from \"../view/pages/State\";\r\nimport { ModelCreationPage } from \"../view/pages/ModelCreationPage/index\";\r\nimport { RefferingController } from './ReferringController';\r\n/**\r\n* Controller welcher die Modellerstellung behandelt\r\n*/\r\nexport class ModelCreationController implements PageController {\r\n    /**\r\n    * Seite welche gerade von dem Controller verwaltet wird\r\n    */\r\n    private page: Page;\r\n    /**\r\n    * Status der Seite\r\n    */\r\n    private state: IState;\r\n\r\n    /**\r\n     * Konstruktor des Seitenverwalters. Registriert sich als Beobachter auf seiner Seite und setzt den start Status.\r\n     * Dieser Seitenverwalter benötigt einen SensorManager, welcher schon initilisiert wurde. \r\n     */\r\n    constructor () {\r\n        this.page = new ModelCreationPage();\r\n        this.page.attach( this );\r\n        this.state = this.page.getState();\r\n        this.state.dataSetMetas! = MainController.getInstance().getFacade().getDataSetMetas();\r\n        this.page.setState( this.state );\r\n    }\r\n\r\n    /**\r\n     * Die Update Methode des Seitenverwalters.\r\n     */\r\n    update () {\r\n        this.state = this.page.getState();\r\n        switch ( this.state.currentState ) {\r\n            case States.NeedKiTraining:\r\n                this.startTraining();\r\n                break;\r\n            case States.NeedMessage:\r\n                this.state.messages = MainController.getInstance().getMessage( this.state.messages )!;\r\n                this.state.currentState = States.waitForDB;\r\n                this.page.setState( this.state );\r\n                break;\r\n            case States.ChangeToRefferring:\r\n                MainController.getInstance().changeTo( new RefferingController( true ) );\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    /**\r\n    * Startet das Training mit den ausgewählten Einstellungen in der View. \r\n    * Holt sich aus den ausgewählten Datensätzen die benutzten Sensoren.\r\n    */\r\n    private startTraining () {\r\n        const params = this.state.trainingParameter!;\r\n        if ( params.slidingWindowStep === undefined && params.slidingWindowSize === undefined && params.trainingDataPercentage === undefined ) {\r\n            MainController.getInstance().getFacade().applyModel( params.dataSets, params.imputator, params.classifier, params.scaler, params.features );\r\n        }\r\n        else if ( params.slidingWindowStep === undefined && params.slidingWindowSize === undefined ) {\r\n            MainController.getInstance().getFacade().applyModel( params.dataSets, params.imputator, params.classifier, params.scaler, params.features, params.trainingDataPercentage );\r\n        }\r\n        else if ( params.slidingWindowStep === undefined ) {\r\n            MainController.getInstance().getFacade().applyModel( params.dataSets, params.imputator, params.classifier, params.scaler, params.features, params.trainingDataPercentage, params.slidingWindowSize );\r\n        }\r\n        else {\r\n            MainController.getInstance().getFacade().applyModel( params.dataSets, params.imputator, params.classifier, params.scaler, params.features, params.trainingDataPercentage, params.slidingWindowSize, params.slidingWindowStep );\r\n        }\r\n    }\r\n}","import { PageController } from \"./PageController\";\r\nimport { VisualizationPage } from \"../view/pages/VisualizationPage/index\";\r\nimport { MainController } from \"./MainController\";\r\nimport { ModelCreationController } from \"./ModelCreationController\";\r\nimport { Page } from \"../view/pages/PageInterface\";\r\nimport { IState, States } from \"../view/pages/State\";\r\n\r\nexport class VisualizationController implements PageController {\r\n    private page: Page;\r\n    private state: IState;\r\n\r\n    /**\r\n     * Konstruktor des Seitenverwalters. Registriert sich als Beobachter auf seiner Seite und setzt den start Status.\r\n     * Dieser Seitenverwalter benötigt einen SensorManager, welcher schon initilisiert wurde. \r\n     */\r\n    constructor(currentProject: { projectID: number, projectName: string, AIModelID: number[]; }) {\r\n        this.page = new VisualizationPage();\r\n        this.page.attach(this);\r\n        this.state = this.page.getState();\r\n        this.state.currentProject = currentProject;\r\n        //this.page.setState(this.state); // <--- DAS IST DAS PROBLEM!\r\n        //Beispiel\r\n        //this.getDatarows()\r\n        this.SetDataRows();\r\n    }\r\n\r\n    /**\r\n     * Die Update Methode des Seitenverwalters.\r\n     */\r\n    update() {\r\n        this.state = this.page.getState();\r\n        switch (this.state.currentState) {\r\n            case States.NeedMessage:\r\n                this.state.messages = MainController.getInstance().getMessage(this.state.messages)!;\r\n                this.state.currentState = States.waitForDB;\r\n                this.page.setState(this.state);\r\n                break;\r\n            case States.ChangeToCreation:\r\n                MainController.getInstance().changeTo(new ModelCreationController());\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    /**\r\n    * Übergibt der Seite alle Datenreihen die verfügbar sind. Dies wird Alle drei Sekunden wiederholt bis der Seitenzustand auf\r\n    * ChangeToCreation wechselt.\r\n    */\r\n    private SetDataRows() {\r\n        this.state.dataSetMetas = MainController.getInstance().getFacade().getDataSetMetas();\r\n        MainController.getInstance().getFacade().loadProject(this.state.currentProject!.projectID);\r\n        var dataSets = MainController.getInstance().getFacade().getDataSetMetas();\r\n        this.state.currentDataSets! = [];\r\n        for (let index = 0; index < dataSets.length; index++) {\r\n            let data = MainController.getInstance().getFacade().getDataRows(dataSets[index].dataSetID).dataRows;\r\n            this.state.currentDataSets!.push({ dataSetID: dataSets[index].dataSetID, rows: data });\r\n            //PubSub.publish('visualizationDiagram', { dataSetID: dataSets[index].dataSetID, dataRows: data });\r\n            this.page.setState(this.state);\r\n        }\r\n        this.state.currentState = States.SetDataRows;\r\n        this.page.setState(this.state);\r\n        this.state = this.page.getState();\r\n\r\n        let intervalId = setInterval(() => {\r\n\r\n            if (this.state.currentState === States.ChangeToCreation) {\r\n                clearInterval(intervalId);\r\n                return;\r\n            }\r\n            this.state.dataSetMetas = MainController.getInstance().getFacade().getDataSetMetas();\r\n            MainController.getInstance().getFacade().loadProject(this.state.currentProject!.projectID);\r\n            var dataSets = MainController.getInstance().getFacade().getDataSetMetas();\r\n            this.state.currentDataSets! = [];\r\n            for (let index = 0; index < dataSets.length; index++) {\r\n                let data = MainController.getInstance().getFacade().getDataRows(dataSets[index].dataSetID).dataRows;\r\n                this.state.currentDataSets!.push({ dataSetID: dataSets[index].dataSetID, rows: data });\r\n                //PubSub.publish('visualizationDiagram', { dataSetID: dataSets[index].dataSetID, dataRows: data });\r\n            }\r\n            console.log(this.state.currentDataSets);\r\n            this.state.currentState = States.SetDataRows;\r\n            this.page.setState(this.state);\r\n            this.state = this.page.getState();\r\n        }, 2021);\r\n    }\r\n}","import React from 'react';\r\nimport { MainController } from '../../../../controller/MainController';\r\nimport './ConstantsText.css';\r\n\r\n/**\r\n * Überschrift\r\n */\r\nexport default class ConstantsText extends React.Component {\r\n\r\n    /**\r\n     * Render Methode des Komponenten\r\n     * @returns Aufbau des Komponenten\r\n     */\r\n    render() {\r\n        console.log(MainController.getInstance().getText()!.title);\r\n        return (\r\n            <div>\r\n                <h1 className='explorerTitle'>{MainController.getInstance().getText().title}</h1>\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n","import React, { Component } from 'react'\r\n\r\n/**\r\n * QR-Code\r\n */\r\nexport default class QRImage extends Component {\r\n    /**\r\n     * Variablen und Methoden welche der Klasse zur verfügung gestellt werden müssen\r\n     */\r\n    props = {\r\n        qr: ''\r\n    }\r\n\r\n    /**\r\n     * Render Methode des Komponenten\r\n     * @returns Aufbau des Komponenten\r\n     */\r\n    render() {\r\n        return (\r\n            <div>\r\n                <img src={this.props.qr} alt=\"qrcode\" style={{ width: 'auto' }} />\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport \"./index.css\"\r\n\r\n/**\r\n * Linktext für Verbindung\r\n */\r\nexport default class LinkText extends Component {\r\n    private static readonly T_LINK_DESCRIPTION_DE: string = \"Bitte scannen Sie den QR-Code oder folgen Sie dem Link, um Daten zu erfassen\";\r\n\r\n    /**\r\n     * Variablen und Methoden welche der Klasse zur verfügung gestellt werden müssen\r\n     */\r\n    props = {\r\n        link: ''\r\n    }\r\n\r\n    /**\r\n     * Render Methode des Komponenten\r\n     * @returns Aufbau des Komponenten\r\n     */\r\n    render() {\r\n        return (\r\n            <div className=\"linktext\">\r\n                <div className=\"linktext1\">\r\n                    <p className = \"text\">{LinkText.T_LINK_DESCRIPTION_DE}</p>\r\n                </div>\r\n\r\n                <a className = \"text\" href={this.props.link} type='link'>{this.props.link}</a>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import { Component } from 'react';\r\nimport './ChangeToVisuBtn.css';\r\n\r\n/**\r\n * Stellt die funktion eines Knopfes zum wechsel auf die Visualisierungsseite dar\r\n */\r\nexport default class ChangeToVisuBtn extends Component {\r\n    private static readonly T_BUTTON_NEXT_DE: string = \"Zur Visualisierungsseite\"\r\n\r\n    /**\r\n     * Variablen und Methoden welche der Klasse zur verfügung gestellt werden müssen\r\n     */\r\n    props = {\r\n        pageChangeToVisu: function () { }\r\n    };\r\n\r\n    /**\r\n     * Render Methode des Komponenten\r\n     * @returns Aufbau des Komponenten\r\n     */\r\n    render() {\r\n        return (\r\n            <div>\r\n                <button onClick={() => this.props.pageChangeToVisu()} className=\"ctv-btn\" type=\"button\" >{ChangeToVisuBtn.T_BUTTON_NEXT_DE}</button>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\nimport QRImage from '../QRImage';\r\nimport LinkText from '../LinkText';\r\nimport ChangeToVisuBtn from '../ChangeToVisuBtn';\r\nimport './NewProjectButton.css'\r\n\r\n/**\r\n * Knopf für neues Projekt\r\n */\r\nexport default class NewProjectButton extends Component {\r\n\r\n  /**\r\n  * Variablen und Methoden welche der Klasse zur verfügung gestellt werden müssen\r\n  */\r\n  props = {\r\n    pageNewProject: function (projectName: string) { },\r\n    pageChangeToVisu: function () { },\r\n    disabled: true,\r\n    qr: '',\r\n    link: ''\r\n  }\r\n\r\n  /**\r\n   * Status für diese Komponente\r\n   */\r\n  state = {\r\n    click: false,\r\n    projectName: '',\r\n  };\r\n\r\n  /**\r\n   * Eingabefeld Methode\r\n   * @param e ChangeEventInput\r\n   */\r\n  changeProjectName = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    this.setState({\r\n      projectName: e.target.value\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Methode für Erstellung neues Projekts\r\n   */\r\n  handleCreate = () => {\r\n    this.setState({ click: true });\r\n    this.props.pageNewProject(this.state.projectName)\r\n  };\r\n\r\n  /**\r\n  * Render Methode des Komponenten\r\n  * @returns Aufbau des Komponenten\r\n  */\r\n  render() {\r\n    return (\r\n      <div className=\"newProject\">\r\n        <input type=\"text\" value={this.state.projectName} onChange={this.changeProjectName} placeholder='Neuen Projektnamen eingeben' disabled={this.props.disabled} />\r\n        <button onClick={() => this.handleCreate()} className=\"newProject-button\" id=\"new\" disabled={this.props.disabled}>Neues Projekt</button>\r\n        {this.state.click ? <div> <QRImage qr={this.props.qr} /><ChangeToVisuBtn pageChangeToVisu={this.props.pageChangeToVisu} /><LinkText link={this.props.link} /></div> : null}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\nimport { NotificationManager } from 'react-notifications';\r\n\r\n/**\r\n * Modelliste von gewähltes Projekt\r\n */\r\nexport default class ModelList extends Component {\r\n\r\n    /**\r\n     * Variablen und Methoden welche der Klasse zur verfügung gestellt werden müssen\r\n     */\r\n    props = {\r\n        currentProject: { projectID: -1, projectName: \"null\", AIModelID: [-1] },\r\n        pageLoadModel: function (chosenmodelID: number) { }\r\n    };\r\n\r\n    /**\r\n     * Status für diese Komponente\r\n     */\r\n    state = {\r\n        chosenmodelID: -1\r\n    };\r\n\r\n    /**\r\n     * Selektieren in Modelliste\r\n     * @param e ChangeEvent\r\n     */\r\n    handleChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n        this.setState({\r\n            chosenmodelID: e.target.value\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Methode für Bestätigung Knopf\r\n     */\r\n    handleChoose() {\r\n        /* wait to change load model*/\r\n        if (this.state.chosenmodelID === -1) {\r\n            NotificationManager.error('Sie haben noch kein Modell gewählt!', \"\", 3000);\r\n        } else {\r\n            this.props.pageLoadModel(this.state.chosenmodelID);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Render Methode des Komponenten\r\n     * @returns Aufbau des Komponenten\r\n     */\r\n    render() {\r\n        return (\r\n            <section>\r\n                <label>Modell-Liste</label>\r\n                <select onChange={this.handleChange}>\r\n                    <option>Modell auswählen</option>\r\n                    {this.props.currentProject.AIModelID.map((modelObj) => {\r\n                        return <option value={modelObj} key={modelObj} >Modell{modelObj}</option>;\r\n                    })}\r\n                </select>\r\n                <button onClick={() => this.handleChoose()} className=\"btn\" >Gewähltes Modell laden (zur Auslieferungsseite)</button>\r\n            </section>\r\n        );\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\nimport { NotificationManager } from 'react-notifications';\r\nimport ChangeToVisuBtn from '../ChangeToVisuBtn';\r\nimport LinkText from '../LinkText';\r\nimport ModelList from '../ModelList';\r\nimport QRImage from '../QRImage';\r\nimport './ProjectList.css';\r\n\r\n/**\r\n * Projektliste\r\n */\r\nexport default class ProjectList extends Component {\r\n\r\n    /**\r\n     * Variablen und Methoden welche der Klasse zur verfügung gestellt werden müssen\r\n     */\r\n    props = {\r\n        projectData: [{ projectID: -1, projectName: \"null\", AIModelID: [-1], }],\r\n        pageSetCurrentprojekt: function (currentProject: { projectID: number; projectName: string; AIModelID: number[]; }) { },\r\n        pageLoadModel: function (chosenmodelID: number) { },\r\n        pageLoadProjekt: function (currentProject: { projectID: number; projectName: string; AIModelID: number[]; }) { },\r\n        pageChangeToVisu: function () { },\r\n        qr: '',\r\n        link: ''\r\n    };\r\n\r\n    /**\r\n     * Status für diese Komponente\r\n     */\r\n    state = {\r\n        value: null,\r\n        click: false,\r\n        loadclick: false,\r\n        currentProject: { projectID: -1, projectName: \"\", AIModelID: [] }\r\n    };\r\n\r\n    /**\r\n     * Selektieren in Modelliste\r\n     * @param e ChangeEvent\r\n     */\r\n    private handleChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n        this.setState({\r\n            value: e.target.value\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Wenn es gibt, erstellt Modelliste nach Klicken\r\n     */\r\n    private handleChoose() {\r\n        if (this.state.value === null) {\r\n            NotificationManager.error(\"Sie haben noch kein Projekt gewählt\", \"\", 3000);\r\n        } else {\r\n            this.props.projectData.map((projectObj) => {\r\n                if (Number(this.state.value) === projectObj.projectID) {\r\n                    console.log(projectObj)\r\n                    if (projectObj.AIModelID.length !== 0) {\r\n                        for (let index = 0; index < this.props.projectData!.length; index++) {\r\n                            if (projectObj.projectID === this.props.projectData![index].projectID) {\r\n                                ;\r\n                                this.setState({ currentProject: projectObj });\r\n                                this.props.pageSetCurrentprojekt(projectObj);\r\n                                break;\r\n                            }\r\n                        }\r\n                        this.setState({ click: true });\r\n                    } else {\r\n                        this.setState({ click: false });\r\n                        NotificationManager.error('Es gibt noch kein KI-Modell in diesem Projekt!', \"\", 3000);\r\n                    }\r\n                }\r\n                return projectObj;\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Methode für Projekt laden\r\n     */\r\n    private handleLoad() {\r\n        if (this.state.value === null) {\r\n            NotificationManager.error(\"Sie haben noch kein Projekt ausgewählt\", \"\", 3000);\r\n        } else {\r\n            this.props.projectData.map((projectObj) => {\r\n                if (Number(this.state.value) === projectObj.projectID) {\r\n                    //let id: number = projectObj.projectID;\r\n                    this.props.pageLoadProjekt(projectObj);\r\n                    this.setState({ loadclick: true });\r\n                }\r\n                return projectObj;\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Render Methode des Komponenten\r\n     * @returns Aufbau des Komponenten\r\n     */\r\n    render() {\r\n        return (\r\n            <section className='projectlist'>\r\n                <label>Projektliste</label>\r\n                <select onChange={this.handleChange}>\r\n                    <option>Projekt wählen</option>\r\n                    {this.props.projectData.map(projectObj => <option value={projectObj.projectID} key={projectObj.projectID}>{projectObj.projectName}</option>)}\r\n                </select>\r\n                <button onClick={() => this.handleChoose()} className=\"pl-btn\" type=\"button\" >Modellliste laden</button>\r\n                <button onClick={() => this.handleLoad()} className=\"pl-btn\" type=\"button\" >Projekt laden</button>\r\n                {this.state.loadclick ? <div> <QRImage qr={this.props.qr} /><ChangeToVisuBtn pageChangeToVisu={this.props.pageChangeToVisu} /> <LinkText link={this.props.link}/></div> : null}\r\n                \r\n                {this.state.click ? <div> <ModelList pageLoadModel={this.props.pageLoadModel} currentProject={this.state.currentProject} /></div> : null}\r\n            </section>\r\n\r\n        );\r\n    }\r\n}\r\n","import React, { Component } from 'react'\r\nimport ProjectList from '../ProjectList'\r\nimport './LoadModelButton.css'\r\n\r\n/**\r\n * Erstellen PrjektList Knopf\r\n */\r\nexport default class LoadModelButton extends Component {\r\n    private static readonly T_BUTTON_OPEN_LOAD_DE: string = \"Projekt und Modell wählen\";\r\n\r\n    /**\r\n    * Variablen und Methoden welche der Klasse zur verfügung gestellt werden müssen\r\n    */\r\n    props = {\r\n        disabled: true,\r\n        projectData: [] as { projectID: number, projectName: string, AIModelID: number[], }[],\r\n        pageSetCurrentprojekt: function (currentProject: { projectID: number; projectName: string; AIModelID: number[]; }) { },\r\n        pageLoadModel: function (chosenmodelID: number) { },\r\n        pageLoadProjekt: function (currentProject: { projectID: number; projectName: string; AIModelID: number[]; }) { },\r\n        pageChangeToVisu: function () { },\r\n        qr: '',\r\n        link: ''\r\n    }\r\n\r\n    /**\r\n     * Status für diese Komponente\r\n     */\r\n    state = { click: false }\r\n\r\n    /**\r\n     * Erstellung von Projektliste Methode\r\n     */\r\n    handleCreate = () => {\r\n        this.setState({ click: true })\r\n    }\r\n\r\n    /**\r\n    * Render Methode des Komponenten\r\n    * @returns Aufbau des Komponenten\r\n    */\r\n    render() {\r\n        return (\r\n            <div className=\"loadProject\">\r\n                <button onClick={() => this.handleCreate()} className=\"lp-btn\" disabled={this.props.disabled} type='button'>{LoadModelButton.T_BUTTON_OPEN_LOAD_DE}</button>\r\n                {this.state.click ? <div><ProjectList\r\n                    link={this.props.link}\r\n                    pageChangeToVisu={this.props.pageChangeToVisu}\r\n                    pageLoadProjekt={this.props.pageLoadProjekt}\r\n                    qr={this.props.qr}\r\n                    pageLoadModel={this.props.pageLoadModel}\r\n                    projectData={this.props.projectData}\r\n                    pageSetCurrentprojekt={this.props.pageSetCurrentprojekt} />\r\n                </div> : null}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import { IState } from \"../State\";\r\nimport { States } from \"../State\";\r\n\r\nexport class State implements IState {\r\n  currentState: States = States.NeedMessage;\r\n  languageCode: string = \"de\";\r\n  messages: { text: string, id: number; }[] = [];\r\n  projectData?: { projectID: number; projectName: string; AIModelID: number[]; }[] = [];\r\n  currentProject?: { projectID: number, projectName: string, AIModelID: number[]; } = { projectID: -1, projectName: \"null\", AIModelID: [] };\r\n  chosenAIModel?: number;\r\n  adminData?: { name: string, email: string, password: string; };\r\n  //minerData?:\r\n  aiUserData?: { name: string, result: string; };\r\n  labels?: { labelID: number, start: number, end: number; }[];\r\n  sessionID?: string;\r\n  //aiParameter?: \r\n  qr?: string = '';\r\n  wait?: Promise<any>;\r\n  islogedIn: boolean = false;\r\n  link?: string = '';\r\n}\r\n","import React, { Component } from 'react';\r\nimport NewWindow from \"react-new-window\";\r\nimport './LoginWindow.css'\r\n\r\n/**\r\n * LoginFenster\r\n */\r\nexport default class LoginWindow extends Component {\r\n    private static readonly T_BUTTON_LOGIN_DE: string = \"Anmelden/Registrieren\";\r\n    private static readonly T_POPUP_LABEL_NAME_DE: string = \"Benutzername\";\r\n    private static readonly T_POPUP_LABEL_EMAIL_DE: string = \"E-Mail-Adresse\";\r\n    private static readonly T_POPUP_LABEL_PASSWORD_DE: string = \"Passwort\";\r\n    private static readonly T_POPUP_BUTTON_LOGIN_DE: string = \"Anmelden\";\r\n    private static readonly T_POPUP_BUTTON_REGISTER_DE: string = \"Registrieren\";\r\n\r\n    /**\r\n    * Variablen und Methoden welche der Klasse zur verfügung gestellt werden müssen\r\n    */\r\n    props = {\r\n        pageRegister: function (username: string, email: string, password: string) { },\r\n        pageLogin: function (email: string, password: string) { }\r\n    }\r\n\r\n    /**\r\n     * Status für diese Komponente\r\n     */\r\n    state = {\r\n        openNewWindow: false,\r\n        username: '',\r\n        email: '',\r\n        password: '',\r\n    };\r\n\r\n    /**\r\n     * Erstellung LoginFenster\r\n     */\r\n    openNewWindow = () => {\r\n        this.setState({ openNewWindow: true });\r\n    };\r\n\r\n    /**\r\n     * Eingabe von Benutzename\r\n     * @param e ChangeEventInput\r\n     */\r\n    changeUsername = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        this.setState({\r\n            username: e.target.value\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Eingabe von Emailadresse\r\n     * @param e ChangeEventInput\r\n     */\r\n    changeEmail = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        this.setState({\r\n            email: e.target.value\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Eingabe von Passwort\r\n     * @param e ChangeEventInput\r\n     */\r\n    changePassword = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n        this.setState({\r\n            password: e.target.value\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Registieren Methode\r\n     */\r\n    register = () => {\r\n        this.setState({ openNewWindow: false });\r\n        this.props.pageRegister(this.state.username, this.state.email, this.state.password)\r\n    }\r\n\r\n    /**\r\n     * Login Methode\r\n     */\r\n    login = () => {\r\n        /** nach submit newFenster schliessen */\r\n        this.setState({ openNewWindow: false });\r\n        this.props.pageLogin(this.state.email, this.state.password)\r\n    };\r\n\r\n    /**\r\n    * Render Methode des Komponenten\r\n    * @returns Aufbau des Komponenten\r\n    */\r\n    render() {\r\n        return (\r\n            <div>\r\n                <div className=\"left\">\r\n                    <button className=\"login-button\" onClick={this.openNewWindow} type='button'>{LoginWindow.T_BUTTON_LOGIN_DE}</button>\r\n                </div>\r\n                {this.state.openNewWindow && (\r\n                    <NewWindow title=\"Login\">\r\n                        <div className=\"login-window\">\r\n                            <form>\r\n                                <label>\r\n                                    <p className='user'>{LoginWindow.T_POPUP_LABEL_NAME_DE}</p>\r\n                                    <input type=\"text\" value={this.state.username} onChange={this.changeUsername} />\r\n                                </label>\r\n                                <label>\r\n                                    <p className='mail'>{LoginWindow.T_POPUP_LABEL_EMAIL_DE}</p>\r\n                                    <input type=\"text\" value={this.state.email} onChange={this.changeEmail} />\r\n                                </label>\r\n                                <label>\r\n                                    <p className='password'>{LoginWindow.T_POPUP_LABEL_PASSWORD_DE}</p>\r\n                                    <input type=\"password\" value={this.state.password} onChange={this.changePassword} />\r\n                                </label>\r\n                                <div>\r\n                                    <button className=\"login\" onClick={this.login} type='button'>{LoginWindow.T_POPUP_BUTTON_LOGIN_DE}</button>\r\n                                    <button className=\"register\" onClick={this.register} type='button'>{LoginWindow.T_POPUP_BUTTON_REGISTER_DE}</button>\r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n                    </NewWindow>\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import ReactDOM from 'react-dom';\r\nimport { NotificationContainer, NotificationManager } from 'react-notifications';\r\nimport 'react-notifications/lib/notifications.css';\r\nimport ConstantsText from '../../components/ReferringComponents/ConstantsText';\r\nimport NewProjectButton from '../../components/ReferringComponents/NewProjectButton';\r\nimport LoadModelButton from '../../components/ReferringComponents/LoadModelButton';\r\nimport { Page } from \"../PageInterface\";\r\nimport { PageController } from \"../../../controller/PageController\";\r\nimport { State } from \"./State\";\r\nimport { States } from '../State';\r\nimport LoginWindow from '../../components/ReferringComponents/LoginWindow';\r\n\r\n/*\r\n*Darstellungsseite der Verweisseite.\r\n*/\r\nexport class ReferringPage implements Page {\r\n    private state: State;\r\n    private observers: PageController[] = [];\r\n\r\n    private static readonly T_WELCOME_DE = \"Wilkommen \";\r\n    private static readonly E_REG_ERROR_DE = \"Registrieren fehlgeschlagen!\";\r\n    private static readonly E_MAIL_INVALID_DE = \"Email-Adresse nicht gültig\";\r\n    private static readonly E_LOGIN_ERROR_DE = \"Login fehlgeschlagen!\";\r\n\r\n    /**\r\n    * Konstruktor der Darstellungsseite.\r\n    */\r\n    constructor() {\r\n        this.state = new State();\r\n        this.update();\r\n    }\r\n\r\n    /**\r\n    * Update Methode der Darstellungsseite. Diese Methode wird nach jeder Änderung, die kein Seitenwechsel ist, aufgerufen. \r\n    * Die Methode enthält den Aufbau der Seite und wird von ihr gerendert.\r\n    * Es werden durch notify() alle controller über ein Update informiert und alle Seiten Elemente werden aktualisiert und erneut gerendert. \r\n    */\r\n    update() {\r\n        this.notify();\r\n        const VDOM = (\r\n            <div>\r\n                <ConstantsText />\r\n                <LoginWindow pageRegister={this.register.bind(this)} pageLogin={this.login.bind(this)} />\r\n                <NewProjectButton disabled={!this.state.islogedIn!}\r\n                    pageNewProject={this.createNewProject.bind(this)}\r\n                    qr={this.state.qr!}\r\n                    link={this.state.link!}\r\n                    pageChangeToVisu={this.changetovisu.bind(this)}\r\n                />\r\n                <br />\r\n                <LoadModelButton disabled={!this.state.islogedIn!}\r\n                    projectData={this.state.projectData!}\r\n                    pageSetCurrentprojekt={this.setCurrentProjekt.bind(this)}\r\n                    pageLoadModel={this.loadmodel.bind(this)}\r\n                    pageLoadProjekt={this.loadproject.bind(this)}\r\n                    pageChangeToVisu={this.changetovisu.bind(this)}\r\n                    qr={this.state.qr!}\r\n                    link={this.state.link!}\r\n                />\r\n\r\n                <NotificationContainer />\r\n            </div>\r\n        );\r\n        if (document.getElementById('root') !== null) {\r\n            ReactDOM.render(VDOM, document.getElementById('root'));\r\n        }\r\n    }\r\n\r\n    /**\r\n    * Durch diese Methode kann sich ein Controller als Beobachter anmelden.\r\n    * @param oberver neuer Beobachter\r\n    */\r\n    attach(observer: PageController) {\r\n        this.observers.push(observer);\r\n    }\r\n\r\n    /**\r\n    * Durch diese Methode kann sich ein Controller als Beobachter abmelden.\r\n    * @param oberver Beobachter der zu entfernen ist\r\n    */\r\n    detach(observer: PageController) {\r\n        const index = this.observers.indexOf(observer, 0);\r\n        if (index > -1) {\r\n            this.observers.splice(index, 1);\r\n        }\r\n    }\r\n\r\n    /**\r\n    * Durch diese Methode werden alle Beobachter über eine Änderung auf der Seite informiert.\r\n    */\r\n    notify() {\r\n        for (let index = 0; index < this.observers.length; index++) {\r\n            const element = this.observers[index];\r\n            element.update();\r\n        }\r\n    }\r\n\r\n    /**\r\n    * Gibt den Status der Seite zurück\r\n    */\r\n    getState() {\r\n        return this.state;\r\n    }\r\n\r\n    /**\r\n    * Der Benutzer möchte ein neues Projekt erstellen\r\n    * @param projectName Name des neuen Projekts\r\n    */\r\n    private createNewProject(projectName: string) {\r\n        this.state.currentProject!.projectName = projectName;\r\n        this.state.currentState = States.NewProjekt;\r\n        this.update();\r\n    }\r\n\r\n    /**\r\n     * Ein Benutzer möchte sich registrieren\r\n     * @param username Name des Benutzers\r\n     * @param email Email des Benutzers\r\n     * @param password Passwort des Benutzers\r\n     */\r\n    private register(username: string, email: string, password: string) {\r\n        var pattern = /^([A-Za-z0-9_\\-.])+@([A-Za-z0-9_\\-.])+\\.([A-Za-z])+$/;\r\n        if (!pattern.test(email)) {\r\n            NotificationManager.error(ReferringPage.E_MAIL_INVALID_DE, \"\", 3000);\r\n        } else {\r\n            this.state.adminData! = { name: username, email: email, password: password };\r\n            this.state.currentState = States.Register;\r\n            this.update();\r\n            this.state.wait!.then(() => {\r\n                if (this.state.currentState as States === States.LoginFail as States) {\r\n                    NotificationManager.error(ReferringPage.E_REG_ERROR_DE, \"\", 3000);\r\n                    return;\r\n                }\r\n                NotificationManager.success(ReferringPage.T_WELCOME_DE + this.state.adminData?.email);\r\n                this.update();\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Ein Benutzer möchte sich Anmelden\r\n     * @param email Email des Benutzers\r\n     * @param password Passwort des Benutzers\r\n     */\r\n    private login(email: string, password: string) {\r\n        this.state.adminData! = { name: \"\", email: email, password: password };\r\n        this.state.currentState = States.Login;\r\n        this.update();\r\n        this.state.wait!.then(() => {\r\n            if (this.state.currentState as States === States.LoginFail as States) {\r\n                NotificationManager.error(ReferringPage.E_LOGIN_ERROR_DE, \"\", 3000);\r\n                return;\r\n            }\r\n            NotificationManager.success(ReferringPage.T_WELCOME_DE + this.state.adminData?.email);\r\n            this.update();\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Ein Projekt soll geladen werden\r\n     * @param data Infomationen über das zu ladene Projekt\r\n     */\r\n    private loadproject(data: { projectID: number, projectName: string, AIModelID: number[]; }) {\r\n        this.state.currentProject = data;\r\n        this.state.currentState = States.LoadProject;\r\n        this.update();\r\n    }\r\n\r\n    /**\r\n     * Ein Projekt als momentanes Projekt setzen\r\n     * @param currentProject Infomationene über das momentane projekt\r\n     */\r\n    private setCurrentProjekt(currentProject: { projectID: number, projectName: string, AIModelID: number[]; }) {\r\n        this.state.currentProject = currentProject;\r\n        this.update();\r\n    }\r\n\r\n    /**\r\n     * Wechsel der Seite zur Visualisierungseite.\r\n     */\r\n    private changetovisu() {\r\n        this.state.currentState = States.ChangeToVisual;\r\n        this.notify(); // Kein Update, da sonst die Seite neu rendert und der Seitenwechsel fehlschlägt\r\n    }\r\n\r\n    /**\r\n     * Lade ein KI-Model\r\n     * @param chosenmodelID ID des Models\r\n     */\r\n    private loadmodel(chosenmodelID: number) {\r\n        this.state.chosenAIModel = chosenmodelID;\r\n        this.state.currentState = States.LoadModel;\r\n        this.update();\r\n    }\r\n\r\n    /**\r\n     * Setzt einen neuen Zustand für die Seite und aktualisiert sie\r\n     * @param state neuer Zustand für die Seite\r\n     */\r\n    setState(state: any) {\r\n        this.state = state;\r\n        this.update();\r\n    }\r\n}\r\n","/**\r\n * In diesem Enum befinden sich Konstanten, die mögliche Ausprägungen \r\n * für die Auslieferung eines fertig trainierten KI-Modells darstellen.\r\n */\r\nexport enum DeliveryFormat {\r\n    EXE,\r\n    WEB_APP\r\n}\r\n","import { Page } from \"../view/pages/PageInterface\";\r\nimport { IState, States } from \"../view/pages/State\";\r\nimport { PageController } from \"./PageController\";\r\nimport { MainController } from \"./MainController\";\r\nimport { DeliveryController } from \"./DeliveryController\";\r\nimport { VisualizationController } from \"./VisualizationController\";\r\nimport { ReferringPage } from \"../view/pages/ReferringPage/index\";\r\nimport { QRCode, ErrorCorrectLevel } from 'qrcode-generator-ts/js';\r\n\r\n/**\r\n* Controller für die Verweisseite\r\n*/\r\nexport class RefferingController implements PageController {\r\n    private page: Page;\r\n    private state: IState;\r\n\r\n    /**\r\n     * Konstruktor des Seitenverwalters. Registriert sich als Beobachter auf seiner Seite und setzt den Start Status.\r\n     * @param isloggedIn Wurde sich zuvor erfolgreich Eingeloggt und wird nun zurück auf die ReferringPage geleitet muss dies true sein. Ohne richtigen Login entstehen fehler.\r\n     */\r\n    constructor ( isloggedIn?: boolean ) {\r\n        this.page = new ReferringPage();\r\n        //this.page = new StartPage({});\r\n        //this.page = new ModelCreationPage({});\r\n        // this.page = new VisualizationPage({});\r\n        this.page.attach( this );\r\n        this.state = this.page.getState();\r\n        this.update();\r\n\r\n        if ( isloggedIn ) {\r\n            this.state.projectData! = [];\r\n            let projectData: Promise<{ projectID: number; projectName: string; AIModelID: number[]; }[]> = MainController.getInstance().getFacade().getProjectMetas();\r\n            projectData.then( ( data: { projectID: number; projectName: string; AIModelID: number[]; }[] ) => {\r\n                this.state.projectData! = data;\r\n                this.page.setState( this.state );\r\n            } );\r\n            this.state.islogedIn! = true;\r\n            this.page.setState( this.state );\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Die Update Methode des Seitenverwalters.\r\n     */\r\n    update () {\r\n        this.state = this.page.getState();\r\n        console.log( \"controller update: \" + this.state.currentState.toString() );\r\n        switch ( this.state.currentState ) {\r\n            case States.LoadProject:\r\n                this.loadProject();\r\n                break;\r\n            case States.Register:\r\n                this.register();\r\n                break;\r\n            case States.Login:\r\n                this.login();\r\n                break;\r\n            case States.NewProjekt:\r\n                this.createNewProject();\r\n                break;\r\n            case States.LoadModel:\r\n                this.loadModel();\r\n                break;\r\n            case States.SetLanguage:\r\n                console.log( MainController.getInstance().setLanguage( this.state.languageCode ) );\r\n                break;\r\n            case States.NeedMessage:\r\n                this.state.messages = MainController.getInstance().getMessage( this.state.messages )!;\r\n                this.state.currentState = States.waitForDB;\r\n                this.page.setState( this.state );\r\n                break;\r\n            case States.ChangeToVisual:\r\n                MainController.getInstance().changeTo( new VisualizationController( this.state.currentProject! ) );\r\n                break;\r\n            //nur für testdeliveryPage\r\n            case States.ChangeToDelivery:\r\n                this.loadModel();\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Logt den Benutzer ein\r\n     */\r\n    private login () {\r\n        let adminData: { name: string, email: string, password: string; } = this.state.adminData!;\r\n        let loginSucess: Promise<boolean> = MainController.getInstance().getFacade().loginAdmin( adminData.email, adminData.password );\r\n        this.state.wait! = loginSucess;\r\n        this.state.currentState = States.waitForDB;\r\n        this.page.setState( this.state );\r\n        loginSucess.then( ( value: boolean ) => {\r\n            if ( value ) {\r\n                this.state.projectData! = [];\r\n                let projectData: Promise<{ projectID: number; projectName: string; AIModelID: number[]; }[]> = MainController.getInstance().getFacade().getProjectMetas();\r\n                projectData.then( ( data: { projectID: number; projectName: string; AIModelID: number[]; }[] ) => {\r\n                    console.log(data)\r\n                    this.state.projectData! = data;\r\n                    this.page.setState( this.state );\r\n                } );\r\n                this.state.islogedIn! = true;\r\n            } else {\r\n                this.state.currentState = States.LoginFail;\r\n            }\r\n            this.page.setState( this.state );\r\n        } );\r\n        loginSucess.catch( ( value: boolean ) => {\r\n            console.log( value );\r\n        } );\r\n        //this.state.projectData! = [{ projectID: 1, projectName: \"string\", AIModelID: [1,2] }]\r\n        //this.page.setState(this.state)\r\n    }\r\n\r\n    /**\r\n     * Registriert den Benutzer\r\n     */\r\n    private register () {\r\n        let adminData: { name: string, email: string, password: string; } = this.state.adminData!;\r\n        let loginSucess: Promise<boolean> = MainController.getInstance().getFacade().registerAdmin( adminData.name, adminData.email, adminData.password );\r\n        this.state.wait! = loginSucess;\r\n        this.state.currentState = States.waitForDB;\r\n        this.page.setState( this.state );\r\n        loginSucess.then( ( value: boolean ) => {\r\n            if ( value ) {\r\n                this.state.projectData! = [];\r\n                let projectData: Promise<{ projectID: number; projectName: string; AIModelID: number[]; }[]> = MainController.getInstance().getFacade().getProjectMetas();\r\n                projectData.then( ( data: { projectID: number; projectName: string; AIModelID: number[]; }[] ) => {\r\n                    this.state.projectData! = data;\r\n                    this.page.setState( this.state );\r\n                } );\r\n                this.state.islogedIn! = true;\r\n            } else {\r\n                this.state.currentState = States.LoginFail;\r\n            }\r\n            this.page.setState( this.state );\r\n        } );\r\n    }\r\n\r\n    /**\r\n     * Erstellt ein QRCode und übergibt in an die Seite\r\n     */\r\n    private createQR () {\r\n        const url = new URL( document.URL );\r\n        url.searchParams.append( \"SessionID\", MainController.getInstance().getFacade().getSessionID().toString() );\r\n        url.searchParams.append( \"isMiner\", \"true\" );\r\n        url.searchParams.append( \"Admin\", this.state.adminData?.email! );\r\n        let link: string = url.toString();\r\n        var qr = new QRCode();\r\n        qr.setTypeNumber( 5 );\r\n        qr.setErrorCorrectLevel( ErrorCorrectLevel.L );\r\n        qr.addData( link );\r\n        qr.make();\r\n        this.state.qr = qr.toDataURL();\r\n        this.state.link = link;\r\n        this.state.currentState = States.SetQRC;\r\n    }\r\n\r\n    /**\r\n     * Erstelle ein neues Projekt, welches auch als momentanes Projekt gesetzt wird.\r\n     */\r\n    private createNewProject () {\r\n        let sucess: Promise<boolean> = MainController.getInstance().getFacade().createProject( this.state.currentProject!.projectName );\r\n        this.state.wait! = sucess;\r\n        this.state.currentState = States.waitForDB;\r\n        this.page.setState( this.state );\r\n        sucess.then( ( value: boolean ) => {\r\n            if ( value ) {\r\n                this.createQR();\r\n                let projectData: Promise<{ projectID: number; projectName: string; AIModelID: number[]; }[]> = MainController.getInstance().getFacade().getProjectMetas();\r\n                projectData.then( ( data: { projectID: number; projectName: string; AIModelID: number[]; }[] ) => {\r\n                    this.state.projectData! = data;\r\n                    this.page.setState( this.state );\r\n                } );\r\n            } else {\r\n                this.state.currentState = States.LoadError;\r\n            }\r\n            this.page.setState( this.state );\r\n        } );\r\n\r\n    }\r\n\r\n    /**\r\n     * Setzt ein Projekt als momentanes Projekt\r\n     */\r\n    private loadProject () {\r\n        let projectId: number = this.state.currentProject!.projectID!;\r\n        let sucess: Promise<boolean> = MainController.getInstance().getFacade().loadProject( projectId );\r\n        this.state.wait! = sucess;\r\n        this.state.currentState = States.waitForDB;\r\n        this.page.setState( this.state );\r\n        sucess.then( ( value: boolean ) => {\r\n            if ( value ) {\r\n                this.createQR();\r\n                //Kann das unere Weg? Schon durch login geladen\r\n                //let projectData: Promise<{ projectID: number; projectName: string; AIModelID: number[]; }[]> = MainController.getInstance().getFacade().getProjectMetas();\r\n                //projectData.then( ( data: { projectID: number; projectName: string; AIModelID: number[]; }[] ) => {\r\n                //    this.state.projectData! = data;\r\n                //} );\r\n            } else {\r\n                this.state.currentState = States.LoadError;\r\n            }\r\n            this.page.setState( this.state );\r\n        } );\r\n    }\r\n\r\n    /**\r\n     * Läde ein Modell und wechselt zur delivery Seite\r\n     */\r\n    private loadModel () {\r\n        let projectId: number = this.state.currentProject!.projectID;\r\n        let sucess: Promise<boolean> = MainController.getInstance().getFacade().loadProject( projectId );\r\n        this.state.wait! = sucess;\r\n        this.state.currentState = States.waitForDB;\r\n        this.page.setState( this.state );\r\n        sucess.then( ( value: boolean ) => {\r\n            if ( value ) {\r\n                let deliveryConroller: DeliveryController = new DeliveryController( this.state.chosenAIModel! );\r\n                MainController.getInstance().changeTo( deliveryConroller );\r\n            } else {\r\n                this.state.currentState = States.LoadError;\r\n            }\r\n        } );\r\n        this.page.setState( this.state );\r\n    }\r\n}","import { IDataPoint } from \"./DataPoint\";\r\nimport { IDevice } from \"./DeviceData\";\r\nimport { ILabel } from \"./Label\";\r\nimport { LanguageMessages } from \"./Language\";\r\nimport { ISpan } from \"./TimeSpan\";\r\nimport { IProject } from \"./User\";\r\n\r\n//Die Schnittstelle zur Datenbank.\r\nexport class DatabaseConnector {\r\n  private static readonly databasePHPURL: string = \"/src/database/index.php\";\r\n  private static lastProjectUpdate: number = 0;\r\n\r\n  /**\r\n   * Gibt Name und Code jeder verfügbaren Sprache zurück\r\n   */\r\n  async getLanguageMetas(): Promise<{ languageCode: number, languageName: string; }[]> {\r\n    const result: { languageCode: number, languageName: string; }[] = await this.sendRequest(\"get_language_metas\");\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Läd die Sprache mit dem gegebenen Sprachcode, falls dieser in der Datenbank verfügbar ist\r\n   * @param languageCode Sprachcode\r\n   * @returns die Sprache\r\n   */\r\n  async loadLanguage(requestData: { languageCode: string; }): Promise<LanguageMessages> {\r\n    const result: LanguageMessages = await this.sendRequest(\"load_language\", requestData);\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Erzeugt ein neues Projekt in der Datenbank\r\n   * @param userID von dem Admin, der das Projekt erstellt\r\n   * @param adminEmail zur Sicherheit, muss zur ID übereinstimmen\r\n   * @param projectName der Name des neuen Projekts (Projekte dürfen nicht gleich heißen wie ein bestehendes Projekt)\r\n   * @returns ProjektID und die SessionID, falls das Projekt nicht erstellt werden konnte beides -1\r\n   */\r\n  async createProject(requestData: { userID: number, adminEmail: string, projectName: string; })\r\n    : Promise<{ projectID: number, sessionID: number; }> {\r\n    const result: { projectID: number, sessionID: number; } = await this.sendRequest(\"create_project\", requestData);\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Erzeugt einen leeren Datensatz in der Datenbank\r\n   * @param sessionID die SessionID des Projekts (Implizit die AdminID)\r\n   * @param projektID zur Sicherheit, muss zur SessionID übereinstimmen\r\n   * @param userID die UserID, der Daten anlegen möchte\r\n   * @param dataSetName der Name des Datensatzes\r\n   * @param dataRow die zu erzeugenden Datenreihen, die sensorID muss schon existieren\r\n   * @returns dataSetID (dataRowID ist implizit, da es die ID der Position im Array von dataRow ist (beginnend mit 1)), bei Fehler -1\r\n   */\r\n  async createDataSet(requestData:\r\n    { sessionID: number, projectID: number, userID: number, dataSetName: string, dataRow: { sensorID: number, datarowName?: string; }[]; })\r\n    : Promise<number> {\r\n    const dataSetID: number = (await this.sendRequest(\"create_data_set\", requestData)).dataSetID;\r\n    return dataSetID;\r\n  }\r\n\r\n  /**\r\n   * Sendet den Datenpunkt mit den übergebenen Parametern\r\n   * @param sessionID die Session ID\r\n   * @param userID zur Sicherheit, muss zur SessionID und zur DatensatzID übereinstimmen\r\n   * @param datSetID \r\n   * @param dataRowID \r\n   * @param datapoint \r\n   */\r\n  async sendDataPoint(requestData: { sessionID: number, userID: number, dataSetID: number, dataRowID: number, datapoint: IDataPoint; })\r\n    : Promise<boolean> {\r\n    const result: boolean = await this.sendRequest(\"send_data_point\", requestData);\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Sendet die Datenpunkte mit den übergebenen Parametern, falls die Verbindung abgebrochen ist um alle Datenpunkte auf einmal zu senden\r\n   * @param sessionID die Session ID\r\n   * @param userID zur Sicherheit, muss zur SessionID und zur DatensatzID übereinstimmen\r\n   * @param datSetID \r\n   * @param dataRowID \r\n   * @param datapoints alle zu sendenden Datenpunkten \r\n   */\r\n  async sendDataPointsAgain(requestData: { sessionID: number, userID: number, dataSetID: number, dataRowID: number, datapoints: IDataPoint[]; })\r\n    : Promise<boolean> {\r\n    const result: boolean = await this.sendRequest(\"send_data_points_again\", requestData);\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Lädt das Projekt mit der ensprechenden userID und ProjektID.\r\n   * @param userID \r\n   * @param adminEmail zur Sicherheit, muss zur UserID übereinstimmen\r\n   * @param projectID \r\n   * @returns Gibt die Daten zurück, als Fehler werden alle IDs auf -1 gesetzt\r\n   */\r\n  async loadProject(requestData: { userID: number, adminEmail: string, projectID: number; }): Promise<IProject> {\r\n    let time: number = new Date().getMilliseconds();\r\n    const result: IProject = await this.sendRequest(\"load_project\", requestData);\r\n    if (result.projectID != null) {\r\n      DatabaseConnector.lastProjectUpdate = time;\r\n    }\r\n    return result;\r\n  }\r\n\r\n  /* Methode die noch nicht benutzt wird aber eventuell das laufgeschehen verbessern\r\n  /**\r\n   * Lädt das Projekt mit der ensprechenden userID und ProjektID.\r\n   * @param userID \r\n   * @param adminEmail zur Sicherheit, muss zur UserID übereinstimmen\r\n   * @param projectID \r\n   * @returns Gibt die Daten zurück, als Fehler werden alle IDs auf -1 gesetzt\r\n   \r\n  async updateProject(requestData1: { userID: number, adminEmail: string, projectID: number; }): Promise<{\r\n    projectID: number, sessionID: number, projectName: string, projectData?: {\r\n      aiModelID?: number[],\r\n      dataSet: {\r\n        dataRowSensors: SensorData[], dataSetID: number, dataSetName: string, generateDate: number,\r\n        dataRows: {\r\n          dataRowID: number, recordingStart: number,\r\n          dataRow: { value: number[], relativeTime: number; }[];\r\n        }[],\r\n        label: { name: string, labelID: number, start: number, end: number; }[];\r\n      }[];\r\n    };\r\n  }> {\r\n    const requestData: { userID: number, adminEmail: string, projectID: number, lastUpdate?: number; } = requestData1;\r\n    requestData.lastUpdate = DatabaseConnector.lastProjectUpdate;\r\n    let time: number = new Date().getMilliseconds();\r\n    const result: {\r\n      projectID: number, sessionID: number, projectName: string, projectData?: {\r\n        aiModelID?: number[],\r\n        dataSet: {\r\n          dataRowSensors: SensorData[], dataSetID: number, dataSetName: string, generateDate: number,\r\n          dataRows: {\r\n            dataRowID: number, recordingStart: number,\r\n            dataRow: { value: number[], relativeTime: number; }[];\r\n          }[],\r\n          label: { name: string, labelID: number, start: number, end: number; }[];\r\n        }[];\r\n      };\r\n    } = await this.sendRequest(\"update_project\", requestData);\r\n    if (result.projectID != null) {\r\n      DatabaseConnector.lastProjectUpdate = time;\r\n    }\r\n    return result;\r\n  }\r\n  */\r\n\r\n  /**\r\n   * Gibt von allen Projekten des angemeldeten Admins, mit der Email adminEmail, die Projekt ID und den Projekt Namen zurück\r\n   * @param userID\r\n   * @param adminEmail zur Sicherheit, muss zur UserID übereinstimmen\r\n   */\r\n  async getProjectMetas(requestData: { userID: number, adminEmail: string; })\r\n    : Promise<{ projectID: number, projectName: string, AIModelID: number[]; }[]> {\r\n    const result: { projectID: number, projectName: string, AIModelID: number[]; }[]\r\n      = await this.sendRequest(\"get_project_metas\", requestData);\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Löscht den Datensatz im Projekt welcher die angegebene ID besitzt\r\n   * @param userID\r\n   * @param adminEmail zur Sicherheit, muss zur UserID übereinstimmen\r\n   * @param projectID \r\n   * @param dataSetID \r\n   * @returns ob der Datenset erfolgreich gelöscht wurde\r\n   */\r\n  async deleteDataSet(requestData: { userID: number, adminEmail: string, projectID: number, dataSetID: number; }): Promise<boolean> {\r\n    const result: boolean = await this.sendRequest(\"delete_data_set\", requestData);\r\n    return result;\r\n  }\r\n\r\n  /**\r\n     * Registriert einen neuen Projektleiter. \r\n     * @param adminName \r\n     * @param adminEmail \r\n     * @param password \r\n     * @param device \r\n     * @returns Gibt die Daten zurück, als Fehler werden alle IDs auf -1 gesetzt\r\n     */\r\n  async registerAdmin(requestData: { adminName: string, adminEmail: string, password: string, device: IDevice; })\r\n    : Promise<{ adminID: number, device: { deviceID: number, sensorID: number[]; }; }> {\r\n    const result: { adminID: number, device: { deviceID: number, sensorID: number[]; }; } = await this.sendRequest(\"register_admin\", requestData);\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Registriert einen Datenerfasser.\r\n   * @param dataminerName \r\n   * @param sessionID die SessionID, mit der der Datenerfasser verknüpft ist, diese bestimmt in welchem Projekt die Daten abgelegt werden\r\n   * @param device \r\n   * @returns Gibt die Daten zurück, als Fehler werden alle IDs auf -1 gesetzt\r\n   */\r\n  async registerDataminer(requestData: { dataminerName: string, sessionID: number, device: IDevice; })\r\n    : Promise<{\r\n      dataminerID: number,\r\n      device: { deviceID: number, sensorID: number[]; },\r\n      project: { projectID: number, projectName: string, sessionID: number; };\r\n    }> {\r\n    const result: {\r\n      dataminerID: number,\r\n      device: { deviceID: number, sensorID: number[]; },\r\n      project: { projectID: number, projectName: string, sessionID: number; };\r\n    }\r\n      = await this.sendRequest(\"register_dataminer\", requestData);\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Registriert einen KI-Anwender\r\n   * @param aiModelUserName \r\n   * @param modelID \r\n   * @param device \r\n   * @returns Gibt die Daten zurück, als Fehler werden alle IDs auf -1 gesetzt\r\n   */\r\n  async registerAIModelUser(requestData: { aiModelUserName: string, modelID: number, device: IDevice; })\r\n    : Promise<{\r\n      aiModelUserID: number,\r\n      device: { deviceID: number, sensorID: number[]; },\r\n      project: { projectID: number, projectName: string, sessionID: number; };\r\n    }> {\r\n    const result: {\r\n      aiModelUserID: number,\r\n      device: { deviceID: number, sensorID: number[]; },\r\n      project: { projectID: number, projectName: string, sessionID: number; };\r\n    }\r\n      = await this.sendRequest(\"register_ai_model_user\", requestData);\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Meldet den Admin an. \r\n   * @param email \r\n   * @param password \r\n   */\r\n  async loginAdmin(requestData: { adminEmail: string, password: string; })\r\n    : Promise<{ admin: { adminID: number, deviceID: number, adminName: string, email: string, device: IDevice; }; }> {\r\n    const result: { admin: { adminID: number, deviceID: number, adminName: string, email: string, device: IDevice; }; }\r\n      = await this.sendRequest(\"login_admin\", requestData);\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Erstellt ein Label\r\n   * @param sessionID \r\n   * @param userID \r\n   * @param datasetID \r\n   * @param label \r\n   * @returns labelID\r\n   */\r\n  async createLabel(requestData: { sessionID: number, userID: number, datasetID: number, label: { span: ISpan, labelName: string; }; }): Promise<number> {\r\n    const result: number = (await this.sendRequest(\"create_label\", requestData)).labelID;\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Setzt dem bestehenden Label neue Werte\r\n   * @param sessionID \r\n   * @param userID \r\n   * @param datasetID \r\n   * @param label \r\n   */\r\n  async setLabel(requestData: { sessionID: number, userID: number, datasetID: number, label: { labelID: number, span: ISpan, labelName?: string; }; }): Promise<boolean> {\r\n    const result: boolean = await this.sendRequest(\"set_label\", requestData);\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Löscht das Label\r\n   * @param sessionID \r\n   * @param userID \r\n   * @param datasetID \r\n   * @param labelID \r\n   */\r\n  async deleteLabel(requestData: { sessionID: number, userID: number, dataSetID: number, labelID: number; }): Promise<boolean> {\r\n    const result: boolean = await this.sendRequest(\"delete_label\", requestData);\r\n    return result;\r\n  }\r\n\r\n  private async sendRequest(action: string, requestData?: object): Promise<any> {\r\n    const headers = { 'Content-Type': 'application/json' };\r\n    var obj;\r\n    await fetch(DatabaseConnector.databasePHPURL + \"?action=\" + action, { method: 'POST', headers, body: JSON.stringify(requestData) })\r\n      .then(response => response.json()).then(data => { obj = data; }).catch(function () {\r\n        obj = false;\r\n      });\r\n    return obj;\r\n  }\r\n}","/**\r\n * In dieser Klasse wird die aktuell geladene Sprache sowie alle Nachrichten auf dieser Sprache gespeichert.\r\n */\r\nexport class Language {\r\n  private language: LanguageMessages; //Alle Nachrichten auf der geladenen Sprache\r\n\r\n  constructor(language: LanguageMessages) {\r\n    this.language = language;\r\n  }\r\n\r\n  /**\r\n   * Gibt den Sprachen Code zurück\r\n   */\r\n  getLanguageCode(): string {\r\n    return this.language.code;\r\n  }\r\n\r\n  /**\r\n   * Gibt die geladene Sprache zurück\r\n   * @returns id mit der Nachricht in der gleichen Reihenfolge, wie angefordert.\r\n   */\r\n  getMessage(): LanguageMessages {\r\n    return this.language;\r\n  }\r\n\r\n  /**\r\n   * Setzt eine neue Sprache\r\n   * @param languagePromise die neue Sprache die geladen werden soll\r\n   */\r\n  setLanguage(language: LanguageMessages): boolean {\r\n    this.language = language;\r\n    return true;\r\n  }\r\n\r\n}\r\nexport interface LanguageMessages {\r\n  code: string;\r\n  name: string;\r\n}","import { Component } from 'react';\r\nimport title from './index.module.css';\r\n\r\nexport default class Title extends Component {\r\n\r\n    /**\r\n     * Enthält den Titel \"Datenerfassungsanwendung\"\r\n     */\r\n    render() {\r\n        return (\r\n            <div>\r\n                <h1 className={title.title}>Datenerfassung</h1>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { NotificationManager } from 'react-notifications';\r\nimport './Input.css';\r\n\r\n\r\n/**\r\n * Stellt die Funktion für Input der Einstellungen\r\n */\r\nexport default class Input extends Component {\r\n\r\n  props = {\r\n    /**\r\n     * Die Methode um die Einstellungen zu ändern\r\n     * @param recordingSettings die eingegebene Einstellungen\r\n     */\r\n    pageChangeSettings: function (recordingSettings: {\r\n      newDataSetName: string, usedSensorTypes: number[], waitTime: number, readTime: number,\r\n      availableSensorTypes: { sensorTypID: number, sensorType: string, chosen: boolean; }[];\r\n    }) { },\r\n\r\n    /**\r\n     * Die verfügbare Sensoren zu wählen\r\n     */\r\n    availableSensorTypes: [] as { sensorTypID: number, sensorType: string, chosen: boolean; }[]\r\n  };\r\n\r\n  state = {\r\n    name: \"\", //Datenname\r\n    usedSensorTypes: [] as number[], //gewählte Sensoren\r\n    leadTime: \"\", //Vorlaufzeit\r\n    collectionTime: \"\", //Erfassungsdauer\r\n  };\r\n\r\n  /**\r\n   * Erneut den Inhalt des Eingabefelds der Vorlaufzeit\r\n   * @param e Die Eingebenaktion\r\n   */\r\n  changeLeadtime = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    this.setState({\r\n      leadTime: e.target.value,\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Erneut den Inhalt des Eingabefelds der Erfassungsdauer\r\n   * @param e Die Eingebenaktion\r\n   */\r\n  changeCollectionTime = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    this.setState({\r\n      collectionTime: e.target.value,\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Erneut den Inhalt des Eingabefelds des Datennamen\r\n   * @param e Die Eingebenaktion\r\n   */\r\n  changeName = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    this.setState({\r\n      name: e.target.value,\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Aktualisiert den gewählten Sensor\r\n   * @param e Die Klickaktion\r\n   */\r\n  handleCheckBoxChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    let newAvailableSensorTypes = this.props.availableSensorTypes;\r\n    for (var i = 0; i < newAvailableSensorTypes.length; i++) {\r\n      // eslint-disable-next-line\r\n      if (newAvailableSensorTypes[i].sensorTypID == +e.target.value) {\r\n        newAvailableSensorTypes[i].chosen = !newAvailableSensorTypes[i].chosen;\r\n        this.setState({ availableSensorTypes: newAvailableSensorTypes, });\r\n        return;\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Sende die festgestellte Einstellungen\r\n   * @returns wenn die Eingabe ungültig ist\r\n   */\r\n  submit = () => {\r\n    if (\r\n      parseInt(this.state.leadTime) >= 0 &&\r\n      parseInt(this.state.collectionTime) >= 0\r\n    ) {\r\n      let availableSensorTypes = this.props.availableSensorTypes;\r\n      var usedSensorTypes: number[] = [];\r\n      for (var i = 0; i < availableSensorTypes.length; i++) {\r\n        // eslint-disable-next-line\r\n        if (availableSensorTypes[i].chosen == true) {\r\n          usedSensorTypes.push(availableSensorTypes[i].sensorTypID);\r\n        }\r\n      }\r\n      this.setState({ usedSensorTypes: usedSensorTypes });\r\n\r\n      /**\r\n       * Die eingegebene Zeit ist ungültig.\r\n       */\r\n      if (isNaN(+this.state.leadTime) || isNaN(+this.state.collectionTime)) {\r\n        NotificationManager.error(\"Die Eingabe der Zeit ist ungültig. Es sind nur ganze Zahlen erlaubt\");\r\n        return;\r\n      }\r\n\r\n      const newDataSetName = this.state.name;\r\n      const waitTime = +this.state.leadTime;\r\n      const readTime = +this.state.collectionTime;\r\n      this.props.pageChangeSettings({\r\n        newDataSetName: newDataSetName, usedSensorTypes: usedSensorTypes, waitTime: waitTime, readTime: readTime,\r\n        availableSensorTypes: availableSensorTypes\r\n      });\r\n    } else {\r\n      NotificationManager.error(\"Die Eingabe ist ungültig\");\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"input\">\r\n        <form>\r\n          Aufnahmeparameter einstellen\r\n          <br />\r\n          Vorlaufzeit:\r\n          <input\r\n            type=\"leadTime\"\r\n            value={this.state.leadTime}\r\n            onChange={this.changeLeadtime.bind(this)}\r\n          />\r\n          s<br />\r\n          Aufnahmedauer:\r\n          <input\r\n            type=\"collectionTime\"\r\n            value={this.state.collectionTime}\r\n            onChange={this.changeCollectionTime.bind(this)}\r\n          />\r\n          s<br />\r\n          Datenname:\r\n          <input\r\n            type=\"datenname\"\r\n            value={this.state.name}\r\n            onChange={this.changeName.bind(this)}\r\n          /><br />\r\n          Sensoren:\r\n          {\r\n            this.props.availableSensorTypes.map((type: { sensorTypID: number, sensorType: string, chosen: boolean; }) => {\r\n              return (<div>\r\n                <input className='checkbox' type=\"checkbox\" value={type.sensorTypID} checked={type.chosen} onChange={(e: React.ChangeEvent<HTMLInputElement>): void => this.handleCheckBoxChange(e)} />\r\n                {type.sensorType}\r\n              </div>);\r\n            })\r\n          }\r\n          <br />\r\n          <button type=\"button\" onClick={this.submit} className=\"submit-btn\">\r\n            Start\r\n          </button>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n};\r\n","import { IState } from \"../State\";\r\nimport { States } from \"../State\";\r\n\r\nexport class State implements IState {\r\n  currentState: States = States.NeedMessage;\r\n  messageIDs: number[] = [];\r\n  messages: { text: string, id: number; }[] = [];\r\n  languageCode: string = \"de\";\r\n  recordingSettings = {\r\n    newDataSetName: \"\", usedSensorTypes: [ 0, ], waitTime: -1, readTime: -1,\r\n    availableSensorTypes: [] as { sensorTypID: number, sensorType: string, chosen: boolean; }[]\r\n  };\r\n  leadTime: number = 3;\r\n  collectionTime: number = 5;\r\n  name: string = \"\";\r\n  wait?: Promise<any>;\r\n}\r\n\r\n","import Title from '../../components/StartComponents/Title';\r\nimport Input from '../../components/StartComponents/Input';\r\nimport { Page } from \"../PageInterface\";\r\nimport { PageController } from \"../../../controller/PageController\";\r\nimport { State } from \"./State\";\r\nimport ReactDOM from 'react-dom';\r\nimport { States } from '../State';\r\nimport { NotificationContainer, NotificationManager } from 'react-notifications';\r\nimport 'react-notifications/lib/notifications.css';\r\n\r\n\r\n/**\r\n * Die Darstellungsseite für die Startseite der Datenerfasser\r\n */\r\nexport class StartPage implements Page {\r\n    state: State;\r\n    observers: PageController[] = [];\r\n\r\n    /**\r\n     * Konstruktor der Darstellungseite\r\n     * @param admin Name der Person für den aufgenommen wird\r\n     */\r\n    constructor ( admin: string ) {\r\n        this.state = new State();\r\n        this.update();\r\n        NotificationManager.success( admin );\r\n    }\r\n\r\n    /**\r\n    * Update Methode der Darstellungsseite. Diese Methode wird nach jeder Änderung, die kein Seitenwechsel ist, aufgerufen. \r\n    * Die Methode enthält den Aufbau der Seite und wird von ihr gerendert.\r\n    * Es werden durch notify() alle controller über ein Update informiert und alle Seiten Elemente werden aktualisiert und erneut gerendert. \r\n    */\r\n    private update () {\r\n        this.notify();\r\n        const VDOM = (\r\n            <div>\r\n                <Title />\r\n                <Input availableSensorTypes={ this.state.recordingSettings.availableSensorTypes } pageChangeSettings={ this.changeSettings.bind( this ) } />\r\n                <NotificationContainer />\r\n            </div>\r\n\r\n        );\r\n        if (document.getElementById( 'root' ) !== null) {\r\n            ReactDOM.render( VDOM, document.getElementById( 'root' ) );\r\n        }\r\n    }\r\n\r\n    /**\r\n    * Prüft ob der Nutzer \"Start\" druckt und ändert den Zustand.\r\n    */\r\n    private changeSettings ( recordingSettings: {\r\n        newDataSetName: string,\r\n        usedSensorTypes: number[],\r\n        waitTime: number,\r\n        readTime: number,\r\n        availableSensorTypes: { sensorTypID: number, sensorType: string, chosen: boolean; }[];\r\n    } ) {\r\n        this.state.recordingSettings = recordingSettings;\r\n        this.state.currentState = States.ChangeToDataCollection;\r\n        this.notify();\r\n    }\r\n\r\n    /**\r\n    * Durch diese Methode kann sich ein Controller als Beobachter anmelden.\r\n    * @param oberver neuer Beobachter\r\n    */\r\n    attach ( observer: PageController ) {\r\n        this.observers.push( observer );\r\n    }\r\n\r\n    /**\r\n    * Durch diese Methode kann sich ein Controller als Beobachter abmelden.\r\n    * @param oberver Beobachter der zu entfernen ist\r\n    */\r\n    detach ( observer: PageController ) {\r\n        const index = this.observers.indexOf( observer, 0 );\r\n        if ( index > -1 ) {\r\n            this.observers.splice( index, 1 );\r\n        }\r\n    }\r\n\r\n    /**\r\n    * Durch diese Methode werden alle Beobachter über eine Änderung auf der Seite informiert.\r\n    */\r\n    notify () {\r\n        for ( let index = 0; index < this.observers.length; index++ ) {\r\n            const element = this.observers[ index ];\r\n            element.update();\r\n        }\r\n    }\r\n\r\n    /**\r\n    * Gibt den Status der Seite zurück\r\n    */\r\n    getState () {\r\n        return this.state;\r\n    }\r\n\r\n    /**\r\n     * Setzt einen neuen Zustand für die Seite und aktualisiert sie\r\n     * @param state neuer Zustand für die Seite\r\n     */\r\n    setState ( state: any ) {\r\n        this.state = state;\r\n        this.update();\r\n    }\r\n}\r\n","import { Component } from 'react';\r\nimport title from './index.module.css';\r\n\r\nexport default class Title extends Component {\r\n    private static readonly T_TITLE_DE: string = \"Datenerfassung\";\r\n\r\n    /**\r\n     * Enthält den Titel \"Datenerfassungsanwendung\"\r\n     */\r\n    render() {\r\n        return (\r\n            <div>\r\n                <h1 className={title.title}>{Title.T_TITLE_DE}</h1>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import { Component } from 'react';\r\n//import { NotificationManager } from 'react-notifications';\r\n\r\nexport default class Countdown extends Component {\r\n    \r\n    /**\r\n     * die Vorlaufzeit und die gewählte Sensoren, durch props übermittelt\r\n     */\r\n    props = {\r\n        countdownNumber: 5, chosenSensors: [1]\r\n    };\r\n\r\n    render() {\r\n        /**\r\n         * unterscheidet, ob die Erfassung schon begonnen hat.\r\n         */\r\n        let countdown;\r\n        if (this.props.countdownNumber > 0) {\r\n            countdown = this.props.countdownNumber;\r\n        } else {\r\n            countdown = \"Aufnahme läuft!\";\r\n        }\r\n\r\n        /**\r\n         * unterscheidet, welche Sensoren gewählt wurden\r\n         */\r\n        let sensornames: string[] = [];\r\n        for (let sensor in this.props.chosenSensors) {\r\n            switch (sensor) {\r\n                case \"0\":\r\n                    sensornames.push(\"Beschleunigungssensor\");\r\n                    break;\r\n                case \"1\":\r\n                    sensornames.push(\"Gyroskop\");\r\n                    break;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Rendert die Countdown-Komponente\r\n         */\r\n        return (\r\n            <div>\r\n                <h2>Bereit machen zur Aufnahme!</h2>\r\n                <h2>{countdown}</h2>\r\n                <h2>Verwendete Sensoren:</h2>\r\n                {\r\n                    sensornames.map((x) => {\r\n                        return <h4>{x}</h4>;\r\n                    })\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n\r\n","import { Component, CSSProperties } from 'react';\r\nimport './index.css'\r\n\r\nexport default class Diagram extends Component {\r\n    private static readonly T_ACCELEROMETER_DE: string = \"Beschleunigungssensor\";\r\n    private static readonly T_GYROSCOPE_DE: string = \"Gyroskop\";\r\n    private static readonly T_MAGNETOMETER_DE: string = \"Magnetometer\";\r\n    private static readonly T_BUTTON_NEXT_DE: string = \"Zur Abschlussseite\"\r\n\r\n    /**\r\n     * der Datensatz für Linie-Diagramm und die Funktion für Seitewechsel, durch props übermittelt\r\n     */\r\n    props = {\r\n        dataRows: [{ sensorType: 1, datapoint: [{ value: [5], relativeTime: 5 }] }],\r\n        pageChangeToFinish: function () { }\r\n    };\r\n\r\n    /**\r\n     * der Datensatz in chart-js form\r\n     */\r\n    state = {\r\n        diagrammData: {\r\n            lineLabels: [] as any[],\r\n            sensorRow: [] as any[],\r\n            datavalue: [] as any[],\r\n            time: [] as any[],\r\n            showDiagram: false,\r\n            diagram: {},\r\n            diagramLineLabels: {},\r\n            diagramData: {},\r\n            diagramOptions: {},\r\n            color: ['rgba(46,190,87,1)', 'rgba(68,24,232,1)', 'rgba(238,173,14,1)', 'rgba(178,34,34,1)', 'rgba(238, 130, 238,1)', 'rgba(0, 0, 0,1)',\r\n                'rgba(106, 90, 205,1)', 'rgba(238, 118, 0,1)', 'rgba(105, 105, 105,1)'],\r\n            csscolor: ['#2EBE57', '#CC00FF', '#EEAD0E', '#B22222', '#EE82EE', '#000000',\r\n                '#6A5ACD', '#EE7600', '#696969'],\r\n        }\r\n    };\r\n\r\n    /**\r\n     * aktualisiert das Diagramm mit dem neuen Datensatz\r\n     */\r\n    updateDiagramm() {\r\n        let diagrammData = this.state.diagrammData;\r\n        diagrammData.lineLabels = [];\r\n        diagrammData.sensorRow = [];\r\n        diagrammData.datavalue = [];\r\n        diagrammData.time = [];\r\n        diagrammData.showDiagram = true;\r\n\r\n        var datavalues = [];\r\n        for (var z = 0; z < this.props.dataRows.length; z++) {\r\n            this.state.diagrammData.sensorRow.push(this.props.dataRows[z].sensorType);\r\n            for (var dataCoordinate = 0; dataCoordinate < 3; dataCoordinate++) {\r\n                for (var j = 0; j < this.props.dataRows[z].datapoint.length; j++) {\r\n                    datavalues.push(this.props.dataRows[z].datapoint[j].value[dataCoordinate]);\r\n                }\r\n                this.state.diagrammData.datavalue.push(datavalues);\r\n                datavalues = [];\r\n            }\r\n        }\r\n        for (var j = 0; j < this.props.dataRows[0].datapoint.length; j++) {\r\n            this.state.diagrammData.time.push(this.props.dataRows[0].datapoint[j].relativeTime);\r\n        }\r\n\r\n        var newDatasets = [];\r\n        var lineLabels = [];\r\n        for (var i = 0; i < this.state.diagrammData.sensorRow.length * 3; i++) {\r\n            var coordinate = \".X\";\r\n            var sensor = this.state.diagrammData.sensorRow[(i / 3) | 0];\r\n            var sensorName = '';\r\n            /**\r\n                 * unterscheidet, welche Sensor es ist\r\n                 */\r\n             switch (sensor) {\r\n                case 2:\r\n                    sensorName = Diagram.T_ACCELEROMETER_DE;\r\n                    break;\r\n                case 3:\r\n                    sensorName = Diagram.T_GYROSCOPE_DE;\r\n                    break;\r\n                case 4:\r\n                    sensorName = Diagram.T_MAGNETOMETER_DE;\r\n                    break;\r\n            }\r\n            /**\r\n                 * unterscheidet, von welchem Koordinate dieser Datenpunkt ist\r\n                 */\r\n            if (i % 3 === 1) {\r\n                coordinate = \".Y\";\r\n            }\r\n            if (i % 3 === 2) {\r\n                coordinate = \".Z\";\r\n            }\r\n\r\n            let color: CSSProperties = { \"color\": this.state.diagrammData.csscolor[i] };\r\n            lineLabels.push(<span style={color}>■{sensorName + coordinate}<br /></span>);\r\n            newDatasets.push(\r\n                {\r\n                    label: sensor + coordinate,\r\n                    strokeColor: this.state.diagrammData.color[i],\r\n                    borderWidth: 1,\r\n                    data: this.state.diagrammData.datavalue[i],\r\n                }\r\n            );\r\n        }\r\n        const data = {\r\n            labels: this.state.diagrammData.time,\r\n            datasets: newDatasets\r\n        };\r\n        const options = {\r\n            datasetFill: false,\r\n            pointDotRadius: 2,\r\n            pointHitDetectionRadius: 1,\r\n            offsetGridLines: false,\r\n            pointDot: false,\r\n            title: {\r\n                display: true,\r\n                text: 'Chart.js bar Chart'\r\n            },\r\n            scales: {\r\n                xAxes: [{\r\n                    ticks: {\r\n                        beginAtZero: true,\r\n                        callback: function (value: number) { if (Number.isInteger(value)) { return value; } },\r\n                        stepSize: 1\r\n                    }\r\n                }]\r\n            }\r\n        };\r\n        diagrammData = this.state.diagrammData;\r\n        diagrammData.diagramData = data;\r\n        diagrammData.lineLabels = lineLabels;\r\n        diagrammData.diagramOptions = options;\r\n    }\r\n\r\n    submit = () => {\r\n        this.props.pageChangeToFinish();\r\n    };\r\n\r\n    /**\r\n     * Rendert diese Diagram-Komponente\r\n     * @returns Diagramm-Teil\r\n     */\r\n    render() {\r\n        var LineChart = require(\"react-chartjs\").Line;\r\n        this.updateDiagramm();\r\n        return (\r\n            <div>\r\n                {this.state.diagrammData.lineLabels}\r\n                <LineChart data={this.state.diagrammData.diagramData} options={this.state.diagrammData.diagramOptions} width=\"400\" height=\"200\" redraw />\r\n                <button className = 'button' type=\"button\" onClick={this.submit}>{Diagram.T_BUTTON_NEXT_DE}</button>\r\n            </div>\r\n        );\r\n    }\r\n}","import { IState } from \"../State\";\r\nimport { States } from \"../State\";\r\n\r\nexport class State implements IState {\r\n  currentState: States = States.NeedMessage;\r\n  messageIDs: number[] = [];\r\n  messages: { text: string, id: number; }[] = [];\r\n  languageCode: string = \"de\";\r\n  leadTime: number = -1;\r\n  usedSensorNames: string[] = [];\r\n  dataRows?: { sensorType: number, datapoint: { value: number[], relativeTime: number; }[]; }[] = [{ sensorType: 1, datapoint: [{ value: [5], relativeTime: 5 }] }];\r\n  dataPoints?: { rowId: number, sensorType: number, value: number[]; relativeTime: number; }[] = [];\r\n  recordingSettings?: { newDataSetName: string, usedSensorTypes: number[], readTime: number, waitTime: number, availableSensorTypes: { sensorTypID: number; sensorType: string; chosen: boolean; }[]; } \r\n  = { newDataSetName: \"null\", usedSensorTypes: [-1], readTime: -1, waitTime: -1, availableSensorTypes: [{ sensorTypID: -1, sensorType: \"null\", chosen: false }]}\r\n}","import Title from '../../components/DataCollectionComponents/Title';\r\nimport Countdown from '../../components/DataCollectionComponents/Countdown';\r\nimport Diagram from '../../components/DataCollectionComponents/Diagram';\r\nimport { Page } from \"../PageInterface\";\r\nimport { PageController } from \"../../../controller/PageController\";\r\nimport { State } from \"./State\";\r\nimport ReactDOM from 'react-dom';\r\nimport { States } from '../State';\r\nimport { NotificationContainer } from 'react-notifications';\r\nimport 'react-notifications/lib/notifications.css';\r\n\r\n/**\r\n * Darstellungsseite der Datenerfassungsseite\r\n */\r\nexport class DataCollectionPage implements Page {\r\n    state: State;\r\n    observers: PageController[] = [];\r\n\r\n    /**\r\n    * Konstruktor der Darstellungsseite.\r\n    */\r\n    constructor () {\r\n        this.state = new State();\r\n    }\r\n\r\n    /**\r\n    * Update Methode der Darstellungsseite. Diese Methode wird nach jeder Änderung, die kein Seitenwechsel ist, aufgerufen. \r\n    * Die Methode enthält den Aufbau der Seite und wird von ihr gerendert.\r\n    * Es werden durch notify() alle controller über ein Update informiert und alle Seiten Elemente werden aktualisiert und erneut gerendert. \r\n    */\r\n    private update () {\r\n        this.notify();\r\n        const VDOM = (\r\n            <div>\r\n                <Title />\r\n                <Countdown countdownNumber={ this.state.recordingSettings?.waitTime! } chosenSensors={ this.state.recordingSettings?.usedSensorTypes! } />\r\n                <Diagram dataRows={ this.state.dataRows! } pageChangeToFinish={ this.changeToFinish.bind( this ) } />\r\n                <NotificationContainer />\r\n            </div>\r\n        );\r\n        if ( document.getElementById( 'root' ) !== null ) {\r\n            ReactDOM.render( VDOM, document.getElementById( 'root' ) );\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Wechsel der Seite zur Fertigungsseite.\r\n     */\r\n    private changeToFinish () {\r\n        this.state.currentState = States.ChangeToFinish;\r\n        this.notify(); // Kein Update, da sonst die Seite neu rendert und der Seitenwechsel fehlschlägt\r\n    }\r\n\r\n    /**\r\n    * Durch diese Methode kann sich ein Controller als Beobachter anmelden.\r\n    * @param oberver neuer Beobachter\r\n    */\r\n    attach ( observer: PageController ) {\r\n        this.observers.push( observer );\r\n    }\r\n\r\n    /**\r\n    * Durch diese Methode kann sich ein Controller als Beobachter abmelden.\r\n    * @param oberver Beobachter der zu entfernen ist\r\n    */\r\n    detach ( observer: PageController ) {\r\n        const index = this.observers.indexOf( observer, 0 );\r\n        if ( index > -1 ) {\r\n            this.observers.splice( index, 1 );\r\n        }\r\n    }\r\n\r\n    /**\r\n    * Durch diese Methode werden alle Beobachter über eine Änderung auf der Seite informiert.\r\n    */\r\n    notify () {\r\n        for ( let index = 0; index < this.observers.length; index++ ) {\r\n            const element = this.observers[ index ];\r\n            element.update();\r\n        }\r\n    }\r\n\r\n    /**\r\n    * Gibt den Status der Seite zurück\r\n    */\r\n    setState ( state: any ) {\r\n        this.state = state;\r\n        this.update();\r\n    }\r\n\r\n    /**\r\n     * Setzt einen neuen Zustand für die Seite und aktualisiert sie\r\n     * @param state neuer Zustand für die Seite\r\n     */\r\n    getState () {\r\n        return this.state;\r\n    }\r\n}","import { MainController } from \"./MainController\";\r\nimport { Page } from \"../view/pages/PageInterface\";\r\nimport { IState, States } from \"../view/pages/State\";\r\nimport { Facade } from \"../model/Facade\";\r\nimport { State } from \"../view/pages/ModelCreationPage/State\";\r\n\r\nexport class SensorManager {\r\n    private checkList: Promise<boolean>[] = [];\r\n    private currentSensors: Sensor[] = [];\r\n    //private currentSensorIDs: number[] = [];\r\n    private facade: Facade = MainController.getInstance().getFacade();\r\n    private waitTime: number = 5;\r\n    private readTime: number = 10;\r\n    private startTime: number = 10;\r\n    private saving: boolean = true;\r\n    private page: Page | undefined = undefined;\r\n    private sensorTypes: number[] = [];\r\n    private dataPoints: { rowId: number, sensorType: number, value: number[]; relativeTime: number; }[] = [];\r\n    private dataRows: { sensorType: number, datapoint: { value: number[]; relativeTime: number; }[]; }[] = [];\r\n\r\n    /**\r\n    * Erzeugt eine neue Datenreihe und setzt diese damit als momentan benutzte Datenreihe. \r\n    * @param sensorTypes Die Angabe der zu benutzenden Sensoren. Die position im Array bestimmt die DataRow ID jedes Sensors.\r\n    * @returns Gibt true für ein erfolgreiches Erstellen eines Dataensatzes zurück, gibt sonst false zurück.\r\n    */\r\n    setUpDataRead ( sensorTypes: number[], dataSetName: string, waitTime: number, readTime: number, saving: boolean ) {\r\n        //this.currentSensorIDs = sensorTypes;\r\n        // this.waitTime = waitTime * this.TO_SECOND;\r\n        //this.readTime = readTime * this.TO_SECOND;\r\n        //this.startTime = readTime * this.TO_SECOND;\r\n        this.waitTime = waitTime;\r\n        this.readTime = readTime;\r\n        this.saving = saving;\r\n        this.sensorTypes = sensorTypes;\r\n        for ( let index = 0; index < sensorTypes.length; index++ ) {\r\n            switch ( sensorTypes[ index ] ) {\r\n                case 2:\r\n                    let accSensor = new Accelerometer( { frequency: 60 } );\r\n                    this.currentSensors.push( accSensor );\r\n                    accSensor.addEventListener( 'reading', e => {\r\n                        this.getData( accSensor, index, sensorTypes[ index ] );\r\n                    } );\r\n                    accSensor.addEventListener( 'error', event => {\r\n                        console.log( event.error.name, event.error.message );\r\n                    } );\r\n                    break;\r\n                case 3:\r\n                    let gyroSensor = new Gyroscope( { frequency: 60 } );\r\n                    this.currentSensors.push( gyroSensor );\r\n                    gyroSensor.addEventListener( 'reading', e => {\r\n                        this.getData( gyroSensor, index, sensorTypes[ index ] );\r\n                    } );\r\n                    gyroSensor.addEventListener( 'error', event => {\r\n                        console.log( event.error.name, event.error.message );\r\n                    } );\r\n                    break;\r\n                case 4:\r\n                    let magSensor = new Magnetometer( { frequency: 60 } );\r\n                    this.currentSensors.push( magSensor );\r\n                    magSensor.addEventListener( 'reading', e => {\r\n                        this.getData( magSensor, index, sensorTypes[ index ] );\r\n                    } );\r\n                    magSensor.addEventListener( 'error', event => {\r\n                        console.log( event.error.name, event.error.message );\r\n                    } );\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n        return ( this.facade.createDataSet( sensorTypes, dataSetName ) );\r\n    }\r\n\r\n    /**\r\n    * Erfasst für den momentanene Datensatz Daten und sendet diese an die Explorer Datenbank.\r\n    * Wartet zuerst für die angegebene Wartezeit und nimmt dann für die angegeben Lesezeit daten auf.\r\n    */\r\n    readData ( page: Page ) {\r\n        this.page = page;\r\n        let state: IState = page.getState();\r\n        state.recordingSettings!.usedSensorTypes = this.sensorTypes;\r\n        state.currentState = States.waitForDB;\r\n        page.setState( state );\r\n        //Warte für waitTime und update dabei die Seite\r\n        let intervalId1 = setInterval( () => {\r\n            this.waitTime = this.waitTime - 1;\r\n            state.recordingSettings!.waitTime = this.waitTime;\r\n            //state.currentState = States.SetWaitTime;\r\n            page.setState( state );\r\n            if ( this.waitTime === 0 ) {\r\n                clearInterval( intervalId1 );\r\n                this.startTime = new Date().getTime();\r\n                for ( let index = 0; index < this.currentSensors.length; index++ ) {\r\n                    this.currentSensors[ index ].start();\r\n                }\r\n                //Nimm Daten auf verteile sie an die Seite und das Modell. Erneuere dabei die aufnahmezeit auf der Seite\r\n                let intervalId2 = setInterval( () => {\r\n                    this.readTime = this.readTime - 1;\r\n                    while ( this.dataPoints.length > 0 ) {\r\n                        let newDataPoint = this.dataPoints.shift()!;\r\n                        state.dataPoints!.push( newDataPoint );\r\n                        this.checkList.push( MainController.getInstance().getFacade().sendDataPoint( newDataPoint.rowId, { value: newDataPoint.value, relativeTime: newDataPoint.relativeTime } ) );\r\n                        page.setState( state );\r\n                    }\r\n                    if ( this.readTime === 0 ) {\r\n                        clearInterval( intervalId2 );\r\n                        for ( let index = 0; index < this.currentSensors.length; index++ ) {\r\n                            this.currentSensors[ index ].stop();\r\n                        }\r\n                        this.checkForErrors( state, page );\r\n                    }\r\n                }, 1000 );\r\n            }\r\n        }, 1000 );\r\n    }\r\n\r\n    private async checkForErrors ( state: State, page: Page ) {\r\n        for ( const element of this.checkList ) {\r\n            let errorWhenSend = !( await element );\r\n            if ( errorWhenSend ) {\r\n                state.currentState = States.LoadError;\r\n            }\r\n        }\r\n        page.setState( state );\r\n    }\r\n\r\n    private saveDatapointinRow ( dataPoint: { rowId: number, sensorType: number, value: number[]; relativeTime: number; } ) {\r\n        while ( this.dataRows.length - 1 < dataPoint.rowId ) {\r\n            this.dataRows.push( { sensorType: -1, datapoint: [] } );\r\n        }\r\n        this.dataRows[ dataPoint.rowId ].sensorType = dataPoint.sensorType;\r\n        this.dataRows[ dataPoint.rowId ].datapoint.push( { value: dataPoint.value, relativeTime: dataPoint.relativeTime } );\r\n\r\n        if ( this.page !== undefined ) {\r\n            let state = this.page.getState();\r\n            state.dataRows = this.dataRows;\r\n            this.page.setState( state );\r\n        }\r\n\r\n        //PubSub.publish( 'startDiagram', this.dataRows );\r\n        //PubSub.publish( 'finishDiagram', this.dataRows );\r\n    }\r\n\r\n    /**\r\n     * @returns Gibt als Zahl die Zeit in Sekunden zurück, für welche vor der Aufnahme gewartet wird. \r\n     */\r\n    getWaitTime () {\r\n        return this.waitTime;\r\n    }\r\n\r\n    /**\r\n     * @returns Gibt als Zahl die Zeit in Sekunden zurück, für welche die Aufnahme läuft. \r\n     */\r\n    getReadTime () {\r\n        return this.readTime;\r\n    }\r\n\r\n    /**\r\n    * Holt die Sensordaten für einen Sensor\r\n    * @param sensor der Sensor von dem die Daten gelsen werden\r\n    * @param sensorType Die ID des Sensortypes\r\n    */\r\n    private getData ( sensor: Magnetometer | Gyroscope | Accelerometer, rowId: number, sensorType: number ) {\r\n        if ( sensor.x === undefined || sensor.y === undefined || sensor.z === undefined ) {\r\n            return;\r\n        }\r\n        const point = { rowId, sensorType, value: [ sensor.x!, sensor.y!, sensor.z! ], relativeTime: ( new Date().getTime() - this.startTime ) / 1000 };\r\n        this.dataPoints.push( point );\r\n        this.saveDatapointinRow( point );\r\n    }\r\n\r\n    /**\r\n    * Prüft welche Sensoren verfügbar sind.\r\n    * @returns ein Array welches alle SensorTypeIDs enthält die verfügbar sind\r\n    */\r\n    async getAvailableSensors (): Promise<{ sensorTypID: number; sensorType: string; }[]> {\r\n        let sensors: { sensorTypID: number; sensorType: string; }[] = [];\r\n\r\n\r\n        // sensors.push({ sensorTypID: 2, sensorType: \"Accelerometer\" }); //Nur test\r\n        // return sensors;//Nur test\r\n\r\n\r\n        let accelerometer = new Accelerometer( { frequency: 60 } );\r\n        let accelerometerExist = this.existSensor( accelerometer );\r\n        let gyroscope = new Gyroscope( { frequency: 60 } );\r\n        let gyroscopeExist = this.existSensor( gyroscope );\r\n        /*let magnetometer = new Magnetometer();            Nicht definiert?\r\n        let magnetometerExist = this.test(magnetometer);*/\r\n\r\n        if ( await accelerometerExist ) {\r\n            sensors.push( { sensorTypID: 2, sensorType: \"Accelerometer\" } );\r\n        }\r\n        if ( await gyroscopeExist ) {\r\n            sensors.push( { sensorTypID: 3, sensorType: \"Gyroscope\" } );\r\n        }\r\n\r\n        /*if (await magnetometerExist) {\r\n            sensors.push({ sensorTypID: 4, sensorType: \"Magnetometer\" });\r\n        }*/\r\n        return sensors;\r\n    }\r\n\r\n    private async existSensor ( sensor: Sensor ): Promise<boolean> {\r\n        var finish = false;\r\n        sensor.addEventListener( 'reading', e => {\r\n            finish = true;\r\n            sensor.stop();\r\n        } );\r\n        sensor.start();\r\n        await this.wait( 1000 );\r\n        sensor.stop();\r\n        return finish;\r\n    }\r\n    private async wait ( ms: number ) {\r\n        return new Promise( resolve => setTimeout( resolve, ms ) );\r\n    }\r\n}","import { IState } from \"../State\";\r\nimport { States } from \"../State\";\r\n\r\nexport class State implements IState {\r\n  currentState: States = States.NeedMessage;\r\n  messageIDs: number[] = [];\r\n  messages: { text: string, id: number; }[] = [];\r\n  languageCode: string = \"de\";\r\n  recordingSettings = {\r\n    newDataSetName: \"\", usedSensorTypes: [ 0, ], waitTime: -1, readTime: -1,\r\n    availableSensorTypes: [] as { sensorTypID: number, sensorType: string, chosen: boolean; }[]\r\n  };\r\n  leadTime: number = 3;\r\n  collectionTime: number = 5;\r\n  name: string = \"\";\r\n  wait?: Promise<any>;\r\n  aiUserData?: { name: string, result: string; } = { name: \"NULL\", result: \" \" };\r\n}\r\n\r\n","import { Page } from \"../PageInterface\";\r\nimport { PageController } from \"../../../controller/PageController\";\r\nimport { State } from \"./State\";\r\nimport ReactDOM from 'react-dom';\r\nimport { NotificationContainer } from 'react-notifications';\r\nimport 'react-notifications/lib/notifications.css';\r\nimport './Result.css';\r\n\r\n\r\n/**\r\n * Die Darstellungsseite für die Startseite der Datenerfasser\r\n */\r\nexport class ResultPage implements Page {\r\n    private state: State;\r\n    private observers: PageController[] = [];\r\n\r\n    private static readonly PAGE_TITLE = \"Ergebnis\"\r\n    private static readonly CLASSIFY = \"Klassifiziere, bitte warten\"\r\n    private static readonly RELOAD = \"Erneut klassifizieren\"\r\n\r\n    /**\r\n     * Konstruktor der Darstellungseite\r\n     * @param admin Name der Person für den aufgenommen wird\r\n     */\r\n    constructor() {\r\n        this.state = new State();\r\n        this.update();\r\n    }\r\n\r\n    /**\r\n    * Update Methode der Darstellungsseite. Diese Methode wird nach jeder Änderung, die kein Seitenwechsel ist, aufgerufen. \r\n    * Die Methode enthält den Aufbau der Seite und wird von ihr gerendert.\r\n    * Es werden durch notify() alle controller über ein Update informiert und alle Seiten Elemente werden aktualisiert und erneut gerendert. \r\n    */\r\n    private update() {\r\n        this.notify();\r\n        let VDOM = (\r\n            <div>\r\n                <h2 className='title'>{ResultPage.PAGE_TITLE}</h2>\r\n                <h1 className='wait'>{ResultPage.CLASSIFY}</h1>\r\n                <NotificationContainer />\r\n            </div>)\r\n        if (this.state.aiUserData!.result !== \" \") {\r\n            VDOM = (\r\n                <div>\r\n                    <h2 className='title'>Ergebnis</h2>\r\n                    <h1>{this.state.aiUserData!.result}</h1>\r\n                    <button className='button' onClick = {this.reloadPage}>{ResultPage.RELOAD}</button>\r\n                    <NotificationContainer />\r\n                </div>\r\n            );\r\n        }\r\n        if (document.getElementById('root') !== null) {\r\n            ReactDOM.render(VDOM, document.getElementById('root'));\r\n        }\r\n    }\r\n\r\n\r\n    reloadPage() {\r\n        window.location.reload()\r\n    }\r\n\r\n    /**\r\n    * Durch diese Methode kann sich ein Controller als Beobachter anmelden.\r\n    * @param oberver neuer Beobachter\r\n    */\r\n    attach(observer: PageController) {\r\n        this.observers.push(observer);\r\n    }\r\n\r\n    /**\r\n    * Durch diese Methode kann sich ein Controller als Beobachter abmelden.\r\n    * @param oberver Beobachter der zu entfernen ist\r\n    */\r\n    detach(observer: PageController) {\r\n        const index = this.observers.indexOf(observer, 0);\r\n        if (index > -1) {\r\n            this.observers.splice(index, 1);\r\n        }\r\n    }\r\n\r\n    /**\r\n    * Durch diese Methode werden alle Beobachter über eine Änderung auf der Seite informiert.\r\n    */\r\n    notify() {\r\n        for (let index = 0; index < this.observers.length; index++) {\r\n            const element = this.observers[index];\r\n            element.update();\r\n        }\r\n    }\r\n\r\n    /**\r\n    * Gibt den Status der Seite zurück\r\n    */\r\n    getState() {\r\n        return this.state;\r\n    }\r\n\r\n    /**\r\n     * Setzt einen neuen Zustand für die Seite und aktualisiert sie\r\n     * @param state neuer Zustand für die Seite\r\n     */\r\n    setState(state: any) {\r\n        this.state = state;\r\n        this.update();\r\n    }\r\n}","import { Page } from \"../view/pages/PageInterface\";\r\nimport { StartPage } from \"../view/pages/StartPage\";\r\nimport { DataCollectionPage } from \"../view/pages/DataCollectionPage/index\";\r\nimport { IState, States } from \"../view/pages/State\";\r\nimport { PageController } from \"./PageController\";\r\nimport { SensorManager } from \"./SensorManager\";\r\nimport { MainController } from \"./MainController\";\r\nimport { ResultPage } from \"../view/pages/ResultPage/Result\";\r\n\r\n\r\n/**\r\n* Controller welcher für die Klassifizierung verantworlich ist.\r\n*/\r\nexport class AIController implements PageController {\r\n    /**\r\n     * Der Name des KI-Modell-Nutzers in der Datenbank. Wird auch verwendet, um ihn später zu identifizieren...\r\n     */\r\n    public static readonly AI_MODEL_USER_NAME: string = \"KI-Modell-Anwender\";\r\n    private modelID: number;\r\n    /**\r\n    * Für die Verwaltung der Sensoren verantwortlich\r\n    */\r\n    private sensorManager: SensorManager;\r\n    /**\r\n    * Seite welche gerade von dem Controller verwaltet wird\r\n    */\r\n    private page: Page;\r\n    /**\r\n    * Status der Seite\r\n    */\r\n    private state: IState;\r\n    /**\r\n    * Die Attribute welche aus der URL genommen werden. Sollten aiID und Sensor Typen beinhalten\r\n    */\r\n    private urlParams: URLSearchParams;\r\n\r\n    private dataSetID = 0;\r\n    /**\r\n    * Der Constructor des Controllers verarbeitet die URL bereitet den Sensormanager vor und setzt die startpage auf.\r\n    */\r\n    constructor(modelID: number) {\r\n        const queryString = window.location.search;\r\n        this.urlParams = new URLSearchParams(queryString);\r\n        this.sensorManager = new SensorManager();\r\n        this.page = new StartPage(\"Willkomen!\");\r\n        this.page.attach(this);\r\n        this.state = this.page.getState();\r\n        //TODO Beim Registrieren des AIModelUsers sollte der Name weg oder eine Möglichkeit bestehen den Namen zu beziehen\r\n        MainController.getInstance().getFacade().registerDataminer(AIController.AI_MODEL_USER_NAME, -1);\r\n        this.modelID = modelID;\r\n        this.setUpSensorShown();\r\n        this.page.setState(this.state);\r\n        this.update();\r\n    }\r\n\r\n    private setUpSensorShown() {\r\n        let sensorTypes: number[] = this.urlParams.get(\"sensorTypes\")!.split(\",\").map(x => +x);\r\n        let text: string = \"Sie benötigen folgenede Sensoren: \";\r\n        for (const element of sensorTypes) {\r\n            switch (element) {\r\n                case 2:\r\n                    text += \"Beschleunigungssensor \";\r\n                    break;\r\n                case 3:\r\n                    text += \"Gyroskop \";\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n        this.state.recordingSettings!.availableSensorTypes.push({ sensorTypID: -1, sensorType: text, chosen: true });\r\n    }\r\n\r\n    /**\r\n     * Die Update Methode des Seitenverwalters.\r\n     */\r\n    update() {\r\n        this.state = this.page.getState();\r\n        switch (this.state.currentState) {\r\n            case States.ChangeToDataCollection:\r\n                this.start();\r\n                break;\r\n            case States.ChangeToFinish:\r\n                this.changeToFinish();\r\n                break;\r\n            case States.ClassifyResult:\r\n                this.classifyResult();\r\n                break;\r\n            case States.SetLanguage:\r\n                this.page.setState(MainController.getInstance().setLanguage(this.state.languageCode));\r\n                break;\r\n            case States.NeedMessage:\r\n                this.state.messages = MainController.getInstance().getMessage(this.state.messages)!;\r\n                this.state.currentState = States.waitForDB;\r\n                this.page.setState(this.state);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Holt sich alle wichtigen Daten für die Datenaufnahme aus der momentanen Seite. Darauf wird mit dem Sensormanager\r\n     * die Datenaufnahme initialisiert. Zum Schluss wird der Seitenwechsel zur Erfassungseite durchgeführt. \r\n     */\r\n    private async start() {\r\n        let sensorTypes: number[] = this.urlParams.get(\"sensorTypes\")!.split(\",\").map(x => +x);\r\n        let dataSetName: string = \"Undefined\";\r\n        let waitTime = this.state.recordingSettings!.waitTime;\r\n        let readTime = this.state.recordingSettings!.readTime;\r\n        this.dataSetID = await this.sensorManager.setUpDataRead(sensorTypes, dataSetName, waitTime, readTime, false);\r\n        this.page.detach(this);\r\n        this.page = new DataCollectionPage();\r\n        this.page.attach(this);\r\n        this.state.leadTime = this.sensorManager.getWaitTime();\r\n        this.state = this.page.getState();\r\n        this.sensorManager.readData(this.page);\r\n    }\r\n\r\n    /**\r\n     * Wechselt nach der Aufnahme des Datensatzes zur FinishPage.\r\n     */\r\n    //TODO Seite sollte für den AIModelUser noch angepasst werden. Hier wird ja nur Klassifiziert.\r\n    private changeToFinish() {\r\n        this.page.detach(this);\r\n        this.page = new ResultPage();\r\n        this.page.attach(this);\r\n        this.state = this.page.getState();\r\n        this.state.dataRows! = MainController.getInstance().getFacade().getCurrentDataRows().dataRows!;\r\n        this.state.currentState = States.ClassifyResult;\r\n        this.page.setState(this.state);\r\n\r\n    }\r\n\r\n    /**\r\n     * Klassifiziert den Datensatz.\r\n     */\r\n    private classifyResult() {\r\n        MainController.getInstance().getFacade().classify(+this.urlParams.get(\"modelID\")!, this.dataSetID, this.callback.bind(this));\r\n    }\r\n\r\n    /**\r\n     * Die Methode wird durch das Model aufgerufen falls ein Ergebnis der Klassifiziereung vorhanden ist.\r\n     */\r\n    public callback(prediction: any): any {\r\n        if (prediction === undefined) {\r\n            this.state.aiUserData!.result = \"Fehler bei der Klassifizierung\";\r\n\r\n        } else {\r\n            this.state.aiUserData!.result = prediction;\r\n        }\r\n        this.state.currentState = States.waitForDB;\r\n        this.page.setState(this.state);\r\n        const x: any = undefined;\r\n        return x;\r\n    }\r\n}","/**\r\n * Die Klasse DeviceData speichert Informationen über das Gerät\r\n */\r\nexport abstract class DeviceData {\r\n  private id: number;\r\n  private MACADDRESS: string;\r\n  private name: string;\r\n  private firmware: string;\r\n  private generation: string;\r\n  protected abstract deviceType: string;\r\n\r\n  /**\r\n   * Erstellt ein neues Gerät\r\n   * @param deviceID die globale GeräteID\r\n   * @param MACADRESS \r\n   * @param deviceName \r\n   * @param firmware \r\n   * @param generation \r\n   */\r\n  protected constructor(deviceID: number, MACADRESS: string, deviceName: string, firmware: string, generation: string) {\r\n    if (deviceID < 0) {\r\n      this.id = -1;\r\n    } else {\r\n      this.id = deviceID;\r\n    }\r\n    this.MACADDRESS = MACADRESS;\r\n    this.name = deviceName;\r\n    this.firmware = firmware;\r\n    this.generation = generation;\r\n  }\r\n\r\n  /**\r\n   * Setzt nur die DeviceID falls beim erstellen des Gerätes die ID -1 übergeben wurde\r\n   * @param deviceID \r\n   */\r\n  setDeviceID(deviceID: number): boolean {\r\n    if (this.id === -1 && deviceID >= 0) {\r\n      this.id = deviceID;\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  getID(): number {\r\n    return this.id;\r\n  }\r\n\r\n  getName(): string {\r\n    return this.name;\r\n  }\r\n\r\n  getMACADDRESS(): string {\r\n    return this.MACADDRESS;\r\n  }\r\n\r\n  getFirmware(): string {\r\n    return this.firmware;\r\n  }\r\n\r\n  getGeneration(): string {\r\n    return this.generation;\r\n  }\r\n\r\n  /**\r\n   * Prüft welches Gerät aktuell benutzt wird und gibt dazu die Passende Klasse zurück\r\n   */\r\n  static loadDevice(deviceID: number, device?: { MACADRESS: string, deviceName: string, firmware: string, generation: string, deviceType: string; }): DeviceData {\r\n    ////////////////////////////////////////////////////\r\n    //Noch herrausfinden Smartphone oder anderes Gerät//\r\n    ////////////////////////////////////////////////////\r\n    if (device != null) {\r\n      if (device.deviceType === \"Smartphone\") {\r\n        return new Smartphone(deviceID, device.MACADRESS, device.deviceName, device.firmware, device.generation);\r\n      } else if (device.deviceType === \"Desktop\") {\r\n        return new Desktop(deviceID, device.MACADRESS, device.deviceName, device.firmware, device.generation);\r\n      } else {\r\n        return new Smartphone(deviceID, device.MACADRESS, device.deviceName, device.firmware, device.generation);\r\n      }\r\n    } else {\r\n      //NUR DUMMY MUSS NOCH GEFÜLLT WERDEN\r\n      return new Smartphone(deviceID, \"\", \"\", \"\", \"\");\r\n    }\r\n  }\r\n  //protected abstract searchSensor(): void;\r\n}\r\n\r\nexport class Smartphone extends DeviceData {\r\n  protected deviceType: string = \"Smartphone\";\r\n  //protected searchSensor(): void { }\r\n}\r\n\r\nexport class Desktop extends DeviceData {\r\n  protected deviceType: string = \"Desktop\";\r\n  //protected searchSensor(): void { }\r\n}\r\n\r\nexport interface IDevice {\r\n  deviceID?: number,\r\n  deviceName: string,\r\n  deviceType: string,\r\n  firmware: string,\r\n  generation: string,\r\n  MACADRESS: string,\r\n  sensorInformation: { sensorTypeID: number, sensorName: string, sensorUniqueID: number; }[];\r\n}","/**\r\n * Diese Klasse beinhaltet nur die ID des AI Models, die auf das Model in der Datenbank verweist.\r\n */\r\nexport class AIModel {\r\n    private id: number; //Die AI Model ID.\r\n\r\n    /**\r\n     * Die übergebene ID muss mit der AIModel ID in der Datenbank übereinstimmen.\r\n     * @param id AIModel ID\r\n     */\r\n    constructor(id: number) {\r\n        this.id = id;\r\n    }\r\n\r\n    /**\r\n     * Gibt die AIModel ID zurück.\r\n     */\r\n    getID(): number {\r\n        return this.id;\r\n    }\r\n}","/**\r\n * Diese Klasse repräsentiert einen Messwert verknüpft mit einem Zeitpunkt. Der DataPoint ist das atomare Element jeglicher DataSet-Objekte.\r\n */\r\nexport class DataPoint {\r\n  private value: number[]; //Dies ist der Sensormesswert, meist x,y,z.\r\n  private relativeTime: number; //Dies ist die relative Zeit zum Start der Aufnahme in Sekunden.\r\n\r\n  /**\r\n   * Erstellt einen Datenpunkt.\r\n   * @param value Sensorwert vom Datenpunkt.\r\n   * @param relativeTime Die relative Zeit zum Start der Aufnahme in Sekunden.\r\n   */\r\n  constructor(value: number[], relativeTime: number) {\r\n    this.value = value;\r\n    this.relativeTime = relativeTime;\r\n  }\r\n\r\n  /**\r\n   * Gibt den Sensormesswert zurück.\r\n   */\r\n  public getValue(): number[] {\r\n    return this.value;\r\n  }\r\n\r\n  /**\r\n   * Gibt die relative Zeit zum Start der Aufnahme in Sekunden zurück.\r\n   */\r\n  public getRelativeTime(): number {\r\n    return this.relativeTime;\r\n  }\r\n}\r\nexport interface IDataPoint {\r\n  value: number[],\r\n  relativeTime: number;\r\n}","import { DataPoint, IDataPoint } from \"./DataPoint\";\r\nimport { SensorData } from \"./SensorData\";\r\n\r\n/**\r\n * Die Klasse DataRow beschreibt eine Reihe aufgenommener Daten eines Sensors.\r\n */\r\nexport class DataRow {\r\n  private id: number; //Dies ist die DataRow ID, diese ist eindeutig für Datensätze.\r\n  private datapoint: DataPoint[] = []; //Dies ist Datenreihe, eine Reihe von Datenpunkten.\r\n  private sensor: SensorData; //Dies ist der Sensor von dem die Daten gelesen wurden.\r\n\r\n  /**\r\n   * Eine neue Datenreihe erstellen.\r\n   * @param sensor Sensor, von dem die Daten gelesen werden.\r\n   * @param dataRowID Eine eindeutige Datenreihen ID.\r\n   */\r\n  constructor(sensor: SensorData, dataRowID: number);\r\n\r\n  /**\r\n   * Eine bereits existierende Datenreihe kann wie folgt in das Model geladen werden.\r\n   * @param sensor der Sensor von dem die Daten gelesen wurden\r\n   * @param dataRowID die ID, welche die Datenreihe bei der ersten Erstellung zugeteilt bekommen hat\r\n   * @param dataRow die aufgenommenen Daten\r\n   * @param dataRow.value der Sensor Messwert\r\n   * @param dataRow.relativeTime die relative Zeit zum Aufnahmestart\r\n   */\r\n  constructor(sensor: SensorData, dataRowID: number, dataRow: IDataPoint[]);\r\n  constructor(sensor: SensorData, dataRowID: number, dataRow?: IDataPoint[]) {\r\n    this.sensor = sensor;\r\n    this.id = dataRowID;\r\n    if (dataRow != null) {\r\n      for (let i = 0; i < dataRow.length; i++) {\r\n        this.datapoint.push(new DataPoint(dataRow[i].value, dataRow[i].relativeTime));\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Gibt die DataRow ID zurück.\r\n   */\r\n  public getID(): number {\r\n    return this.id;\r\n  }\r\n\r\n  /**\r\n   * Fügt den Datenpunkt der Datenreihe hinzu\r\n   * @param dataRow der Datenpunkt\r\n   * @returns false, falls datapoint.value leer ist oder datapoint.relativeTime < 0\r\n   */\r\n  public addDatapoint(dataRow: IDataPoint): boolean {\r\n    for (let i = 0; i < this.datapoint.length; i++) {\r\n      if (this.datapoint[i].getValue().length !== dataRow.value.length || this.datapoint[i].getRelativeTime() === dataRow.relativeTime) {\r\n        return false;\r\n      }\r\n    }\r\n    if (dataRow.value.length === 0 || dataRow.relativeTime < 0) {\r\n      return false;\r\n    } else {\r\n      this.datapoint.push(new DataPoint(dataRow.value, dataRow.relativeTime));\r\n      return true;\r\n    }\r\n\r\n  }\r\n\r\n  /**\r\n   * Gibt die Datenreihe zurück.\r\n   * @returns value ist der Messwert und relativeTime die relative Zeit in Millisekunden zum Aufnahmestart.\r\n   */\r\n  public getDataRow(): IDataRowST {\r\n    var dataRowST: IDataRowST;\r\n    var dataRow: IDataPoint[] = [];\r\n    for (let i = 0; i < this.datapoint.length; i++) {\r\n      dataRow.push({ value: this.datapoint[i].getValue(), relativeTime: this.datapoint[i].getRelativeTime() });\r\n    }\r\n    var sensorType: number = this.sensor.SensorTypeID;\r\n    dataRowST = { sensorType, datapoint: dataRow };\r\n    return dataRowST;\r\n  }\r\n}\r\nexport interface IDataRowST {\r\n  sensorType: number,\r\n  datapoint: IDataPoint[];\r\n}\r\nexport interface IDataRowRID {\r\n  dataRowID: number,\r\n  dataRow: IDataPoint[];\r\n}\r\nexport interface IDataRowSTRID {\r\n  sensorType: number,\r\n  dataRowID: number,\r\n  dataRow: IDataPoint[];\r\n}","/**\r\n * Diese Klasse repräsentiert ein Zeitfenster.\r\n * Mit start als Anfang und end als Ende des Zeitfensters.\r\n */\r\nexport class TimeSpan {\r\n  private start: number; //Startpunkt des Zeitfensters in Sekunden.\r\n  private end: number; //Enpunkt des Zeitfensters in Sekunden.\r\n\r\n  /**\r\n   * Erstellt ein Zeitfenster.\r\n   * @param start Startpunkt in Sekunden (start >= 0)\r\n   * @param end Endpunkt in Sekunden (end >= start)\r\n   */\r\n  public constructor(span: ISpan) {\r\n    if (span.start >= 0) {\r\n      this.start = span.start;\r\n    } else {\r\n      this.start = 0;\r\n    }\r\n    if (span.end >= this.start) {\r\n      this.end = span.end;\r\n    } else {\r\n      this.end = this.start;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Setzt das übergebene Zeitfenster als Zeitfenster, wenn dies den Anforderungen entspricht. (0 <= start <= end)\r\n   * @returns false, falls das Zeitfenster nicht gesetzt wurde\r\n   */\r\n  public setTimeSpan(span: ISpan): boolean {\r\n    if (span.end >= span.start && span.start >= 0) {\r\n      this.start = span.start;\r\n      this.end = span.end;\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Gibt den Startpunkt in Sekunden zurück.\r\n   */\r\n  public getStart(): number {\r\n    return this.start;\r\n  }\r\n\r\n  /**\r\n   * Gibt den Enpunkt in Sekunden zurück.\r\n   */\r\n  public getEnd(): number {\r\n    return this.end;\r\n  }\r\n}\r\nexport interface ISpan {\r\n  start: number,\r\n  end: number;\r\n}","import { ISpan, TimeSpan } from \"./TimeSpan\";\r\n\r\n/**\r\n * Diese Klasse ist fürs labeln zuständig, sie besitzt ein Zeitfenster und dazu einen Namen.\r\n */\r\nexport class Label {\r\n  private name: string; //Der Name des Labels.\r\n  private labelID: number; //Die ID des Labels.\r\n  private timeSpan: TimeSpan; //Das Zeitfenster des Labels mit Start- und Endzeit.\r\n\r\n  /**\r\n   * Erstellt ein Label.\r\n   * @param name Ist der Name des Labels.\r\n   * @param labelID Ist die eindeutige Label ID des Labels.\r\n   * @param start Ist die Startzeit des Labels.\r\n   * @param end Ist die Endzeit des Labels.\r\n   */\r\n  constructor(name: string, labelID: number, span: ISpan) {\r\n    this.name = name;\r\n    this.labelID = labelID;\r\n    this.timeSpan = new TimeSpan(span);\r\n  }\r\n\r\n  /**\r\n   * Setzt dem Label neue Werte.\r\n   * @param start Ist die neue Startzeit des Labels.\r\n   * @param end Ist die neue Endzeit des Labels.\r\n   * @param name Ist bei angabe der neue Name des Labels.\r\n   */\r\n  setLabel(span: ISpan, name?: string): boolean {\r\n    const setted: boolean = this.timeSpan.setTimeSpan(span);\r\n    if (setted) {\r\n      if (name != null) {\r\n        this.name = name;\r\n      }\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Gibt das Label als Objekt zurück.\r\n   * In diesem Objekt werden die Start- und Endzeit als \"start\" und \"end\", der Label Name als \"name\" sowie die Label ID als \"id\" übergeben.\r\n   */\r\n  getLabel(): ILabel {\r\n    var label: ILabel = {\r\n      name: this.name,\r\n      labelID: this.labelID,\r\n      span: {\r\n        start: this.timeSpan.getStart(),\r\n        end: this.timeSpan.getEnd()\r\n      }\r\n    };\r\n    return label;\r\n  }\r\n\r\n  /**\r\n   * Gibt die LabelID zurück.\r\n   */\r\n  getID(): number {\r\n    return this.labelID;\r\n  }\r\n}\r\n\r\nexport interface ILabel {\r\n  name: string,\r\n  labelID: number,\r\n  span: ISpan,\r\n  start?: number,\r\n  end?: number;\r\n}","import { IDataPoint } from \"./DataPoint\";\r\nimport { DataRow, IDataRowRID, IDataRowST, IDataRowSTRID } from \"./DataRow\";\r\nimport { ILabel, Label } from \"./Label\";\r\nimport { SensorData } from \"./SensorData\";\r\nimport { ISpan } from \"./TimeSpan\";\r\n\r\n/**\r\n * Die Klasse fasst Datenreihen, welche Sensorwerte und deren relative Zeit besitzen, zu einem Datensatz zusammen.\r\n */\r\nexport class DataSet {\r\n  private generateDate: number; //Dies ist die Erstellungszeit dieses Datensatzes in Millisekunden.\r\n  private id: number; //Dies ist die Datensatz ID.\r\n  private name: string; //Dies ist der Name des Datensatzes.\r\n  private dataRow: DataRow[] = []; //Dies sind die Datenreihen, welche zu dem Datensatz gehören.\r\n  private label: Label[] = []; //Dies sind die existierenden Labels für den Datensatz.\r\n\r\n  /**\r\n   * Eine bereits existierende Datensatz kann wie folgt in das Model geladen werden.\r\n   * @param dataRowSensors die Sensoren, von denen die Daten ausgelesen werden, \r\n   * die Anzahl muss mit der Anzahl der Datenreihen übereinstimmen. Und der i´te Sensor wird zur i´ten Datenreihe hinzugefügt.\r\n   * @param dataSetID die eindeutige Datensatz ID\r\n   * @param dataSetName der Datensatznamen\r\n   * @param generateDate die Erstellungszeit von dem Datensatz\r\n   * @param dataRows die schon existierenden Datenreihen\r\n   * @param label die schon existierenden Labels\r\n   */\r\n  constructor(dataSetID: number, dataSetName: string, generateDate: number, dataRows: IDataRowSTRID[], label?: ILabel[]) {\r\n    if (dataRows != null) {\r\n      for (let i = 0; i < dataRows.length; i++) {\r\n        this.dataRow.push(new DataRow({ SensorTypeID: dataRows[i].sensorType }, dataRows[i].dataRowID, dataRows[i].dataRow));\r\n      }\r\n    }\r\n    if (label != null) {\r\n      for (let i = 0; i < label.length; i++) {\r\n        if (label[i].span !== undefined) {\r\n          this.label.push(new Label(label[i].name, label[i].labelID, label[i].span));\r\n        } else if (label[i].start !== undefined && label[i].end !== undefined) {\r\n          this.label.push(new Label(label[i].name, label[i].labelID, { start: label[i].start!, end: label[i].end! }));\r\n        }\r\n      }\r\n    }\r\n    if (generateDate != null) {\r\n      this.generateDate = generateDate;\r\n    } else {\r\n      this.generateDate = new Date().getTime();\r\n    }\r\n    this.id = dataSetID;\r\n    this.name = dataSetName;\r\n  }\r\n\r\n  /**\r\n   * Gibt die Datensatz ID zurück.\r\n   */\r\n  public getID(): number {\r\n    return this.id;\r\n  }\r\n\r\n  /**\r\n   * Gibt den Datensatz Namen zurück.\r\n   */\r\n  public getName(): string {\r\n    return this.name;\r\n  }\r\n\r\n  addDatapoint(dataRowID: number, datapoint: IDataPoint): boolean {\r\n    for (let i = 0; i < this.dataRow.length; i++) {\r\n      if (this.dataRow[i].getID() === dataRowID) {\r\n        return this.dataRow[i].addDatapoint(datapoint);\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Gibt alle Datenreihen zurück.\r\n   * @returns Ein zwei Dimensionales Array, die Erste Dimension wählt die Datenreihe und die zweite Dimension den Datenpunkt.\r\n   */\r\n  public getDataRows(): IDataRowST[] {\r\n    var dataRows: IDataRowST[] = [];\r\n    for (let i = 0; i < this.dataRow.length; i++) {\r\n      dataRows.push(this.dataRow[i].getDataRow());\r\n    }\r\n    return dataRows;\r\n  }\r\n\r\n  /**\r\n   * Erstellt ein Label\r\n   * @param labelID die eindeutige Label ID\r\n   * @param name der Labelname\r\n   * @param start die Startzeit des Zeitfensters in Millisekunden\r\n   * @param end die Endzeit des Zeitfensters in Millisekunden\r\n   * @returns falls das Label mit der ID schon existiert wird false zurück gegeben\r\n   */\r\n  public createLabel(labelID: number, span: ISpan, labelName: string): boolean {\r\n    if (labelID < 0 || span.start < 0 || span.end < span.start) {\r\n      return false;\r\n    }\r\n    for (let i = 0; i < this.label.length; i++) {\r\n      if (this.label[i].getID() === labelID) {\r\n        return false;\r\n      }\r\n    }\r\n    this.label.push(new Label(labelName, labelID, span));\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Setzt dem Label mit der übergebenen ID neue Werte.\r\n   * @param span ist die Start- und Endzeit in Millisekunden.\r\n   * @param labelID Die Label ID, welche überarbeitet werden soll.\r\n   * @param labelName Ist bei Angabe der neue Name des Labels.\r\n   * @returns falls das Label nicht existiert wird false zurück gegeben\r\n   */\r\n  public setLabel(labelID: number, span: ISpan, labelName?: string): boolean {\r\n    for (let i = 0; i < this.label.length; i++) {\r\n      if (this.label[i].getID() === labelID) {\r\n        return this.label[i].setLabel(span, labelName);\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Löscht das Label mit der übergebenen LabelID.\r\n   * @param labelID die LabelID\r\n   */\r\n  public deleteLabel(labelID: number): boolean {\r\n    for (let i = 0; i < this.label.length; i++) {\r\n      if (this.label[i].getID() === labelID) {\r\n        this.label.splice(i, 1);\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Gibt alle Daten von allen Labeln zurück.\r\n   */\r\n  public getLabels(): ILabel[] {\r\n    var labelList: ILabel[] = [];\r\n    for (let i = 0; i < this.label.length; i++) {\r\n      labelList.push(this.label[i].getLabel());\r\n    }\r\n    return labelList;\r\n  }\r\n}\r\nexport interface IDataSet {\r\n  dataSetID: number,\r\n  dataSetName: string,\r\n  generateDate: number,\r\n  dataRows: IDataRowSTRID[],\r\n  label: ILabel[];\r\n}","import { User } from \"./User\";\r\n\r\n/**\r\n * Diese Klasse Speichert die Session informationen\r\n */\r\nexport class Session {\r\n  private id: number; //Die eindeutige ID der Session\r\n  private connectedUser: User[] = []; //Die User die mit der Projekt der Session interagieren\r\n\r\n  /**\r\n   * Erstellt eine Session\r\n   * @param id Diese ID muss global eindeutig sein\r\n   * @param admin Der Admin, dem diese Session gehört\r\n   */\r\n  constructor(id: number) {\r\n    if (id < 0) {\r\n      this.id = -1;\r\n    } else {\r\n      this.id = id;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Fügt eine User als Verbundener User zu der Session hinzu\r\n   * @param user Der User, der hinzugefügt wird\r\n   */\r\n  connectUser(user: User): boolean {\r\n    for (let i = 0; i < this.connectedUser.length; i++) {\r\n      if (this.connectedUser[i].getID() === user.getID()) {\r\n        return false;\r\n      }\r\n    }\r\n    this.connectedUser.push(user);\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Meldet einen User von der aktuellen Session ab\r\n   * @param user Der User, der abgemeldet werdern soll\r\n   */\r\n  disconnectUser(userID: number): boolean {\r\n    for (let i = 0; i < this.connectedUser.length; i++) {\r\n      if (this.connectedUser[i].getID() === userID) {\r\n        this.connectedUser.splice(i, 1);\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Gibt von allen verbundenen Usern die ID und den Namen zurück\r\n   */\r\n  getConnectedUsers(): IUserInfo[] {\r\n    var users: IUserInfo[] = [];\r\n    for (let i = 0; i < this.connectedUser.length; i++) {\r\n      users.push({ userID: this.connectedUser[i].getID(), userName: this.connectedUser[i].getName() });\r\n    }\r\n    return users;\r\n  }\r\n\r\n  /**\r\n   * Gibt die Session ID zurück\r\n   */\r\n  getID(): number {\r\n    return this.id;\r\n  }\r\n}\r\n\r\nexport interface IUserInfo {\r\n  userID: number,\r\n  userName: string;\r\n}","import { AIModel } from \"./AIModel\";\r\nimport { IDataPoint } from \"./DataPoint\";\r\nimport { IDataRowRID, IDataRowST, IDataRowSTRID } from \"./DataRow\";\r\nimport { DataSet, IDataSet } from \"./DataSet\";\r\nimport { ILabel } from \"./Label\";\r\nimport { Session } from \"./Session\";\r\nimport { ISpan } from \"./TimeSpan\";\r\n\r\n/**\r\n * Diese Klasse speichert alle Informationen zu einem Projekt.\r\n * Ein Projekt beinhaltet aufgezeichnete Datensätze (DataSet) sowie Informationen zu den Datensätzen.\r\n */\r\nexport class Project {\r\n  private id: number; //Die eindeutige Projekt ID\r\n  private name: string; //Der Name des Projektes\r\n  private session: Session; //Die Session in dem das Projekt arbeitet\r\n  private aiModel: AIModel[] = []; //Das AIModel von dem Projekt\r\n  private dataSet: DataSet[] = []; //Die Datensätze, die zu dem Projekt gehören\r\n  private currentDataSet?: DataSet; //Aktueller Datensatz\r\n\r\n  /**\r\n     * Eine bereits existierendes Projekt kann wie folgt in das Model geladen werden.\r\n     * @param projectID Die Projekt ID\r\n     * @param sessionID Die Session ID\r\n     * @param projectName Der Projektnamen\r\n     * @param admin Der Besitzer dieses Projekts für die Session\r\n     * @param aiModelID Die schon existierenden AIModel IDs\r\n     * @param dataSet Die schon existierenden Datensätze\r\n     */\r\n  constructor(projectID: number, sessionID: number, projectName: string, projectData?: IProjectData) {\r\n    this.id = projectID;\r\n    this.name = projectName;\r\n    this.session = new Session(sessionID);\r\n    if (projectData !== undefined) {\r\n      if (projectData.aiModelID !== undefined) {\r\n        for (const id of projectData.aiModelID) {\r\n          this.aiModel.push(new AIModel(id));\r\n        }\r\n      }\r\n      for (const entry of projectData.dataSet) {\r\n        let dataSet: DataSet;\r\n        dataSet = new DataSet(\r\n          entry.dataSetID,\r\n          entry.dataSetName,\r\n          entry.generateDate,\r\n          entry.dataRows,\r\n          entry.label\r\n        );\r\n        this.dataSet.push(dataSet);\r\n      }\r\n    }\r\n  }\r\n\r\n  /* Methode die noch nicht benutzt wird aber eventuell das laufgeschehen verbessern\r\n    updateProject(projectID: number, sessionID: number, projectName: string, projectData?: {\r\n      aiModelID?: number[],\r\n      dataSet: {\r\n        dataRowSensors: SensorData[], dataSetID: number, dataSetName: string, generateDate: number,\r\n        dataRows: {\r\n          dataRowID: number,\r\n          dataRow: { value: number[], relativeTime: number; }[];\r\n        }[],\r\n        label: { name: string, labelID: number, start: number, end: number; }[];\r\n      }[];\r\n    }): boolean {\r\n      if (this.id == projectID && sessionID == this.session.getID()) {\r\n        this.name = projectName;\r\n        if (projectData !== undefined) {\r\n          if (projectData.aiModelID !== undefined) {\r\n            for (const id of projectData.aiModelID) {\r\n              for (let i: number = 0; i < this.aiModel.length; i++) {\r\n                if (id == this.aiModel[i].getID()) {\r\n                  break;\r\n                }\r\n                if (i == this.aiModel.length - 1) {\r\n                  this.aiModel.push(new AIModel(id));\r\n                }\r\n              }\r\n            }\r\n          }////////////////////////////////////////////////////////TODO\r\n          /*\r\n          for (const entry of projectData.dataSet) {\r\n            let dataSet = new DataSet(\r\n              entry.dataRowSensors,\r\n              entry.dataSetID,\r\n              entry.dataSetName,\r\n              entry.generateDate,\r\n              entry.dataRows,\r\n              entry.label\r\n            );\r\n            this.dataSet.push(dataSet);\r\n          }\r\n        }\r\n        return true;\r\n      }\r\n      return false;\r\n    }\r\n  */\r\n\r\n  /**\r\n   * Gibt den Projektnamen zurück\r\n   */\r\n  getName(): string {\r\n    return this.name;\r\n  }\r\n\r\n  /**\r\n   * Löscht den Datensatz mit der DatensatzID\r\n   * @param dataSetID die Datensatz ID\r\n   */\r\n  deleteDataSet(dataSetID: number): boolean {\r\n    for (let i = 0; i < this.dataSet.length; i++) {\r\n      if (this.dataSet[i].getID() === dataSetID) {\r\n        this.dataSet.splice(i, 1);\r\n        if (this.currentDataSet != null && this.currentDataSet.getID() === dataSetID) {\r\n          delete this.currentDataSet;\r\n        }\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Gibt die Projekt ID zurück.\r\n   */\r\n  getID(): number {\r\n    return this.id;\r\n  }\r\n\r\n  /**\r\n   * Erstellt einen neuen Datensatz und setzt diesen als aktuellen Datensatz.\r\n   * @param dataRowSensors die Sensoren, von denen die Daten ausgelesen werden\r\n   * @param dataSetID die eindeutige Datensatz ID\r\n   * @param dataSetName der Datensatznamen\r\n   * @param generateDate die Erstellungszeit von dem Datensatz\r\n   */\r\n  createDataSet(dataSetID: number, dataSetName: string, generateDate: number, dataRow: IDataRowSTRID[]): boolean {\r\n    if (dataRow.length <= 0 || dataSetID < 0 || dataSetName.length <= 0 || (generateDate != null && generateDate < 0)) {\r\n      return false;\r\n    }\r\n    for (let i = 0; i < this.dataSet.length; i++) {\r\n      if (this.dataSet[i].getID() === dataSetID) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    var dataSet: DataSet = new DataSet(dataSetID, dataSetName, generateDate, dataRow);\r\n    this.dataSet.push(dataSet);\r\n    this.currentDataSet = dataSet;\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Gibt die aktuelle Datensatz ID zurück, falls diese nicht existiert wird -1 zurück gegeben\r\n   */\r\n  getCurrentDataSetID(): number {\r\n    if (this.currentDataSet != null) {\r\n      return this.currentDataSet.getID();\r\n    }\r\n    return -1;\r\n  }\r\n\r\n  /**\r\n   * Fügt den übergebenen Datenpunkt dem aktuellen Datensatz hinzu\r\n   * @param dataRowID die DatenreihenID\r\n   * @param datapoint der Datenpunkt\r\n   * @returns true, wenn der Datenpunkt zur Datenreihe hinzugefügt werden konnte\r\n   */\r\n  addDatapoint(dataRowID: number, datapoint: IDataPoint): boolean {\r\n    if (this.currentDataSet != null) {\r\n      return this.currentDataSet.addDatapoint(dataRowID, datapoint);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Gibt von allen Datensätzen Informationen zurück\r\n   * @returns dataSetID ist die DatensatzID und dataSetName ist der Datensatzname\r\n   */\r\n  getDataSetMetas(): IDataSetInfo[] {\r\n    let dataSetMetas: { dataSetID: number, dataSetName: string; }[] = [];\r\n    for (const dataSet of this.dataSet) {\r\n      dataSetMetas.push({ \"dataSetID\": dataSet.getID(), \"dataSetName\": dataSet.getName() });\r\n    }\r\n    return dataSetMetas;\r\n  }\r\n\r\n  /**\r\n   * Gibt die Datenreihen der Datensatz ID zurück und setzt diesen Datensatz als aktuellen Datensatz\r\n   * @param dataSetID die Datensatz ID von der die Datenreihen gelesen werden sollen\r\n   * @returns die Sensordaten von der Datenreihe\r\n   */\r\n  getDataRows(dataSetID: number): { dataRows: IDataRowST[]; } {\r\n    for (let i = 0; i < this.dataSet.length; i++) {\r\n      if (this.dataSet[i].getID() === dataSetID) {\r\n        this.currentDataSet = this.dataSet[i];\r\n        return { dataRows: this.dataSet[i].getDataRows() };\r\n      }\r\n    }\r\n    return { dataRows: [] };\r\n  }\r\n\r\n  /**\r\n   * Gibt die Datenreihen der aktuellen Datenreihe zurück\r\n   * @returns die Sensordaten von der Datenreihe\r\n   */\r\n  getCurrentDataRows(): { dataRows: IDataRowST[]; } {\r\n    if (this.currentDataSet != null) {\r\n      return { dataRows: this.currentDataSet.getDataRows() };\r\n    }\r\n    return { dataRows: [] };\r\n  }\r\n\r\n  /**\r\n   * Gibt die Session ID zurück\r\n   */\r\n  getSessionID(): number {\r\n    return this.session.getID();\r\n  }\r\n\r\n  /**\r\n   * Setzt dem Label mit der übergebenen ID neue Werte.\r\n   * @param start Ist die neue Startzeit des Labels.\r\n   * @param end Ist die neue Endzeit des Labels.\r\n   * @param labelID Die Label ID, welche überarbeitet werden soll.\r\n   * @param labelName Ist bei Angabe der neue Name des Labels.\r\n   * @returns falls das Label nicht existiert oder es kein aktuellen Datensatz gibt wird false zurück gegeben\r\n   */\r\n  createLabel(labelID: number, span: ISpan, labelName: string): boolean {\r\n    if (this.currentDataSet != null) {\r\n      return this.currentDataSet.createLabel(labelID, span, labelName);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Überschreibt ein bestehendes Label \r\n   * @param labelID die LabelID von dem zu überschreibenden Label\r\n   * @param span das neue Zeitfenster\r\n   * @param labelName falls das Label neu benannt werden soll\r\n   * @returns \r\n   */\r\n  setLabel(labelID: number, span: ISpan, labelName?: string): boolean {\r\n    if (this.currentDataSet != null) {\r\n      return this.currentDataSet.setLabel(labelID, span, labelName);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Löscht ein bestehendes Label mit der LabelID\r\n   * @param labelID die LabelID, von dem Label das gelöscht werden soll\r\n   * @returns \r\n   */\r\n  deleteLabel(labelID: number): boolean {\r\n    if (this.currentDataSet != null) {\r\n      return this.currentDataSet.deleteLabel(labelID);\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Gibt alle Daten von allen Labeln vom aktuellen Datensatz zurück.\r\n   * @returns leer, falls kein aktueller Datensatz existiert\r\n   */\r\n  getLabels(): { labels: ILabel[]; } {\r\n    if (this.currentDataSet != null) {\r\n      return { labels: this.currentDataSet.getLabels() };\r\n    }\r\n    return { labels: [] };\r\n  }\r\n}\r\nexport interface IDataSetInfo {\r\n  dataSetID: number,\r\n  dataSetName: string;\r\n}\r\nexport interface IProjectData {\r\n  aiModelID?: number[],\r\n  dataSet: IDataSet[];\r\n}","import { AIController } from \"../controller/AIController\";\r\nimport { IDataPoint } from \"./DataPoint\";\r\nimport { IDataRowST, IDataRowSTRID } from \"./DataRow\";\r\nimport { DeviceData, IDevice } from \"./DeviceData\";\r\nimport { ILabel } from \"./Label\";\r\nimport { IProjectData, Project } from \"./Project\";\r\nimport { SensorData } from \"./SensorData\";\r\nimport { ISpan } from \"./TimeSpan\";\r\n\r\n/**\r\n * Die Vorlage für alle existierenden Benutzer\r\n */\r\nexport abstract class User {\r\n  protected id: number; //Die eindeutige User ID\r\n  protected name: string; //Der Name des Users\r\n  protected device: DeviceData; //Das Benutzergerät des Benutzers\r\n  protected currentProject?: Project;\r\n  private dataSetID: number;\r\n\r\n  /**\r\n   * Erstellt einen Benutzer\r\n   * @param id eindeutige Benutzer ID\r\n   * @param name Name des Benutzer\r\n   */\r\n  constructor(id: number, device: DeviceData, name?: string) {\r\n    if (id < 0) {\r\n      this.id = -1;\r\n    } else {\r\n      this.id = id;\r\n    }\r\n    this.device = device;\r\n    if (name !== undefined) {\r\n      this.name = name;\r\n    } else {\r\n      this.name = this.device.getName();\r\n    }\r\n    this.dataSetID = -1;\r\n  }\r\n\r\n  /**\r\n   * Gibt vom aktuellen Projekt die aktuelle Datensatz ID zurück, falls diese nicht existiert wird -1 zurück gegeben.\r\n   */\r\n  getCurrentDataSetID(): number {\r\n    if (this.currentProject != null) {\r\n      return this.currentProject.getCurrentDataSetID();\r\n    } else {\r\n      return this.dataSetID;\r\n    }\r\n  }\r\n\r\n  setCurrentDataSetID(newID: number): void {\r\n    if (this.name === AIController.AI_MODEL_USER_NAME) {\r\n      this.dataSetID = newID;\r\n    } else {\r\n      this.dataSetID = -1;\r\n    }\r\n  }\r\n\r\n  getCurrentProjectID(): number {\r\n    if (this.currentProject != null) {\r\n      return this.currentProject.getID();\r\n    }\r\n    return -1;\r\n  }\r\n\r\n  addDatapoint(dataRowID: number, datapoint: IDataPoint): boolean {\r\n    if (this.currentProject != null) {\r\n      return this.currentProject.addDatapoint(dataRowID, datapoint);\r\n    }\r\n    return false;\r\n\r\n  }\r\n\r\n  /**\r\n   * Gibt vom aktuellen Projekt die Datenreihen der Datensatz ID zurück und setzt diesen Datensatz als aktuellen Datensatz\r\n   * @param dataSetID die Datensatz ID von der die Datenreihen gelesen werden sollen\r\n   * @returns die Sensordaten von der Datenreihe\r\n   */\r\n  getDataRows(dataSetID: number): { dataRows: IDataRowST[]; } {\r\n    if (this.currentProject != null) {\r\n      return this.currentProject.getDataRows(dataSetID);\r\n    } else {\r\n      return { dataRows: [] };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Gibt vom aktuellen Projekt die Datenreihen des aktuellen Datensatzes zurück\r\n   * @param dataSetID die Datensatz ID von der die Datenreihen gelesen werden sollen\r\n   * @returns die Sensordaten von der Datenreihe\r\n   */\r\n  getCurrentDataRows(): { dataRows: IDataRowST[]; } {\r\n    if (this.currentProject != null) {\r\n      return this.currentProject.getCurrentDataRows();\r\n    } else {\r\n      return { dataRows: [] };\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Gibt die Session ID des aktuellen Projekts zurück, -1 falls kein aktuelles Projekt existiert\r\n   */\r\n  getSessionID(): number {\r\n    if (this.currentProject != null) {\r\n      return this.currentProject.getSessionID();\r\n    } else {\r\n      return -1;\r\n    }\r\n  }\r\n\r\n  /**\r\n     * Erstellt für das aktuelle Projekt einen neuen Datensatz und setzt diesen als aktuellen Datensatz.\r\n     * @param dataSetID die eindeutige Datensatz ID\r\n     * @param dataSetName der Datensatznamen\r\n     * @param generateDate die Erstellungszeit von dem Datensatz\r\n     * @returns false, falls kein aktuelles Prokekt existiert\r\n     */\r\n  createDataSet(dataSetID: number, dataSetName: string, generateDate: number, dataRow: IDataRowSTRID[]): boolean {\r\n    if (this.currentProject != null) {\r\n      return this.currentProject.createDataSet(dataSetID, dataSetName, generateDate, dataRow);\r\n    } else {\r\n      this.setCurrentDataSetID(dataSetID);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Löscht vom aktuellen Projekt den Datensatz, mit der übergebenen Datensatz ID\r\n   * @param dataSetID die Datensatz ID\r\n   * @returns gibt die ProjektID zurück, zu dem der Datensatz gehörte, -1 falls der Datensatz nicht existiert hat\r\n   */\r\n  deleteDataSet(dataSetID: number): boolean {\r\n    if (this.currentProject != null) {\r\n      return this.currentProject.deleteDataSet(dataSetID);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Erstellt für das aktuelle Projekt und dem aktuellen Datensatz ein Label mit den übergebeben Parametern\r\n   * @param labelID Ist die eindeutige Label ID des Labels.\r\n   * @param start Ist die Startzeit des Labels.\r\n   * @param end Ist die Endzeit des Labels.\r\n   * @returns false, falls kein aktueller Datensatz existiert oder die LabelID für diesen Datensatz nicht eindeutig ist\r\n   */\r\n  createLabel(labelID: number, span: ISpan, labelName: string): boolean {\r\n    if (this.currentProject != null) {\r\n      return this.currentProject.createLabel(labelID, span, labelName);\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Setzt beim aktuellen Datensatz dem Label mit der LabelID die neu übergebenen Daten\r\n   * @param labelID \r\n   * @param start startzeit des Labels in Millisekunden\r\n   * @param end endzeit des Labels in Millisekunden\r\n   */\r\n  setLabel(labelID: number, span: ISpan, labelName?: string): boolean {\r\n    if (this.currentProject != null) {\r\n      return this.currentProject.setLabel(labelID, span, labelName);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Löscht von dem aktuellen Projekt und dem aktuellen Datensatz das Label mit der Label ID\r\n   * @param labelID die Label ID\r\n   * @returns false, falls kein aktueller Datensatz existiert oder kein Label mit der Label ID existiert\r\n   */\r\n  deleteLabel(labelID: number): boolean {\r\n    if (this.currentProject != null) {\r\n      return this.currentProject.deleteLabel(labelID);\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Gibt alle Daten von allen Labeln vom aktuellen Datensatz zurück.\r\n   * @returns leer, falls kein aktueller Datensatz existiert\r\n   */\r\n  getLabels(): { labels: ILabel[]; } {\r\n    if (this.currentProject != null) {\r\n      return this.currentProject.getLabels();\r\n    }\r\n    return { labels: [] };\r\n  }\r\n\r\n  /**\r\n  * Lädt ein bestehendes Projekt in das Model\r\n  * @param project die Projektdaten\r\n  * @returns false, falls die Projekt ID schon existiert\r\n  */\r\n  abstract loadProject(project: IProject): boolean;\r\n\r\n  /**\r\n   * Gibt alle Sensoren aus, die das Benutzergerät und das Programm unterstützt\r\n  \r\n  getDeviceSensors(sensorTypeID: number[]): SensorData[] {\r\n    return this.device.getSensors(sensorTypeID);\r\n  }\r\n\r\n  /**\r\n   * Gibt die SensorTypID der auswählbaren Sensoren zurück\r\n  getAvailableSensors(): number[] {\r\n    return this.device.getAvailableSensors();\r\n  } */\r\n\r\n  /**\r\n   * Gibt von allen Datensätzen vom aktuellen Projekt Informationen zurück\r\n   * @returns dataSetID ist die DatensatzID und dataSetName ist der Datensatzname\r\n   */\r\n  getDataSetMetas(): { dataSetID: number, dataSetName: string; }[] {\r\n    if (this.currentProject !== undefined) {\r\n      return this.currentProject.getDataSetMetas();\r\n    } else {\r\n      return [];\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Setzt einen neuen Benutzernamen\r\n   * @param name der neue Benutzername\r\n   */\r\n  setName(name: string): void {\r\n    this.name = name;\r\n  }\r\n\r\n  /**\r\n   * Gibt den Benutzernamen zurück\r\n   */\r\n  getName(): string {\r\n    return this.name;\r\n  }\r\n\r\n  /**\r\n   * Setzt ein neues Benutzergerät\r\n   * @param device das Benutzergerät\r\n   */\r\n  setDevice(device: DeviceData) {\r\n    this.device = device;\r\n  }\r\n\r\n  /**\r\n   * Gibt falls ein Benutzergerät verfügbar ist dieses zurück\r\n   */\r\n  getDevice(): { device?: DeviceData; } {\r\n    return { device: this.device };\r\n  }\r\n\r\n  /**\r\n   * Gibt die Benutzer ID zurück\r\n   */\r\n  getID(): number {\r\n    return this.id;\r\n  }\r\n}\r\n\r\n/**\r\n * Die Klasse Admin dient für einen Benutzer mit einem Account\r\n */\r\nexport class Admin extends User {\r\n  private email: string; //Die eindeutige Admin Email\r\n  private project: Project[] = []; //Alle Projekte, die zu dem Admin gehören\r\n\r\n  /**\r\n   * Zum erstellen eines Admins\r\n   * @param adminID die Admin ID\r\n   * @param deviceID die Geräte ID des Admins\r\n   * @param adminName der Name des Admins\r\n   * @param email die Emailadresse des Admins\r\n   */\r\n  constructor(adminID: number, deviceID: number, adminName: string, email: string);\r\n\r\n  /**\r\n   * Für die Implementierung eines Bestehenden Admins\r\n   * @param adminID die Admin ID\r\n   * @param deviceID die Geräte ID\r\n   * @param adminName der Admin Name\r\n   * @param email die Emailadresse des Admins\r\n   * @param device das Gerät des Admins\r\n   */\r\n  constructor(adminID: number, deviceID: number, adminName: string, email: string, device: IDevice);\r\n  ////////////////////////////////////////TODO\r\n\r\n  constructor(adminID: number, deviceID: number, adminName: string, email: string, device?: IDevice) {\r\n    super(adminID, DeviceData.loadDevice(deviceID, device), adminName);\r\n    this.email = email;\r\n  }\r\n\r\n  /**\r\n   * Implementiert die abstrakte Methode von User\r\n   */\r\n  loadProject(project: IProject): boolean {\r\n    var id = this.existProject(project.projectID);\r\n    var newProject: Project = new Project(project.projectID, project.sessionID, project.projectName, project.projectData);\r\n    this.currentProject = newProject;\r\n    if (id === -1) {\r\n      this.project.push(newProject);\r\n    } else {\r\n      this.project[id] = newProject;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  /* Methode die noch nicht benutzt wird aber eventuell das laufgeschehen verbessern\r\n    /**\r\n     * Aktuallisiert das Projekt mit den übergebenen Daten\r\n     \r\n    updateProject(project: {\r\n      projectID: number, sessionID: number, projectName: string, projectData?: {\r\n        aiModelID?: number[],\r\n        dataSet: {\r\n          dataRowSensors: SensorData[], dataSetID: number, dataSetName: string, generateDate: number,\r\n          dataRows: {\r\n            dataRowID: number,\r\n            dataRow: { value: number[], relativeTime: number; }[];\r\n          }[],\r\n          label: { name: string, labelID: number, start: number, end: number; }[];\r\n        }[];\r\n      };\r\n    }): boolean {\r\n      var id = this.existProject(project.projectID);\r\n      if (id === -1) {\r\n        return false;\r\n      } else {\r\n        return this.project[id].updateProject(project.projectID, project.sessionID, project.projectName, project.projectData);\r\n      }\r\n    }\r\n    */\r\n\r\n  /**\r\n   * Fügt ein neues Projekt mit den übergebenen Parametern hinzu und setzt dieses Projekt als aktuelles Projekt\r\n   * @param projectID die Projekt ID, diese muss für den Admin eindeutig sein\r\n   * @param sessionID die Session ID, diese muss global eindeutig sein\r\n   * @param projectName der Name des Projektes\r\n   * @returns Bei angabe einer Project ID, die schon existiert wird false zurück gegeben\r\n   */\r\n  createProject(projectID: number, sessionID: number, projectName: string): boolean {\r\n    if (this.existProject(projectID) === -1) {\r\n      var newproject: Project = new Project(projectID, sessionID, projectName);\r\n      this.project.push(newproject);\r\n      this.currentProject = newproject;\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Prüft ob ein Projekt mit der ID existiert und gibt die Stelle im Projekt array zurück an dem das Projekt liegt\r\n   * @param projectID \r\n   * @returns -1 falls das Projekt nicht existiert oder die Array Position des Projekts\r\n   */\r\n  private existProject(projectID: number): number {\r\n    for (let i = 0; i < this.project.length; i++) {\r\n      if (this.project[i].getID() === projectID) {\r\n        return i;\r\n      }\r\n    }\r\n    return -1;\r\n  }\r\n\r\n  /**\r\n   * Gibt die Admin Emailadresse zurück\r\n   */\r\n  getEmail(): string {\r\n    return this.email;\r\n  }\r\n}\r\n\r\n/**\r\n * Dataminer ist die Klasse, um Datensammler mit ihren Geräte Sensoren zu spreichern\r\n */\r\nexport class Dataminer extends User {\r\n  /**\r\n   * Erstellt einen Datensammler\r\n   * @param id die Benutzer ID\r\n   * @param name der Benutzername\r\n   * @param deviceID die Geräte ID\r\n   */\r\n  constructor(id: number, deviceID: number, name?: string) {\r\n    super(id, DeviceData.loadDevice(deviceID), name);\r\n  }\r\n\r\n  /**\r\n   * Implementiert die abstrakte Methode von User\r\n   */\r\n  loadProject(project: IProject): boolean {\r\n    this.currentProject = new Project(project.projectID, project.sessionID, project.projectName, project.projectData);\r\n    return true;\r\n  }\r\n}\r\n\r\n/**\r\n * AIModelUser ist die Klasse, um KI-Modell Benutzer zu speichern\r\n */\r\nexport class AIModelUser extends User {\r\n  /**\r\n   * Erstellt einen KI-Modell Benutzer, wenn Name \"\" gesetzt ist und eine Geräte ID gesetzt ist wird als Name der Geräte Name gewählt\r\n   * @param id die eindeutige Benutzer ID\r\n   * @param name der Benutzername\r\n   * @param deviceID die Geräte ID\r\n   */\r\n  constructor(id: number, deviceID: number, name?: string) {\r\n    super(id, DeviceData.loadDevice(deviceID), name);\r\n  }\r\n\r\n  /**\r\n   * Implementiert die abstrakte Methode von User\r\n   */\r\n  loadProject(project: IProject): boolean {\r\n    this.currentProject = new Project(project.projectID, project.sessionID, project.projectName, project.projectData);\r\n    return true;\r\n  }\r\n}\r\nexport interface IProject {\r\n  projectID: number,\r\n  sessionID: number,\r\n  projectName: string,\r\n  projectData?: IProjectData;\r\n}","/**\r\n * Diese Klasse verwaltet die Interaktion mit dem Python-Backend und die zugehörige Kommunikation.\r\n * Sie ist verantwortlich für den Bau von KI-Modellen und für die Ausführung derselben.\r\n */\r\nexport class AIBuilder {\r\n    private modelId: number;\r\n    private static readonly url: string = \"../\";\r\n    private static readonly buildModel: string = \"src/buildModel/\";\r\n    private static readonly classify: string = \"src/classify/\";\r\n\r\n    /**\r\n     * Erstellt den AIBuilder und übergibt ihm die ID des zu bearbeitenden Modells.\r\n     * @param modelId Die ID des zu erstellenden oder zu verwendenden Modells\r\n     */\r\n    constructor(modelId: number) {\r\n        this.modelId = modelId;\r\n    }\r\n\r\n    /**\r\n     * Ruft die Python-Schnittstelle auf dem Server auf, um ein KI-Modell zu erstellen und zu trainieren.\r\n     * @param modelData Sämtliche relevanten Daten, um das gewünschte KI-Modell erstellen zu können.\r\n     * Diese müssen das folgende Format haben, wenn zu JSON gepackt:\r\n     * ```\r\n     * {\r\n     *     \"dataSets\": [\r\n     *         42\r\n     *     ],\r\n     *     \"classifier\": \"Classifier\",\r\n     *     \"scaler\": \"Scaler\",\r\n     *     \"features\": [\r\n     *         \"featurename#13\"\r\n     *     ],\r\n     *     \"projectID\": 1,\r\n     *     \"trainingDataPercentage\": 0.8, // optional\r\n     *     \"slidingWindowSize\": 128,      // optional\r\n     *     \"slidingWindowStep\": 64        // optional\r\n     * }\r\n     * ```\r\n     * Die Reihenfolge ist unwichtig.\r\n     */\r\n    applyModel(dataSets: number[], imputator: string, classifier: string, scaler: string, features: string[], projectID: number, trainingDataPercentage: number = 1, slidingWindowSize: number = 128, slidingWindowStep: number = 64): void {\r\n        const modelData = {\r\n            \"dataSets\":               dataSets,\r\n            \"imputator\":              imputator,\r\n            \"classifier\":             classifier,\r\n            \"scaler\":                 scaler,\r\n            \"features\":               features,\r\n            \"projectID\":              projectID,\r\n            \"trainingDataPercentage\": trainingDataPercentage,\r\n            \"slidingWindowSize\":      slidingWindowSize,\r\n            \"slidingWindowStep\":      slidingWindowStep\r\n        }\r\n        this.sendRequest(JSON.stringify(modelData), AIBuilder.url + AIBuilder.buildModel, console.log);\r\n    }\r\n\r\n    /**\r\n     * Diese Methode ruft die Python-Schnittstelle auf dem Server auf, um ein KI-Modell einen Datensatz klassifizieren zu lassen.\r\n     * @param dataSetId Die ID des Datensatzes, den das KI-Modell klassifizieren soll.\r\n     * @param callBack Eine Rückmelde-Funktion des \"aufrufenden\" Controllers, mit der das Ergebnis der Klassifizierung an den Controller zurückgegeben wird.\r\n     */\r\n    classify(dataSetId: number, callBack: <R = unknown>(prediction: string | object) => R): void {\r\n        let requestData: string = JSON.stringify({ \"classifier\": this.modelId, \"dataSet\": dataSetId });\r\n        this.sendRequest(requestData, AIBuilder.url + AIBuilder.classify, callBack);\r\n    }\r\n\r\n    /**\r\n     * Diese private Methode fässt den Versandprozess der Subanfrage an den Anwendungsserver zusammen.\r\n     * @param requestData Die mit der Anfrage zu versendenden Daten. Hat gültiges JSON zu sein, außer plainText ist gesetzt.\r\n     * @param url Die Adresse, an die die Anfrage gestellt wird. Am besten was auf demselben Server, ansonsten bekommt der Browser nen Kasper.\r\n     * @param successAction Eine Funktion, die bei erfolgreicher Durchführung der Anfrage auszuführen ist.\r\n     * @param plainText Gibt an, dass die Daten als Plaintext zu versenden sind.\r\n     */\r\n    private sendRequest(requestData: string, url: string, successAction: <R = unknown>(param: string | object) => R, plainText: boolean = false) {\r\n        let xhr = new XMLHttpRequest(); // XHR ist kurz für XmlHttpRequest\r\n        xhr.open(\"POST\", url, true);\r\n        xhr.onreadystatechange = () => {\r\n            if (xhr.readyState === 4) {\r\n                if (xhr.status === 200) {\r\n                    var responseJSON: object | null;\r\n                    try {\r\n                        responseJSON = JSON.parse(xhr.responseText);\r\n                    }\r\n                    catch (e) {\r\n                        responseJSON = null;\r\n                    }\r\n                    if (responseJSON == null) {\r\n                        successAction(xhr.responseText);\r\n                    }\r\n                    else {\r\n                        successAction(responseJSON);\r\n                    }\r\n                }\r\n                else if (xhr.status === 406) {\r\n                    throw new Error(\"Error in request data - not accepted by Server\");\r\n                }\r\n                else {\r\n                    xhr.send(requestData);\r\n                }\r\n            }\r\n        };\r\n        if (!plainText) {\r\n            xhr.setRequestHeader(\"Content-Type\", \"application/json\");\r\n        }\r\n        xhr.send(requestData);\r\n    }\r\n}\r\n","import { DeliveryFormat } from './DeliveryFormat';\r\n\r\n/**\r\n * Diese Klasse verwaltet die Auslieferungsformalitäten für trainierte KI-Modelle.\r\n */\r\nexport class AIDistributor {\r\n    private static readonly url: string = \"../src/deliverance/\";\r\n    private static readonly headers = { 'ContentType': 'application/json' };\r\n    private format: DeliveryFormat;\r\n    private id: number;\r\n\r\n    /**\r\n     * Dieser Konstruktor erzeugt das Objekt in Abhängigkeit vom gewählten Auslieferungsformat. \r\n     * Dieses sorgt an verschiedenen Stellen im Programmablauf für unterschiedliche Vorgehensweisen.\r\n     * @param format Das Auslieferungsformat.\r\n     */\r\n    constructor ( id: number, format: DeliveryFormat ) {\r\n        this.format = format;\r\n        this.id = id;\r\n    }\r\n\r\n    /**\r\n     * Gibt in Abhängigkeit vom Auslieferungsformat entweder das fertige KI-Modell als \r\n     * ausführbare Datei zurück, oder sämtliche Daten, die nötig sind, um das KI-Modell \r\n     * später als Web-Anwendung auszuführen.\r\n     * \r\n     * Der Return-Typ ist einzig aus dem Grund \"any\", weil sich so das Problem löst, dass\r\n     * man von einem blanken Objekt keine spezifischen Eigenschaften erwarten kann.\r\n     */\r\n    getAIModel (): any {\r\n        let data = this.sendRequest( { \"id\": this.id, \"format\": this.format, \"job\": \"get\" } );\r\n        let success: boolean;\r\n        try {\r\n            success = Object.keys( data ).includes( \"url\" );\r\n        }\r\n        catch ( e ) {\r\n            success = false;\r\n        }\r\n        if ( !success ) {\r\n            throw new Error( \"Connection issue: \" + data.status + \": \" + data.statusText );\r\n        }\r\n        switch ( this.format ) {\r\n            case DeliveryFormat.EXE:\r\n                throw new Error( \"Not implemented.\" );\r\n            //location.href = data.url;\r\n            //return dataX;\r\n            case DeliveryFormat.WEB_APP:\r\n                return { \"url\": data.url };\r\n            default:\r\n                throw new Error( \"Illegal delivery format.\" );\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Diese Methode reicht die übergebenen E-Mail-Adressen an den Server weiter, damit dieser \r\n     * einen Link zum KI-Modell, dessen laufende Nummer im Objekt hinterlegt ist, \r\n     * an sämtliche dieser Adressen versendet.\r\n     * \r\n     * @param emailList Die E-Mail-Adressen, an die der Server den Nutzungslink zum Modell versenden soll.\r\n     * @returns True, wenn die Anfrage an den Server erfolgreich war, False andernfalls.\r\n     */\r\n    sendAIModel ( emailList: string[] ): boolean {\r\n        let recipients: { \"email\": string; }[] = [];\r\n        emailList.forEach( ( address ) => recipients[ recipients.length ] = { \"email\": address } );\r\n        console.log({ \"recipients\": JSON.stringify( recipients ), \"id\": this.id, \"job\": \"send\" })\r\n        let data = this.sendRequest( { \"recipients\": JSON.stringify( recipients ), \"id\": this.id, \"job\": \"send\" } );\r\n        let success: boolean;\r\n        try {\r\n            success = Object.keys( data ).includes( \"result\" );\r\n        }\r\n        catch ( e ) {\r\n            success = false;\r\n        }\r\n        if ( success ) {\r\n            return data.result;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * Diese Methode schickt die Anfrage an den Server raus.\r\n     * \r\n     * @param data Die Daten, die mit der Anfrage zu versenden sind.\r\n     */\r\n    private sendRequest ( data: object ): any {\r\n        return new Promise( function ( resolve, reject ) {\r\n            let xhr = new XMLHttpRequest(); // XHR ist kurz für XmlHttpRequest\r\n            xhr.open( \"POST\", AIDistributor.url, true );\r\n            xhr.onreadystatechange = () => {\r\n                if ( xhr.readyState === 4 ) {\r\n                    if ( xhr.status === 200 ) {\r\n                        resolve( JSON.parse( xhr.responseText ) );\r\n                    }\r\n                    reject( {\r\n                        status: xhr.status,\r\n                        statusText: xhr.statusText\r\n                    } );\r\n                }\r\n            };\r\n            xhr.onerror = function () {\r\n                reject( {\r\n                    status: this.status,\r\n                    statusText: xhr.statusText\r\n                } );\r\n            };\r\n            for ( const [ header, content ] of Object.entries( AIDistributor.headers ) ) {\r\n                xhr.setRequestHeader( header, content );\r\n            }\r\n            console.log( JSON.stringify( data ))\r\n            xhr.send( JSON.stringify( data ) );\r\n        } ).then( ( resolve ) => resolve, ( reject ) => reject );\r\n    }\r\n\r\n    /**\r\n     * Diese Methode wird verwendet, um aus einem aus der Datenbank geladenen \r\n     * KI-Modell (Scaler und Classifier) eine gebrauchsfertige Anwendung zu erstellen.\r\n     * \r\n     * Diese Methode ist sinnlos, da eine Datei auf dem Server liegen muss, um heruntergeladen werden zu können.\r\n     */\r\n    private buildExecutable (): boolean {\r\n        throw new Error( \"Not Implemented\" );\r\n    }\r\n}\r\n","import { DeliveryFormat } from \"./DeliveryFormat\";\r\nimport { DatabaseConnector } from \"./DatabaseConnector\";\r\nimport { Language, LanguageMessages } from \"./Language\";\r\nimport { Admin, Dataminer, AIModelUser, User } from \"./User\";\r\nimport { AIBuilder } from \"./AIBuilder\";\r\nimport { AIDistributor } from \"./AIDistributor\";\r\nimport { SensorData } from \"./SensorData\";\r\nimport { AIController } from \"../controller/AIController\";\r\nimport { IDataRowST, IDataRowSTRID } from \"./DataRow\";\r\nimport { ILabel } from \"./Label\";\r\nimport { ISpan } from \"./TimeSpan\";\r\nimport { IDevice } from \"./DeviceData\";\r\nimport { IDataPoint } from \"./DataPoint\";\r\n\r\ninterface FacadeInterface {\r\n  createDataSet(sensorTypeID: number[], dataSetName: string, datarowNames?: string[]): Promise<number>;\r\n  sendDataPoint(dataRowID: number, datapoint: IDataPoint): Promise<boolean>;\r\n  sendDataPointsAgain(): Promise<boolean>;\r\n  loadProject(projectID?: number): Promise<boolean>;\r\n  getProjectMetas(): Promise<{ projectID: number, projectName: string, AIModelID: number[]; }[]>;\r\n  getDataSetMetas(): { dataSetID: number, dataSetName: string; }[];\r\n  getSessionID(): number;\r\n  getDataRows(dataSetID: number): { dataRows: IDataRowST[]; };\r\n  getCurrentDataRows(): { dataRows: IDataRowST[]; };\r\n  getMessages(): LanguageMessages | null;\r\n  setLanguage(languageCode: string): Promise<boolean>;\r\n  getLanguageMetas(): Promise<{ languageCode: number, languageName: string; }[]>;\r\n  getAdminEmail(): string;\r\n  deleteDataSet(dataSetID: number): Promise<boolean>;\r\n  registerAdmin(adminName: string, adminEmail: string, password: string): Promise<boolean>;\r\n  registerDataminer(dataminerName: string, sessionID: number): Promise<boolean>;\r\n  registerAIModelUser(aiModelUserName: string, modelID: number): Promise<boolean>;\r\n  loginAdmin(adminEmail: string, password: string): Promise<boolean>;\r\n  createProject(projectName: string): Promise<boolean>;\r\n  createLabel(span: ISpan, labelName: string): Promise<number>;\r\n  setLabel(labelID: number, span: ISpan, labelName?: string): Promise<boolean>;\r\n  deleteLabel(labelID: number): Promise<boolean>;\r\n  getLabels(): { labels: ILabel[]; };\r\n  classify(aiId: number, dataSetId: number, callBack: <R = unknown>(prediction: string | object) => R): void;\r\n  getAIModel(id: number, format: DeliveryFormat): object;\r\n  sendAIModel(model: number, ...recipients: string[]): boolean;\r\n  applyModel(dataSets: number[], imputator: string, classifier: string, scaler: string, features: string[],\r\n    trainingDataPercentage: number, slidingWindowSize: number, slidingWindowStep: number): void;\r\n} export type { FacadeInterface };\r\n\r\n/**\r\n * Die Facade stellt alle interaktionen mit dem Model zur Verfügung\r\n */\r\nexport class Facade {\r\n  private language?: Language; //Alle Nachrichten, in der geladenen Sprache\r\n  private dbCon: DatabaseConnector; //Die Verbindung zur Datenbank\r\n  private user?: User; //Der Benutzer, entweder Admin, Datenerfasser oder AIModelUser\r\n\r\n\r\n  /**\r\n   * Erstellt die Facade\r\n   * @param languageCode der Sprachcode von der Sprache, die geladen werden soll\r\n   */\r\n  constructor(languageCode: string) {\r\n    this.dbCon = new DatabaseConnector();\r\n    this.dbCon.loadLanguage({ languageCode }).then((language: LanguageMessages) => { this.language = new Language(language); });\r\n  }\r\n\r\n  /**\r\n   * Erstellt ein Datensatz\r\n   * @param sensorTypeID muss der Sensor Typ ID von einem Sensor des Gerätes übereinstimmen\r\n   * @param dataSetName Name des Datensatzes\r\n   * @returns true, wenn der Datensatz erstellt wurde. \r\n   * Dies ist der Fall, wenn ein Benutzer existiert welcher in einer Session ist und alle Sensortypen existieren.\r\n   */\r\n  async createDataSet(sensorTypeID: number[], dataSetName: string, datarowNames?: string[]): Promise<number> {\r\n    if (this.user === undefined) {\r\n      return -2;\r\n    }\r\n    let sessionID: number = this.getSessionID();\r\n    if (sessionID === undefined) {\r\n      sessionID = 0;\r\n    }\r\n    if (sessionID > 0 || this.user.getName() === AIController.AI_MODEL_USER_NAME) {\r\n      let projectID: number = this.user.getCurrentProjectID();\r\n      if (projectID === undefined) {\r\n        projectID = 0;\r\n      }\r\n      let userID: number = this.user.getID();\r\n      let dataRow: { sensorID: number, datarowName?: string; }[] = [];\r\n      for (let i = 0; i < sensorTypeID.length; i++) {\r\n        let sensorID = sensorTypeID[i];\r\n        if (datarowNames != null && datarowNames.length >= i) {\r\n          dataRow.push({ sensorID, datarowName: datarowNames[i] });\r\n        }\r\n        else {\r\n          dataRow.push({ sensorID });\r\n        }\r\n      }\r\n      let dataSetID: number = await this.dbCon.createDataSet({ sessionID, projectID, userID, dataSetName, dataRow });\r\n      if (dataSetID <= 0) {\r\n        return -3;\r\n      }\r\n      var dataRows: IDataRowSTRID[] = [];\r\n      for (let i = 0; i < sensorTypeID.length; i++) {\r\n        dataRows.push({ sensorType: sensorTypeID[i], dataRow: [], dataRowID: i });\r\n      }\r\n      if (this.user.createDataSet(dataSetID, dataSetName, new Date().getMilliseconds(), dataRows) || this.user.getName() === AIController.AI_MODEL_USER_NAME) {\r\n        return dataSetID;\r\n      }\r\n      return -4;\r\n    }\r\n    return -5;\r\n  }\r\n\r\n  /**\r\n   * Sendet den Datenpunkt an die Datenbank und speichert den Punkt lokal\r\n   * @param dataRowID die ID der aktuellen Datenreihe des eingelesenen Datenpunkts\r\n   * @param value der SensorWert\r\n   * @param relativeTime die relative Zeit zum Aufnahmestart in Millisekunden\r\n   * @return true, wenn der Datenpunkt erfolgreich an die Datenbank gesendet wurde\r\n   */\r\n  async sendDataPoint(dataRowID: number, datapoint: IDataPoint): Promise<boolean> {\r\n    if (this.user !== undefined) {\r\n      let sessionID: number = this.getSessionID();\r\n      let userID: number = this.user.getID();\r\n      let dataSetID: number = this.user.getCurrentDataSetID();\r\n      this.user.addDatapoint(dataRowID, datapoint);\r\n      return this.dbCon.sendDataPoint({ sessionID, userID, dataSetID, dataRowID, datapoint });\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n     * Sendet den aktuell bereits aufgenommenen Datensatz an die Datenbank\r\n     * Dafür da, falls die Verbindung verloren ging und der Datensatz neu hochgeladen werden muss\r\n     * @return true, wenn der Datensatz erfolgreich an die Datenbank gesendet wurde\r\n     */\r\n  async sendDataPointsAgain(): Promise<boolean> {\r\n    if (this.user != null) {\r\n      let sessionID: number = this.getSessionID();\r\n      let userID: number = this.user.getID();\r\n      let dataSetID: number = this.user.getCurrentDataSetID();\r\n      let rows = this.user.getCurrentDataRows();\r\n      for (let i = 0; i < rows.dataRows.length; i++) {\r\n        var result = await this.dbCon.sendDataPointsAgain({ sessionID, userID, dataSetID, dataRowID: i, datapoints: rows.dataRows[i].datapoint });\r\n        if (!result) {\r\n          return false;\r\n        }\r\n      }\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Lädt aus der Datenbank das Projekt mit der übergebenen ID, hierfür muss der Admin angemeldet sein\r\n   * @param projectID die Projekt ID oder keine falls das aktuelle Projekt neu geladen werden soll\r\n   * @returns true, wenn das Projekt erfolgreich geladen wurde dies tritt nur ein, wenn eine Verbindung zur Datenbank besteht,\r\n   *          die Projekt ID existiert und der Admin dafür angemeldet ist\r\n   */\r\n  async loadProject(projectID?: number): Promise<boolean> {\r\n    if (this.user != null && this.user instanceof Admin) {\r\n      if (projectID == null) {\r\n        projectID = this.user?.getCurrentProjectID();\r\n      }\r\n      let adminEmail: string = this.user.getEmail();\r\n      let userID: number = this.user.getID();\r\n      return this.user.loadProject(await this.dbCon.loadProject({ userID, adminEmail, projectID }));\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /* Methode die noch nicht benutzt wird aber eventuell das laufgeschehen verbessern\r\n  /**\r\n     * Aktuallisiert aus der Datenbank das aktuelle Projekt, hierfür muss der Admin angemeldet sein und ein Projekt geladen sein\r\n     * @returns true, wenn das Projekt erfolgreich geladen wurde dies tritt nur ein, wenn eine Verbindung zur Datenbank besteht,\r\n     *          ein geladenes Projekt existiert und der Admin dafür angemeldet ist\r\n     \r\n  async updateCurrentProject(): Promise<boolean> {\r\n    if (this.user != null && this.user instanceof Admin) {\r\n      let projectID = this.user.getCurrentProjectID();\r\n      let adminEmail: string = this.user.getEmail();\r\n      let userID: number = this.user.getID();\r\n      return this.user.updateProject(await this.dbCon.updateProject({ userID, adminEmail, projectID }));\r\n    }\r\n    return false;\r\n  }*/\r\n\r\n\r\n  /**\r\n   * Lädt vom aktuell angemeldeten Admin von seinen Projekten den Namen, die Projekt ID und die AIModelIDs\r\n   * @returns Von allen Projekten des Admins Projekt ID und Projektname und die AIModelIDs\r\n   */\r\n  async getProjectMetas(): Promise<{ projectID: number, projectName: string, AIModelID: number[]; }[]> {\r\n    if (this.user != null) {\r\n      let userID: number = this.user.getID();\r\n      return await this.dbCon.getProjectMetas({ userID, adminEmail: this.getAdminEmail() });\r\n    }\r\n    return [];\r\n  }\r\n\r\n  /**\r\n   * Gibt vom aktuellen Projekt von allen Datensätzen die Datensatz ID und der Datensatz Name zurück\r\n   */\r\n  getDataSetMetas(): { dataSetID: number, dataSetName: string; }[] {\r\n    if (this.user !== undefined) {\r\n      return this.user.getDataSetMetas();\r\n    }\r\n    return [];\r\n  }\r\n\r\n  /**\r\n   * Gibt die Session ID des aktuellen Projekts zurück, -1 falls kein aktuelles Projekt existiert\r\n   */\r\n  getSessionID(): number {\r\n    if (this.user != null) {\r\n      return this.user.getSessionID();\r\n    }\r\n    return -1;\r\n  }\r\n\r\n  /**\r\n   * Gibt vom aktuellen Projekt die Datenreihen der Datensatz ID zurück und setzt diesen Datensatz als aktuellen Datensatz\r\n   * @param dataSetID die Datensatz ID von der die Datenreihen gelesen werden sollen\r\n   * @returns die Sensordaten von der Datenreihe\r\n   */\r\n  getDataRows(dataSetID: number): { dataRows: IDataRowST[]; } {\r\n    if (this.user != null) {\r\n      return this.user.getDataRows(dataSetID);\r\n    }\r\n    return { dataRows: [] };\r\n  }\r\n\r\n  /**\r\n   * Gibt vom aktuellen Projekt die Datenreihen des aktuellen Datensatzes zurück\r\n   * @param dataSetID die Datensatz ID von der die Datenreihen gelesen werden sollen\r\n   * @returns die Sensordaten von der Datenreihe\r\n   */\r\n  getCurrentDataRows(): { dataRows: IDataRowST[]; } {\r\n    if (this.user != null) {\r\n      return this.user.getCurrentDataRows();\r\n    }\r\n    return { dataRows: [] };\r\n  }\r\n\r\n  /**\r\n   * Gibt aus der geladenen Sprache die Nachrichten die über die IDs angegeben werden\r\n   * @param messageID alle IDs, von denen die Sprachnachricht geladen werden soll\r\n   * @returns alle Nachrichten, in der gleichen Reihenfolge wie angefordert\r\n   */\r\n  getMessages(): LanguageMessages | null {\r\n    if (this.language != null) {\r\n      return this.language.getMessage();\r\n    }\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * Gibt die auswählbaren Sensoren als ID mit ihrer Art in der Passenden Sprache zurück\r\n  \r\n  getAvailableSensors(): { sensorTypID: number, sensorType: string; }[] {\r\n    if (this.user != null && this.language != null) {\r\n      var sensors: { sensorTypID: number, sensorType: string; }[] = [];\r\n      let message: { messageID: number, message: string; }[] = this.language.getMessage(this.user.getAvailableSensors());\r\n      for (let i = 0; i < message.length; i++) {\r\n        sensors.push({ sensorTypID: message[i].messageID, sensorType: message[i].message });\r\n      }\r\n      return sensors;\r\n    }\r\n    return [];\r\n  }\r\n */\r\n\r\n  /**\r\n   * Lädt die Sprache aus der Datenbank mit dem übergebenen Sprachcode\r\n   * @param languageCode Sprachcode\r\n   * @returns true, falls die Sprache erfolgreich geladen wurde\r\n   */\r\n  async setLanguage(languageCode: string): Promise<boolean> {\r\n    if (this.language == null) {\r\n      const language: LanguageMessages = await this.dbCon.loadLanguage({ languageCode });\r\n      this.language = new Language(language);\r\n      return true;\r\n    } else if (languageCode !== this.language.getLanguageCode()) {\r\n      const language: LanguageMessages = await this.dbCon.loadLanguage({ languageCode });\r\n      return this.language.setLanguage(language);\r\n    }\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * Gibt von allen in der Datenbank verfügbaren Sprachen den Sprachcode sowie den Sprachennamen zurück\r\n   */\r\n  getLanguageMetas(): Promise<{ languageCode: number, languageName: string; }[]> {\r\n    return this.dbCon.getLanguageMetas();\r\n  };\r\n\r\n  /**\r\n   * Gibt die Email vom Admin zurück, diese kann leer sein falls kein Admin angemeldet ist\r\n   */\r\n  getAdminEmail(): string {\r\n    if (this.user instanceof Admin) {\r\n      return this.user.getEmail();\r\n    }\r\n    return \"\";\r\n  }\r\n\r\n  /**\r\n   * Löscht den Datensatz mit der übergebenen Datensatz ID\r\n   * @param dataSetID die Datensatz ID\r\n   * @returns true, wenn das löschen erfolgreich ist\r\n   */\r\n  async deleteDataSet(dataSetID: number): Promise<boolean> {\r\n    if (this.user != null && this.user.deleteDataSet(dataSetID)) {\r\n      let projectID: number = this.user.getCurrentProjectID();\r\n      if (projectID >= 0) {\r\n        let adminEmail: string = this.getAdminEmail();\r\n        let userID = this.user.getID();\r\n        return this.dbCon.deleteDataSet({ userID, adminEmail, projectID, dataSetID });\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  //wann Device erstellen ??? + constructor in User anpassen mit neuem Device parameter \r\n  async registerAdmin(adminName: string, adminEmail: string, password: string): Promise<boolean> {\r\n    //TODO Device\r\n    let device: IDevice = { deviceID: -1, deviceName: \"\", deviceType: \"\", firmware: \"\", generation: \"\", MACADRESS: \"\", sensorInformation: [] };\r\n    let IDs: {\r\n      adminID: number, device: { deviceID: number, sensorID: number[]; };\r\n    } = await this.dbCon.registerAdmin({ adminName, adminEmail, password, device });\r\n    if (IDs.adminID >= 0) {\r\n      this.user = new Admin(IDs.adminID, IDs.device.deviceID, adminName, adminEmail);\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  async registerDataminer(dataminerName: string, sessionID: number): Promise<boolean> {\r\n    //TODO Device\r\n    let device: IDevice = { deviceID: -1, deviceName: \"\", deviceType: \"\", firmware: \"\", generation: \"\", MACADRESS: \"\", sensorInformation: [] };\r\n    let dataminer:\r\n      {\r\n        dataminerID: number, device: { deviceID: number, sensorID: number[]; }, project: { projectID: number, projectName: string, sessionID: number; };\r\n      } = await this.dbCon.registerDataminer({ dataminerName, sessionID, device });\r\n    if (dataminer.dataminerID >= 0 && dataminer.device.deviceID >= 0) {\r\n      this.user = new Dataminer(dataminer.dataminerID, dataminer.device.deviceID, dataminerName);\r\n      this.user.loadProject(dataminer.project);\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param aiModelUserName \r\n   */\r\n  async registerAIModelUser(aiModelUserName: string, modelID: number): Promise<boolean> {\r\n    //TODO Device\r\n    let device: IDevice = { deviceID: -1, deviceName: \"\", deviceType: \"\", firmware: \"\", generation: \"\", MACADRESS: \"\", sensorInformation: [] };\r\n    let aiModelUser: {\r\n      aiModelUserID: number, device: { deviceID: number, sensorID: number[]; },\r\n      project: { projectID: number, projectName: string, sessionID: number; };\r\n    } = await this.dbCon.registerAIModelUser({ aiModelUserName, modelID, device });\r\n    if (aiModelUser.aiModelUserID >= 0 && aiModelUser.device.deviceID >= 0) {\r\n      this.user = new AIModelUser(aiModelUser.aiModelUserID, aiModelUser.device.deviceID, aiModelUserName);\r\n      this.user.loadProject(aiModelUser.project);\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  //TODO Device\r\n  async loginAdmin(adminEmail: string, password: string): Promise<boolean> {\r\n    if (this.user == null) {\r\n      let adminData: {\r\n        admin: { adminID: number, deviceID: number, adminName: string, email: string, device: IDevice; };\r\n      } = await this.dbCon.loginAdmin({ adminEmail, password });\r\n      if (adminData.admin != null && adminData.admin.adminID !== -1) {\r\n        let admin = adminData.admin;\r\n        this.user = new Admin(admin.adminID, admin.deviceID, admin.adminName, admin.email, admin.device);\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /* eventuell implementieren\r\n    logoutAdmin(): boolean {\r\n      if (this.user != null) {\r\n        let logout = this.dbCon.logoutAdmin(this.getAdminEmail());\r\n        if (logout) {\r\n          delete this.user;\r\n        } else {\r\n          return false;\r\n        }\r\n      }\r\n      return true;\r\n    }\r\n    */\r\n\r\n  /**\r\n   * Erstellt für den angemeldeten Admin ein neues Projekt\r\n   */\r\n  async createProject(projectName: string): Promise<boolean> {\r\n    if (this.user instanceof Admin) {\r\n      let userID = this.user.getID();\r\n      let adminEmail = this.getAdminEmail();\r\n      let project: { projectID: number, sessionID: number; } = await this.dbCon.createProject({ userID, adminEmail, projectName });\r\n      return this.user.createProject(project.projectID, project.sessionID, projectName);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Erstellt ein neues Label für den aktuellen Datensatz\r\n   * @param span Start und Endzeit des Zeitfensters in Sekunden\r\n   */\r\n  async createLabel(span: ISpan, labelName: string): Promise<number> {\r\n    if (this.user != null) {\r\n      let sessionID: number = this.getSessionID();\r\n      let userID: number = this.user.getID();\r\n      let datasetID: number = this.user.getCurrentDataSetID();\r\n      let labelID: number = await this.dbCon.createLabel({ sessionID, userID, datasetID, label: { span, labelName } });\r\n      if (labelID >= 0) {\r\n        let created: boolean = this.user.createLabel(labelID, span, labelName);\r\n        if (created) {\r\n          return labelID;\r\n        }\r\n      }\r\n    }\r\n    return -1;\r\n  }\r\n\r\n  /**\r\n   * Überschreibt ein bestehendes Label mit den übergebenen Parametern\r\n   * @param labelID die LabelID, die schon exisiteren muss und überschrieben wird\r\n   * @param span Start und Endzeit des Zeitfensters in Sekunden\r\n   */\r\n  async setLabel(labelID: number, span: ISpan, labelName?: string): Promise<boolean> {\r\n    if (this.user != null) {\r\n      let setted: boolean = this.user.setLabel(labelID, span, labelName);\r\n      if (setted) {\r\n        let sessionID: number = this.getSessionID();\r\n        let userID: number = this.user.getID();\r\n        let datasetID: number = this.user.getCurrentDataSetID();\r\n        return this.dbCon.setLabel({ sessionID, userID, datasetID, label: { labelID, span, labelName } });\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Löscht das bestehende Label mit der LabelID\r\n   * @param labelID die LabelID, die schon exisitert\r\n   */\r\n  async deleteLabel(labelID: number): Promise<boolean> {\r\n    if (this.user != null) {\r\n      let deleted: boolean = this.user.deleteLabel(labelID);\r\n      if (deleted) {\r\n        let sessionID: number = this.getSessionID();\r\n        let userID: number = this.user.getID();\r\n        let dataSetID: number = this.user.getCurrentDataSetID();\r\n        return this.dbCon.deleteLabel({ sessionID, userID, dataSetID, labelID });\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Gibt die geladenen Labels zurück von dem aktuellen Datensatz\r\n   * @returns \r\n   */\r\n  getLabels(): { labels: ILabel[]; } {\r\n    if (this.user != null) {\r\n      return this.user.getLabels();\r\n    }\r\n    return { labels: [] };\r\n  }\r\n\r\n  classify(aiId: number, dataSetId: number, callBack: <R = unknown>(prediction: string | object) => R): void {\r\n    let aiBuilder = new AIBuilder(aiId);\r\n    aiBuilder.classify(dataSetId, callBack);\r\n  };\r\n\r\n  getAIModel(id: number, format: DeliveryFormat): object {\r\n    let aiDist = new AIDistributor(id, format);\r\n    return aiDist.getAIModel();\r\n  }\r\n\r\n  /**\r\n   * Erzeugt eine Anfrage an den Server, an jede übergebene E-Mail-Adresse eine E-Mail zu versenden,\r\n   * die einen Link zur Startseite des mit übergebenen KI-Modells enthält.\r\n   * \r\n   * @param model      - Die ID des zu verteilenden KI-Modells.\r\n   * @param recipients - Die Liste der E-Mail-Adressen, an die das KI-Modell verteilt werden soll.\r\n   * @returns True, wenn die Anfrage an den Server erfolgreich durchgeführt werden konnte, False sonst.\r\n   */\r\n  sendAIModel(model: number, recipients: string[]): boolean {\r\n    const distributor = new AIDistributor(model, DeliveryFormat.WEB_APP);\r\n    return distributor.sendAIModel(recipients);\r\n  }\r\n\r\n  /**\r\n   * Diese Methode erzeugt eine Anfrage an den Server, die ihn damit beauftragt, ein KI-Modell mit den \r\n   * angegebenen Parametern zu erzeugen und zu trainieren. \r\n   * \r\n   * @param dataSets               - Die zum Training zu verwendenden Datensätze.\r\n   * @param imputator              - Der zur Vervollständigung der Daten zu verwendende Imputer.\r\n   * @param classifier             - Der Klassifizierer, der das Herzstück des zu erstellenden KI-Modells darstellt.\r\n   * @param scaler                 - Der Scaler, der die Daten für den Klassifizierer aufbereitet.\r\n   * @param features               - Die Merkmale, die aus den gegebenen Datensätzen herausgearbeitet werden sollen.\r\n   * @param trainingDataPercentage - Optional. Der Anteil der Daten, der zum Training des KI-Modells verwendet werden soll. \r\n   *                                 Standardmäßig sind das alle übergebenen Daten, da wir noch kein serverseitiges Testen der KI-Modell-Qualität durchführen.\r\n   * @param slidingWindowSize      - Optional. Die Größe der Datenblöcke, die jeweils verwertet werden. Standardwert ist 128 Datenpunkte.\r\n   * @param slidingWindowStep      - Optional. Die Schrittweite von einem Datenblock zum nächsten. Standardwert ist 64 Datenpunkte. \r\n   */\r\n  applyModel(dataSets: number[], imputator: string, classifier: string, scaler: string, features: string[],\r\n    trainingDataPercentage: number = 1, slidingWindowSize: number = 128, slidingWindowStep: number = 64): void {\r\n    const aiBuilder = new AIBuilder(-1);\r\n    const projectID = this.user!.getCurrentProjectID();\r\n    aiBuilder.applyModel(dataSets, imputator, classifier, scaler, features, projectID, trainingDataPercentage, slidingWindowSize, slidingWindowStep);\r\n  }\r\n}","import { Component } from 'react';\r\nimport title from './index.module.css';\r\n\r\nexport default class Title extends Component {\r\n    private static readonly T_TITLE_DE: string = \"Datenerfassung\";\r\n\r\n    /**\r\n     * Enthält den Titel \"Datenerfassungsanwendung\"\r\n     */\r\n    render() {\r\n        return (\r\n            <div>\r\n                <h1 className={title.title}>{Title.T_TITLE_DE}</h1>\r\n            </div>\r\n        );\r\n    }\r\n}","import { Component } from 'react';\r\n\r\n/**\r\n * Das fertige Diagramm auf der Finishseite\r\n */\r\nexport default class Diagram extends Component {\r\n    private static readonly T_ACCELEROMETER_DE: string = \"Beschleunigungssensor\";\r\n    private static readonly T_GYROSCOPE_DE: string = \"Gyroskop\";\r\n    private static readonly T_MAGNETOMETER_DE: string = \"Magnetometer\";\r\n\r\n    /**\r\n     * der Datensatz für das Diagramm, durch props übermittelt\r\n     */\r\n    props = {\r\n        dataRows: [{ sensorType: 1, datapoint: [{ value: [5], relativeTime: 5 }] }],\r\n    };\r\n\r\n    /**\r\n     * der Datensatz in chart-js form, um die Linie zu zeigen\r\n     */\r\n    diagrammData = {\r\n        lineLabels: [] as any[],\r\n        sensorRow: [] as any[],\r\n        datavalue: [] as any[],\r\n        time: [] as any[],\r\n        showDiagram: false,\r\n        diagram: {},\r\n        diagramLineLabels: {},\r\n        diagramData: {},\r\n        diagramOptions: {},\r\n        color: ['rgba(46,190,87,1)', 'rgba(68,24,232,1)', 'rgba(238,173,14,1)', 'rgba(178,34,34,1)', 'rgba(238, 130, 238,1)', 'rgba(0, 0, 0,1)',\r\n            'rgba(106, 90, 205,1)', 'rgba(238, 118, 0,1)', 'rgba(105, 105, 105,1)'],\r\n        csscolor: ['2EBE57', 'CC00FF', 'EEAD0E', 'B22222', 'EE82EE', '000000',\r\n            '6A5ACD', 'EE7600', '696969'],\r\n    };\r\n\r\n    /**\r\n     * aktualisiert das Diagramm mit dem gegebenen Datensatz. Inzwischen wird der Datensatz bearbeitet, damit er in chart-js form ist.\r\n     */\r\n    updateDiagramm() {\r\n        //put each value Array in State\r\n        this.diagrammData.lineLabels = [];\r\n        this.diagrammData.sensorRow = [];\r\n        this.diagrammData.datavalue = [];\r\n        this.diagrammData.time = [];\r\n        this.diagrammData.showDiagram = true;\r\n\r\n        var datavalues = [];\r\n        if (this.props.dataRows !== undefined) {\r\n            for (var z = 0; z < this.props.dataRows.length; z++) {\r\n                this.diagrammData.sensorRow.push(this.props.dataRows[z].sensorType);\r\n                for (var dataCoordinate = 0; dataCoordinate < 3; dataCoordinate++) {\r\n                    for (var j = 0; j < this.props.dataRows[z].datapoint.length; j++) {\r\n                        datavalues.push(this.props.dataRows[z].datapoint[j].value[dataCoordinate]);\r\n                    }\r\n                    this.diagrammData.datavalue.push(datavalues);\r\n                    datavalues = [];\r\n                }\r\n            }\r\n            // eslint-disable-next-line\r\n            for (var j = 0; j < this.props.dataRows[0].datapoint.length; j++) {\r\n                this.diagrammData.time.push(this.props.dataRows[0].datapoint[j].relativeTime);\r\n            }\r\n\r\n            var newDatasets = [];\r\n            var lineLabels = [];\r\n            for (var i = 0; i < this.diagrammData.sensorRow.length * 3; i++) {\r\n                var coordinate = \".X\";\r\n                var sensor = this.diagrammData.sensorRow[(i / 3) | 0];\r\n                var sensorName = '';\r\n                /**\r\n                 * unterscheidet, welche Sensor es ist\r\n                 */\r\n                switch (sensor) {\r\n                    case 2:\r\n                        sensorName = Diagram.T_ACCELEROMETER_DE;\r\n                        break;\r\n                    case 3:\r\n                        sensorName = Diagram.T_GYROSCOPE_DE;\r\n                        break;\r\n                    case 4:\r\n                        sensorName = Diagram.T_MAGNETOMETER_DE;\r\n                        break;\r\n                }\r\n                /**\r\n                 * unterscheidet, von welchem Koordinate dieser Datenpunkt ist\r\n                 */\r\n                if (i % 3 === 1) {\r\n                    coordinate = \".Y\";\r\n                }\r\n                if (i % 3 === 2) {\r\n                    coordinate = \".Z\";\r\n                }\r\n\r\n                lineLabels.push(<span color={this.diagrammData.csscolor[i]}>■{sensorName + coordinate}<br /></span>);\r\n\r\n                newDatasets.push(\r\n                    {\r\n                        label: sensorName + coordinate,\r\n                        strokeColor: this.diagrammData.color[i],\r\n                        borderWidth: 1,\r\n                        data: this.diagrammData.datavalue[i],\r\n                    }\r\n                );\r\n            }\r\n            const data = {\r\n                labels: this.diagrammData.time,\r\n                datasets: newDatasets\r\n            };\r\n            const options = {\r\n                datasetFill: false,\r\n                pointDotRadius: 2,\r\n                pointHitDetectionRadius: 1,\r\n                offsetGridLines: false,\r\n                pointDot: false\r\n            };\r\n            this.diagrammData.diagramData = data;\r\n            this.diagrammData.lineLabels = lineLabels;\r\n            this.diagrammData.diagramOptions = options;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Rendert diese Diagram-Komponente\r\n     * @returns Diagramm-Teil\r\n     */\r\n    render() {\r\n        var LineChart = require(\"react-chartjs\").Line;\r\n        this.updateDiagramm();\r\n        return (\r\n            <div>\r\n                {this.diagrammData.lineLabels}\r\n                <LineChart data={this.diagrammData.diagramData} options={this.diagrammData.diagramOptions} width=\"400\" height=\"200\" redraw />\r\n            </div>\r\n        );\r\n    }\r\n}","import React, { Component, ChangeEvent } from 'react';\r\nimport { NotificationManager } from 'react-notifications';\r\nimport './index.css'\r\n\r\nexport default class Labelling extends Component {\r\n    private static readonly E_MISSING_DE: string = \"Das Labelzeitfenster muss bestimmt werden!\";\r\n    private static readonly E_NAME_MISSING_DE: string = \"Das Labelzeitfenster braucht einen Namen!\";\r\n    private static readonly E_TIME_INVALID_DE: string = \"Das Labelzeitfenster muss mit einer Start und Endzeit bestimmt werden,\\n die Angabe ist in Sekunden.\";\r\n    private static readonly T_BUTTON_DELETE_DE: string = \"Löschen\";\r\n    private static readonly T_BUTTON_ADD_DE: string = \"Label hinzufügen\";\r\n    private static readonly T_TIME_FROM_DE: string = \"Von\";\r\n    private static readonly T_TIME_TO_DE: string = \"bis\";\r\n    private static readonly T_LABEL_START_DE: string = \"Start\";\r\n    private static readonly T_LABEL_END_DE: string = \"Ende\";\r\n    private static readonly T_LABEL_NAME_DE: string = \"Label-Name\";\r\n\r\n    state = {\r\n        labels: [] as { labelID: number, start: number, end: number, name: string; }[],\r\n        newStart: \"\", newEnd: '', newName: \"\"\r\n    };\r\n\r\n    props = {\r\n        //die Funktion für neues Label hinzuzufügen, durch props übermittelt\r\n        newLabel: function (label: {\r\n            labelID: number;\r\n            start: number;\r\n            end: number;\r\n            name: string;\r\n        }) { },\r\n        //die Funktion für Label zu löschen, durch props übermittelt\r\n        pagedeleteLabel: function (label: {\r\n            labelID: number;\r\n            start: number;\r\n            end: number;\r\n            name: string;\r\n        }) { }\r\n    };\r\n    IDcounter: number = 0; //berechnet ID von Label\r\n\r\n    /**\r\n     * aktualisiert den State zu den eingegebenen Label-Namen\r\n     * @param e Eingabeaktion\r\n     */\r\n    handleChangeLabel = (e: ChangeEvent<HTMLInputElement>) => {\r\n        this.setState({ newName: e.target.value });\r\n    };\r\n\r\n    /**\r\n     * aktualisiert den State zu dem eingegebenen Zeitfenstersanfang\r\n     * @param e Eingabeaktion\r\n     */\r\n    handleChangeStart = (e: ChangeEvent<HTMLInputElement>) => {\r\n        this.setState({ newStart: e.target.value });\r\n    };\r\n\r\n    /**\r\n     * aktualisiert den State zu dem eingegebenen Zeitfenstersende\r\n     * @param e Eingabeaktion\r\n     */\r\n    handleChangeEnd = (e: ChangeEvent<HTMLInputElement>) => {\r\n        this.setState({ newEnd: e.target.value });\r\n    };\r\n\r\n    /**\r\n     * anrufe die Addierenmethode und leere die Eingabefelder\r\n     */\r\n    handleClick = () => {\r\n        const { newStart, newEnd, newName } = this.state;\r\n        const labelObj = { start: newStart, end: newEnd, name: newName };\r\n        this.addLabel(labelObj);\r\n        this.setState({ newStart: \"\", newEnd: '', newName: \"\" });\r\n    };\r\n\r\n    /**\r\n     * füge das eingegebene Label hinzu\r\n     */\r\n    addLabel = (labelObj: { start: string, end: string, name: string; }) => {\r\n        if (labelObj.start === \"\" || labelObj.end === \"\") {\r\n            NotificationManager.error(Labelling.E_MISSING_DE);\r\n            return;\r\n        }\r\n        if (labelObj.name === \"\") {\r\n            NotificationManager.error(Labelling.E_NAME_MISSING_DE);\r\n            return;\r\n        }\r\n        labelObj.start = labelObj.start.replace(\",\", \".\");\r\n        labelObj.end = labelObj.end.replace(\",\", \".\");\r\n        let start = this.formatFloatInString(labelObj.start);\r\n        let end = this.formatFloatInString(labelObj.end);\r\n        if (start === NaN && end === NaN) {\r\n            NotificationManager.success(Labelling.E_TIME_INVALID_DE);\r\n            return;\r\n        }\r\n        const label: { labelID: number, start: number, end: number, name: string; } = {\r\n            labelID: this.IDcounter,\r\n            start: start,\r\n            end: end,\r\n            name: labelObj.name\r\n        };\r\n        this.props.newLabel(label);\r\n        const { labels } = this.state;\r\n        const newLabels = [label, ...labels];\r\n        this.setState({ labels: newLabels });\r\n    };\r\n\r\n    /**\r\n     * lösche das entsprechende Label\r\n     * @param e die Klickaktion\r\n     * @param id ID von dem Label, das gelöscht wird\r\n     */\r\n    deleteLabel = (e: React.MouseEvent<HTMLButtonElement>, id: number) => {\r\n\r\n        const { labels } = this.state;\r\n\r\n        let newLabels = labels.filter((label) => {\r\n            if (label.labelID === id) {\r\n                this.props.pagedeleteLabel(label);\r\n            }\r\n            return label.labelID !== id;\r\n        });\r\n        this.setState({ labels: newLabels });\r\n    };\r\n\r\n    /**\r\n     * verwandelt String zur Nummer\r\n     * @param stringNumber das String, das verwandelt wird\r\n     * @returns die entsprechende Nummer\r\n     */\r\n    private formatFloatInString(stringNumber: string): number {\r\n        return (parseInt((parseFloat(stringNumber) * 1000).toString()) / 1000);\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"label-wrap\">\r\n                {\r\n                    this.state.labels.map((label) => {\r\n                        return (\r\n                            <li >\r\n                                {Labelling.T_TIME_FROM_DE} {label.start} s {Labelling.T_TIME_TO_DE} {label.end} s:  {label.name}\r\n                                <button className='delete' onClick={(e) => this.deleteLabel(e, label.labelID)}>{Labelling.T_BUTTON_DELETE_DE}</button>\r\n                            </li>\r\n                        );\r\n                    })}\r\n                <div>\r\n                    {Labelling.T_LABEL_START_DE}:\r\n                        <input type=\"text\" value={this.state.newStart} onChange={this.handleChangeStart} /><br />\r\n\r\n                    {Labelling.T_LABEL_END_DE}:\r\n                        <input type=\"text\" value={this.state.newEnd} onChange={this.handleChangeEnd} /><br />\r\n\r\n                    {Labelling.T_LABEL_NAME_DE}:\r\n                        <input type=\"text\" value={this.state.newName} onChange={this.handleChangeLabel} />\r\n                    <br />\r\n\r\n                    <button className='add' type=\"button\" onClick={() => this.handleClick()}>{Labelling.T_BUTTON_ADD_DE}</button>\r\n                </div>\r\n\r\n            </div>\r\n        );\r\n    }\r\n}","import { States } from \"../State\";\r\n\r\nexport class State {\r\n  currentState: States = States.NeedMessage;\r\n  currentLabel?: { labelID: number, start: number, end: number, name: string; }; //unbearbeitete Eingabe\r\n  languageCode: string = \"de\";\r\n  messageIDs: number[] = [];\r\n  messages: string[] = [];\r\n  usedSensorNames: string[] = [];\r\n  dataRows?: { sensorType: number, datapoint: { value: number[], relativeTime: number; }[]; }[] = [{ sensorType: 1, datapoint: [{ value: [5], relativeTime: 5 }] }];\r\n  labels: { id: number, start: number, end: number, name: string; }[] = [];\r\n}","import Title from \"../../components/FinishComponents/Title\";\r\nimport Body from \"../../components/FinishComponents/Diagram\";\r\nimport Labelling from \"../../components/FinishComponents/Input/Labelling\";\r\nimport 'react-notifications/lib/notifications.css';\r\nimport { Page } from \"../PageInterface\";\r\nimport { PageController } from \"../../../controller/PageController\";\r\nimport { State } from \"./State\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { States } from \"../State\";\r\nimport { NotificationContainer } from \"react-notifications\";\r\nimport './index.css'\r\n\r\n/**\r\n * Die Darstellungsseite für die Finishseite der Datenerfasser\r\n */\r\nexport class FinishPage implements Page {\r\n  private state: State;\r\n  private observers: PageController[] = [];\r\n\r\n  private static readonly T_BUTTON_RELOAD_DE = \"Erneut Erfassen\"\r\n\r\n  /**\r\n     * Konstruktor der Darstellungseite\r\n     */\r\n  constructor() {\r\n    this.state = new State();\r\n    this.update();\r\n  }\r\n\r\n  /**\r\n    * Update Methode der Darstellungsseite. Diese Methode wird nach jeder Änderung, die kein Seitenwechsel ist, aufgerufen. \r\n    * Die Methode enthält den Aufbau der Seite und wird von ihr gerendert.\r\n    * Es werden durch notify() alle controller über ein Update informiert und alle Seiten Elemente werden aktualisiert und erneut gerendert. \r\n    */\r\n  private update() {\r\n    this.notify();\r\n    const VDOM = (\r\n      <div>\r\n        <Title />\r\n        <Body dataRows={this.state.dataRows!} />\r\n        <div className=\"label-container\">\r\n          <Labelling newLabel={this.newLabel.bind(this)} pagedeleteLabel={this.pagedeleteLabel.bind(this)} />\r\n        </div>\r\n        <button className='reload' onClick = {this.reloadPage}>{FinishPage.T_BUTTON_RELOAD_DE}</button>\r\n        <NotificationContainer />\r\n      </div>\r\n    );\r\n    if (document.getElementById('root') !== null) {\r\n      ReactDOM.render(VDOM, document.getElementById('root'));\r\n    }\r\n  }\r\n\r\n  private reloadPage() {\r\n    window.location.reload()\r\n  }\r\n\r\n  /**\r\n   * Addiere ein neues Label\r\n   * @param label das label, das addiert wird\r\n   */\r\n  newLabel(label: { labelID: number, start: number, end: number, name: string; }) {\r\n    this.state.currentLabel = label;\r\n    this.state.currentState = States.NewLabel;\r\n    this.notify();\r\n  }\r\n\r\n  /**\r\n   * Lösche ein Label\r\n   * @param label das label, das gelöscht wird\r\n   */\r\n  pagedeleteLabel(label: { start: number, end: number, name: string, labelID: number; }) {\r\n    var deleteLabel = { labelID: label.labelID, start: label.start, end: label.end, name: label.name };\r\n    this.state.currentLabel = deleteLabel;\r\n    this.state.currentState = States.DeleteLabel;\r\n    this.notify();\r\n  }\r\n\r\n\r\n  /**\r\n    * Durch diese Methode kann sich ein Controller als Beobachter anmelden.\r\n    * @param oberver neuer Beobachter\r\n    */\r\n  attach(observer: PageController) {\r\n    this.observers.push(observer);\r\n  }\r\n\r\n  /**\r\n    * Durch diese Methode kann sich ein Controller als Beobachter abmelden.\r\n    * @param oberver Beobachter der zu entfernen ist\r\n    */\r\n  detach(observer: PageController) {\r\n    const index = this.observers.indexOf(observer, 0);\r\n    if (index > -1) {\r\n      this.observers.splice(index, 1);\r\n    }\r\n  }\r\n\r\n  /**\r\n    * Durch diese Methode werden alle Beobachter über eine Änderung auf der Seite informiert.\r\n    */\r\n  notify() {\r\n    for (let index = 0; index < this.observers.length; index++) {\r\n      const element = this.observers[index];\r\n      element.update();\r\n    }\r\n  }\r\n\r\n  /**\r\n     * Setzt einen neuen Zustand für die Seite und aktualisiert sie\r\n     * @param state neuer Zustand für die Seite\r\n     */\r\n  getState() {\r\n    return this.state;\r\n  }\r\n\r\n  /**\r\n    * Gibt den Status der Seite zurück\r\n    */\r\n  setState(state: any) {\r\n    this.state = state;\r\n    this.update();\r\n  }\r\n}","import { Page } from \"../view/pages/PageInterface\";\r\nimport { IState, States } from \"../view/pages/State\";\r\nimport { PageController } from \"./PageController\";\r\nimport { MainController } from \"./MainController\";\r\nimport { FinishPage } from \"../view/pages/FinishPage\";\r\n\r\n/**\r\n* Controller der die Fertigungsseite verwaltet\r\n*/\r\nexport class FinishController implements PageController {\r\n    /**\r\n    * Seite welche gerade von dem Controller verwaltet wird\r\n    */\r\n    private page: Page;\r\n    /**\r\n    * Status der Seite\r\n    */\r\n    private state: IState;\r\n\r\n    /**\r\n     * Konstruktor des Seitenverwalters. Registriert sich als Beobachter auf seiner Seite und setzt den start Status. \r\n     */\r\n    constructor () {\r\n        this.page = new FinishPage();\r\n        this.page.attach( this );\r\n        this.state = this.page.getState();\r\n        this.state.dataRows! = MainController.getInstance().getFacade().getCurrentDataRows()!.dataRows!;\r\n        this.page.setState( this.state );\r\n        this.update();\r\n    }\r\n\r\n    /**\r\n     * Die Update Methode des Seitenverwalters.\r\n     */\r\n    update () {\r\n        this.state = this.page.getState();\r\n        switch ( this.state.currentState ) {\r\n            case States.NeedMessage:\r\n                this.state.messages = MainController.getInstance().getMessage( this.state.messages )!;\r\n                this.state.currentState = States.waitForDB;\r\n                this.page.setState( this.state );\r\n                break;\r\n            case States.ChangeLabel:\r\n                this.changeDataLabel();\r\n                break;\r\n            case States.NewLabel:\r\n                this.newDataLabel();\r\n                break;\r\n            case States.DeleteLabel:\r\n                this.deleteDataLabel();\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Ändert die Einstellungen eines DatenLabels gemäß den Änderungen aus der momentanen Seite.\r\n     */\r\n    private changeDataLabel () {\r\n        let label = this.state.currentLabel!;\r\n        let sucess = MainController.getInstance().getFacade().setLabel( label.labelID, { start: label.start, end: label.end }, label.name );\r\n        sucess.then( ( value: boolean ) => {\r\n            if ( value ) {\r\n                this.state.currentState = States.setLabel;\r\n                this.page.setState( this.state );\r\n            } else {\r\n                this.state.currentState = States.LoadError;\r\n                this.page.setState( this.state );\r\n            }\r\n        } );\r\n    }\r\n\r\n    /**\r\n     * Erstellt ein neues Datenlabel. Dafür werden die neuen Daten des Labels aus der momentanene Seite an das\r\n     * Modell geleitet. Die ID des neuen Labels wird darauf an die momentane Seite übergeben.\r\n     */\r\n    private newDataLabel () {\r\n        let start: number = this.state.currentLabel!.start;\r\n        let end: number = this.state.currentLabel!.end;\r\n        let name: string = this.state.currentLabel!.name;\r\n        let promise: Promise<number> = MainController.getInstance().getFacade().createLabel( { start, end }, name );\r\n        this.state.wait! = promise;\r\n        promise.then( ( id: number ) => {\r\n            this.state.currentLabel!.labelID = id;\r\n            //PubSub.publish( 'newLabelWithID', this.state.currentLabel );\r\n            this.state.currentState = States.setLabel;\r\n            this.page.setState( this.state );\r\n        } );\r\n    }\r\n\r\n    /**\r\n     * Löscht das Label welches gemäß der Methode getDeleteLabelID von der momentanen Seite angegeben wurde.\r\n     */\r\n    private deleteDataLabel () {\r\n        let sucess = MainController.getInstance().getFacade().deleteLabel( this.state.currentLabel!.labelID );\r\n        sucess.then( ( value: boolean ) => {\r\n            if ( value ) {\r\n                this.state.currentState = States.setLabel;\r\n                this.page.setState( this.state );\r\n            } else {\r\n                this.state.currentState = States.LoadError;\r\n                this.page.setState( this.state );\r\n            }\r\n        } );\r\n    }\r\n}","import { DataCollectionPage } from \"../view/pages/DataCollectionPage/index\";\r\nimport { Page } from \"../view/pages/PageInterface\";\r\nimport { IState, States } from \"../view/pages/State\";\r\nimport { PageController } from \"./PageController\";\r\nimport { SensorManager } from \"./SensorManager\";\r\nimport { MainController } from \"./MainController\";\r\nimport { FinishController } from \"./FinishController\";\r\n\r\n/**\r\n* Controller der die Datenerfassungsseite verwaltet\r\n*/\r\nexport class DataCollectionController implements PageController {\r\n    /**\r\n    * Für die Verwaltung der Sensoren verantwortlich\r\n    */\r\n    private sensorManager: SensorManager;\r\n    /**\r\n    * Seite welche gerade von dem Controller verwaltet wird\r\n    */\r\n    private page: Page = new DataCollectionPage();\r\n    /**\r\n    * Status der Seite\r\n    */\r\n    private state: IState;\r\n\r\n    /**\r\n     * Konstruktor des Seitenverwalters. Registriert sich als Beobachter auf seiner Seite und setzt den start Status.\r\n     * Dieser Seitenverwalter benötigt einen SensorManager, welcher schon initilisiert wurde. \r\n     */\r\n    constructor(sensorManager: SensorManager) {\r\n        this.sensorManager = sensorManager;\r\n        this.page.attach(this);\r\n        this.state = this.page.getState();\r\n        this.state.leadTime = this.sensorManager.getWaitTime();\r\n\r\n        this.sensorManager.readData(this.page);\r\n\r\n\r\n    }\r\n\r\n    /**\r\n     * Die Update Methode des Seitenverwalters.\r\n     */\r\n    update() {\r\n        let state = this.page.getState();\r\n        switch (state.currentState) {\r\n            case States.StartDataRead:\r\n                this.sensorManager.readData(this.page);\r\n                break;\r\n            case States.NeedMessage:\r\n                this.state.messages = MainController.getInstance().getMessage(this.state.messages)!;\r\n                this.state.currentState = States.waitForDB;\r\n                this.page.setState(this.state);\r\n                break;\r\n            case States.NeedInstantDiagram:\r\n                break;\r\n            case States.ChangeToFinish:\r\n                MainController.getInstance().changeTo(new FinishController());\r\n                break;\r\n            case States.LoadError:\r\n                if (window.confirm(\"Es wurden nicht alle Daten Erfolgreich gesendet. Stellen sie sicher das eine Internetverbindung besteht. Sollen die Daten erneut gesendet werden?\")) {\r\n                    MainController.getInstance().getFacade().sendDataPointsAgain().then((result) => {\r\n                        if (!result) {\r\n                            this.state.currentState = States.LoadError;\r\n                            this.page.setState(state);\r\n                        }\r\n                    });\r\n                }\r\n                this.state.currentState = States.waitForDB;\r\n                this.page.setState(state);\r\n                break;\r\n            //case States.SetWaitTime:\r\n            //    PubSub.publish('nextCount', this.state.recordingSettings!.waitTime);\r\n            //    break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n}","import { MainController } from \"./MainController\";\r\nimport { Page } from \"../view/pages/PageInterface\";\r\nimport { PageController } from \"./PageController\";\r\nimport { SensorManager } from \"./SensorManager\";\r\nimport { DataCollectionController } from \"./DataCollectionController\";\r\nimport { IState, States } from \"../view/pages/State\";\r\nimport { StartPage } from \"../view/pages/StartPage/index\";\r\n\r\nexport class StartController implements PageController {\r\n\r\n    private urlParams: URLSearchParams;\r\n\r\n    private page: Page;\r\n    private sensorManager = new SensorManager();\r\n    private state: IState;\r\n    /**\r\n     * Konstruktor des Seitenverwalters. Registriert sich als Beobachter auf seiner Seite und setzt den start Status. \r\n     */\r\n    constructor () {\r\n        const queryString = window.location.search;\r\n        this.urlParams = new URLSearchParams( queryString );\r\n        let admin = this.urlParams.get( \"Admin\" )!;\r\n        this.page = new StartPage( \"Wilkommen! Sie erfassen für \" + admin );\r\n        this.page.attach( this );\r\n        this.state = this.page.getState();\r\n        MainController.getInstance().getFacade().registerDataminer( \"Miner\", +this.urlParams.get( \"SessionID\" )! );\r\n        this.state.wait! = this.sensorManager.getAvailableSensors().then(\r\n            ( availableSensor ) => {\r\n                for ( let index = 0; index < availableSensor.length; index++ ) {\r\n                    const sensorTypID: number = availableSensor[ index ].sensorTypID;\r\n                    const sensorType: string = availableSensor[ index ].sensorType;\r\n                    const chosen: boolean = false;\r\n                    this.state.recordingSettings!.availableSensorTypes.push( { sensorTypID, sensorType, chosen } );\r\n\r\n                }\r\n                this.page.setState( this.state );\r\n            } );\r\n        this.update();\r\n    }\r\n\r\n    /**\r\n     * Die Update Methode des Seitenverwalters.\r\n     */\r\n    update () {\r\n        this.state = this.page.getState();\r\n        switch ( this.state.currentState ) {\r\n            case States.ChangeToDataCollection:\r\n                this.start();\r\n                break;\r\n            case States.SetLanguage:\r\n                MainController.getInstance().setLanguage( this.state.languageCode );\r\n                break;\r\n            case States.NeedMessage:\r\n                this.state.messages = MainController.getInstance().getMessage( this.state.messages )!;\r\n                this.state.currentState = States.waitForDB;\r\n                this.page.setState( this.state );\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Holt sich alle wichtigen Daten für die Datenaufnahme aus der momentanen Seite. Darauf wird mit dem Sensormanager\r\n     * die Datenaufnahme initialisiert. Zum Schluss wird der Seitenwechsel zur Erfassungseite durchgeführt. \r\n     */\r\n    private start () {\r\n        let sensorTypes: number[] = this.state.recordingSettings!.usedSensorTypes;\r\n        let dataSetName: string = this.state.recordingSettings!.newDataSetName;\r\n        let waitTime: number = this.state.recordingSettings!.waitTime;\r\n        let readTime: number = this.state.recordingSettings!.readTime;\r\n        this.sensorManager.setUpDataRead( sensorTypes, dataSetName, waitTime, readTime, true ); //Was ist wenn Datensatz nicht erstellt? also false zurück gegeben wird\r\n        let dataCollectionController = new DataCollectionController( this.sensorManager );\r\n        MainController.getInstance().changeTo( dataCollectionController );\r\n    }\r\n\r\n\r\n}","import { PageController } from \"./PageController\";\r\nimport { RefferingController } from \"./ReferringController\";\r\nimport { MainControllerInterface } from \"./MainControllerInterface\";\r\nimport { Facade } from \"../model/Facade\";\r\nimport { StartController } from \"./StartController\";\r\n\r\nimport dataDE from '../model/language/de.json';\r\nimport { AIController } from \"./AIController\";\r\nimport { DeliveryController } from \"./DeliveryController\";\r\n\r\n/**\r\n* Hauptverwalter der Anwendung. Enthält momentane Seite, die Fassade und verwaltet die Sprache.\r\n*/\r\nexport class MainController implements MainControllerInterface {\r\n  /**\r\n  * Fassade des Models\r\n  */\r\n  private facade: Facade;\r\n\r\n  /**\r\n  * Nach dem Singelton Muster enthält sich der Maincontroller genau einmal selber.\r\n  */\r\n  private static mainController: MainController;\r\n\r\n  /**\r\n  * Der momentane Seitencontroller\r\n  */\r\n  private currentPageController: PageController | undefined;\r\n\r\n  /**\r\n   * Konstruktor des MainControllers. Holt sich die Fassade.\r\n   */\r\n  constructor () {\r\n    document.title = \"Explorer App\"\r\n    this.facade = new Facade( \"de-de\" );\r\n  }\r\n\r\n  private languageCode: string = \"de-de\";\r\n\r\n  /**\r\n   * Gibt sich selber zurück und sorgt dafür das nur ein MainController besteht.\r\n   * @returns MainController\r\n   */\r\n  static getInstance () {\r\n    if ( this.mainController === undefined ) {\r\n      this.mainController = new MainController();\r\n      return this.mainController;\r\n    }\r\n    return this.mainController;\r\n  }\r\n\r\n\r\n  /**\r\n   * Prüft ob der Benutzer angemeldet ist.\r\n   * @returns Gibt true zurück falls der Benutzer angemeldet ist, sonst wird false zurück gegeben.\r\n   */\r\n  checkLoginStatus () {\r\n    return false;//this.facade.checkLogin();\r\n  }\r\n\r\n  /**\r\n   * Setzt den momentanen Seitenverwalter neu\r\n   * @param destinationPageController Der neue Seitenverwalter\r\n   */\r\n  changeTo ( destinationPageController: PageController ) {\r\n    this.currentPageController = destinationPageController;\r\n  }\r\n\r\n  /**\r\n   * Andwendungstart, entscheidet durch die URL ob es sich um Desktop oder Smartphone handelt\r\n   */\r\n  startApp () {\r\n    const queryString = window.location.search;\r\n    let urlParams = new URLSearchParams( queryString );\r\n    if ( urlParams.get( \"isMiner\" ) === \"true\" ) {\r\n      this.currentPageController = new StartController();\r\n    }\r\n    else if ( urlParams.get( \"deliverModel\" ) === \"true\" ) {\r\n      let modelID: number = +urlParams.get( \"modelID\" )!;\r\n      this.currentPageController = new DeliveryController( modelID );\r\n    }\r\n    else if ( urlParams.get( \"useModel\" ) === \"true\" ) {\r\n      let modelID: number = +urlParams.get( \"modelID\" )!;\r\n      this.currentPageController = new AIController( modelID );\r\n    }\r\n    else {\r\n      this.currentPageController = new RefferingController();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @returns Gibt die Fassade zurück\r\n   */\r\n  getFacade () {\r\n    return this.facade;\r\n  }\r\n\r\n  /**\r\n   * @param ids Alle ids, zu denen man die Texte möchte.\r\n   * @returns Gibt alle texte zu den übergebenen ids zurück.\r\n   */\r\n  getMessage ( messages: { text: string, id: number; }[] ) {\r\n    return [ { text: \"null\", id: -1 } ];\r\n    /** \r\n    let messageIDs: number[] = [];\r\n    for ( let index = 0; index < messages.length; index++ ) {\r\n      messageIDs.push( messages[ index ].id );\r\n    }\r\n    let texts: string[] = [];\r\n    for ( let index = 0; index < messages.length; index++ ) {\r\n      messages[ index ].text = texts[ index ];\r\n      return messages;\r\n    } */\r\n  }\r\n\r\n  getText () {\r\n    switch ( this.languageCode ) {\r\n      case \"de-de\":\r\n        return dataDE;\r\n\r\n      default:\r\n        return dataDE;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @param languageCode Das Sprachkürzel als string.\r\n   * @returns Gibt true zurück falls der wechsel erfolgt ist, sonst false.\r\n   */\r\n  setLanguage ( languageCode: string ) {\r\n    this.languageCode = languageCode;\r\n  }\r\n\r\n  getLanguageCode () {\r\n    return this.languageCode;\r\n  }\r\n}\r\n","\r\nimport './index.css';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport { MainController } from './controller/MainController';\r\n\r\nMainController.getInstance().startApp();\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}